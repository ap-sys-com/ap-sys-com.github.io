{"version":3,"sources":["app/common/form/MyTextInput.jsx","app/config/firebase.js","app/firebase/authService.js","app/common/modals/ModalWrapper.jsx","app/common/modals/modalReducer.js","features/auth/LoginForm.jsx","app/common/modals/ModalManager.jsx","app/common/utils/NowLoading.jsx","app/common/errors/ErrorComponent.jsx","features/auth/AuthContainer.jsx","features/home/HomePage.jsx","features/nav/MasterMenu.jsx","app/common/utils/textFormstUtils.js","features/nav/PeriodMonthMenu.jsx","features/nav/SignedInMenu.jsx","features/nav/NavBar.jsx","features/period/periodReducer.js","features/dashboard/Dashboard.jsx","features/profiles/profilePage/ProfilePage.jsx","features/assign/tooltip/YearMonthTooptip.jsx","features/assign/tooltip/WorkinRatioTooltip.jsx","app/common/form/SpreadSheet.jsx","app/options/ymjOptions.js","app/options/memberOptionsFactory.js","app/options/memberTagOptionsFactory.js","app/options/memberAffiliationOptionsFactory.js","app/options/memberRankOptionsFactory.js","app/options/memberAssignManagerOptionsFactory.js","app/options/projectOptionsFactory.js","app/options/clientOptionsFactory.js","app/options/accDepartmentOptionsFactory.js","app/options/accSubjectOptionsFactory.js","app/options/precisionOptionsFactory.js","features/assign/columnsOptions.js","app/options/yearMonthOptionsFactory.js","app/async/asyncReducer.js","app/firestore/lastupdateService.js","app/firestore/assignService.js","app/firestore/firestoreService.js","features/lastupdate/lastupdateReducer.js","features/assign/assignReducer.js","features/assign/assignListBehavior.js","features/assign/AssignList.jsx","app/firestore/accDepartmentService.js","features/master/accDepartments/accDepartmentReducer.js","app/firestore/accSubjectService.js","features/master/accSubjects/accSubjectReducer.js","app/firestore/clientService.js","features/master/clients/clientReducer.js","app/firestore/memberAffiliationService.js","features/master/memberAffiliations/memberAffiliationReducer.js","app/firestore/memberAssignManagerService.js","features/master/memberAssignManagers/memberAssignManagerReducer.js","app/firestore/memberRankService.js","features/master/memberRanks/memberRankReducer.js","app/firestore/memberService.js","features/master/members/memberReducer.js","app/firestore/memberTagService.js","features/master/memberTags/memberTagReducer.js","app/firestore/precisionService.js","features/master/precisions/precisionReducer.js","app/firestore/projectService.js","features/master/projects/projectReducer.js","features/assign/AssignDashboard.jsx","app/common/form/MySelectInput.jsx","app/options/availableOptions.js","app/hooks/useFirestoreDoc.js","features/master/clients/ClientForm.jsx","features/master/clients/columnsOptions.js","features/master/clients/ClientList.jsx","features/master/clients/ClientDashboard.jsx","app/options/memberHubOptionsFactory.js","app/firestore/memberHubCostSalesService.js","features/master/memberHubCostSaless/memberHubCostSalesReducer.js","features/master/members/MemberForm.jsx","features/master/members/columnsOptions.js","features/master/members/MemberList.jsx","app/firestore/memberHubService.js","features/master/memberHubs/memberHubReducer.js","features/master/members/MemberDashboard.jsx","features/master/projects/ProjectForm.jsx","features/master/projects/columnsOptions.js","features/master/projects/ProjectList.jsx","features/master/projects/ProjectDashboard.jsx","app/options/useCostSalesOptions.js","features/master/memberTags/MemberTagForm.jsx","features/master/memberTags/columnsOptions.js","features/master/memberTags/MemberTagList.jsx","features/master/memberTags/MemberTagDashboard.jsx","features/master/memberRanks/MemberRankForm.jsx","features/master/memberRanks/columnsOptions.js","features/master/memberRanks/MemberRankList.jsx","features/master/memberRanks/MemberRankDashboard.jsx","features/master/memberAffiliations/MemberAffiliationForm.jsx","features/master/memberAffiliations/columnsOptions.js","features/master/memberAffiliations/MemberAffiliationList.jsx","features/master/memberAffiliations/MemberAffiliationDashboard.jsx","features/master/memberHubs/MemberHubForm.jsx","features/master/memberHubs/columnsOptions.js","features/master/memberHubs/MemberHubList.jsx","features/master/memberHubs/MemberHubDashboard.jsx","app/options/hubCostSalesKindOptions.js","features/master/memberHubCostSaless/MemberHubCostSalesForm.jsx","features/master/memberHubCostSaless/columnsOptions.js","features/master/memberHubCostSaless/MemberHubCostSalesList.jsx","features/master/memberHubCostSaless/MemberHubCostSalesDashboard.jsx","features/master/accDepartments/AccDepartmentForm.jsx","features/master/accDepartments/columnsOptions.js","features/master/accDepartments/AccDepartmentList.jsx","features/master/accDepartments/AccDepartmentDashboard.jsx","app/options/canInputSalesOptions.js","features/master/accSubjects/AccSubjectForm.jsx","features/master/accSubjects/columnsOptions.js","features/master/accSubjects/AccSubjectList.jsx","features/master/accSubjects/AccSubjectDashboard.jsx","features/master/memberAssignManagers/MemberAssignManagerForm.jsx","features/master/memberAssignManagers/columnsOptions.js","features/master/memberAssignManagers/MemberAssignManagerList.jsx","features/master/memberAssignManagers/MemberAssignManagerDashboard.jsx","app/common/form/MyTextArea.jsx","features/master/precisions/PrecisionForm.jsx","features/master/precisions/columnsOptions.js","features/master/precisions/PrecisionList.jsx","features/master/precisions/PrecisionDashboard.jsx","app/layout/App.jsx","serviceWorker.js","features/auth/authReducer.js","app/store/rootReducer.js","features/auth/authConstants.js","index.js","app/store/configureStore.js","features/auth/authAction.js"],"names":["MyTextInput","label","props","useField","field","meta","FormField","error","touched","Label","pointing","color","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firestore","signOutFirebase","auth","signOut","ModalWrapper","children","size","header","dispatch","useDispatch","Modal","open","onClose","type","Header","Content","LoginForm","history","useHistory","onSubmit","values","a","setSubmitting","setErrors","creds","signInWithEmailAndPassword","email","password","push","initialValues","validationSchema","Yup","required","isSubmitting","dirty","isValid","errors","className","name","placeholder","basic","style","marginBottom","content","Button","loading","disabled","fluid","ModalManager","renderModal","modalLookup","currentModal","useSelector","state","modals","modalType","modalProps","ModalComponent","NowLoading","inverted","Dimmer","active","Loader","ErrorComponent","async","Segment","textAlign","message","as","Link","to","primary","marginTop","AuthContainer","authenticated","HomePage","vertical","Container","Image","src","marginRight","onClick","Icon","MasterMenu","Menu","Item","Dropdown","text","icon","Divider","displayYYYYMMJp","yyyyMM","strYYYYMM","length","substr","PeriodMonthMenu","period","currentPeriod","periods","yearMonth","SignedInMenu","currentUser","toast","avatar","spaced","photoURL","NavBar","fixed","alt","position","initialState","creating","isOpen","Dashboard","secondary","Group","Grid","columns","Column","filter","n","map","key","e","payload","close","Input","value","width","Select","compact","options","defaultValue","ProfilePage","YearMonthTooptip","offsetX","offsetY","visible","MouseTooltip","Table","Row","HeaderCell","Body","Cell","WorkinRatioTooltip","SpreadSheet","data","setSpreadSheet","onReady","useState","isReady","setIsReady","jexcelRef","useRef","initialOptions","allowComments","allowInsertRow","allowManualInsertRow","allowManualInsertColumn","defaultColAlign","contextMenu","useEffect","opt","current","jexcel","setData","ref","ymjOptions","id","memberOptionsFactory","members","available","member","memberTagOptionsFactory","memberTags","use_cost_sales","tag","includes","memberAffiliationOptionsFactory","memberAffiliations","affiliation","memberRankOptionsFactory","memberRanks","rank","memberAssignManagerOptionsFactory","memberAssignManagers","assignManager","projectOptionsFactory","projects","project","clientOptionsFactory","clients","client","accDepartmentOptionsFactory","accDepartments","accDepartment","accSubjectOptionsFactory","accSubjects","accSubject","precisionOptionsFactory","precisions","precision","columnsOptions","title","align","readOnly","source","autocomplete","mask","asyncActionError","count","initialized","db","fetchLastUpdatesFromFirestore","collection","where","addOrUpdateLastUpdateToFirestore","collection_name","lastupdate","doc","set","closing_year_month","fetchAssignsFromFirestore","orderBy","dataFromSnapshot","snapshot","exists","prop","hasOwnProperty","Timestamp","toDate","fetchLastUpdates","get","acc_department","acc_subject","assign","member_affiliation","member_assign_manager","member_hub","member_hub_cost_sales","member_rank","member_tag","docs","forEach","item","slice","mustRefresh","Array","isArray","last","updated_at","getTime","console","log","result","lastupadte","addAssign","removeAssign","assignId","editAssign","equalAssign","dst","year_month","budget_performance_class","sales","cost","working_ratio","assigns","add","update","remove","duplicateRowData","spreadSheetRef","srcRowId","currentRowData","getRowData","createShowYearMonthTag","createShowWorkingRatioTag","cuid","createId","targetMemberId","targetYearMonth","editRowForSpreadSheet","col","row","master","inputForSpreadSheet","_stripCamma","masters","inputForColMember","inputForColMemberTag","inputForColProject","inputForColAccSubject","inputForColSales","inputForColCost","inputForColWorkingRatio","inputForColPrecision","memberId","getValueFromCoords","setValueFromCoords","assign_manager","inputForColMemberSales","memberTagId","memberTag","toLowerCase","getCellFromCoords","classList","accSubjectId","precisionId","can_input_sales","_stripToZero","workingRatio","salesRaw","profit","calcProfit","calcInHouseCost","profitRatio","calcProfitRatio","memberSalesDiff","calcMemberSalesDiff","innerHTML","inHouseCost","Math","round","memberSales","replace","parseFloat","AssignPage","command","location","hash","tooltipVisible1","setTooltipVisible1","tooltipVisible2","setTooltipVisible2","memberAffiliation","memberAssignManager","memberRank","spreadSheet","startsWith","currentRowIds","getSelectedRows","newRowData","insertRow","addRowForSpreadSheet","window","confirm","deleteRow","removeRowForSpreadSheet","onchange","instance","cell","x","y","parseInt","index","fetchAccDepartmentsFromFirestore","addAccDepartmentToFirestore","user","now","created_at","created_user","updated_user","updateAccDepartmentToFirestore","lo","omit","createAccDepartment","updateAccDepartment","fetchAccDepartments","getState","ret","href","selectedAccDepartment","fetchAccSubjectsFromFirestore","addAccSubjectToFirestore","updateAccSubjectToFirestore","createAccSubject","updateAccSubject","fetchAccSubjects","selectedAccSubject","fetchClientsFromFirestore","addClientToFirestore","updateClientToFirestore","createClient","updateClient","fetchClients","selectedClient","fetchMemberAffiliationsFromFirestore","addMemberAffiliationToFirestore","updateMemberAffiliationToFirestore","createMemberAffiliation","updateMemberAffiliation","fetchMemberAffiliations","selectedMemberAffiliation","fetchMemberAssignManagersFromFirestore","addMemberAssignManagerToFirestore","updateMemberAssignManagerToFirestore","createMemberAssignManager","updateMemberAssignManager","fetchMemberAssignManagers","selectedMemberAssignManager","fetchMemberRanksFromFirestore","addMemberRankToFirestore","updateMemberRankToFirestore","createMemberRank","updateMemberRank","fetchMemberRanks","selectedMemberRank","fetchMembersFromFirestore","addMemberToFirestore","updateMemberToFirestore","createMember","updateMember","fetchMembers","selectedMember","fetchMemberTagsFromFirestore","addMemberTagToFirestore","updateMemberTagToFirestore","createMemberTag","updateMemberTag","fetchMemberTags","selectedMemberTag","fetchPrecisionsFromFirestore","addPrecisionToFirestore","updatePrecisionToFirestore","createPrecision","updatePrecision","fetchPrecisions","selectedPrecision","fetchProjectsFromFirestore","addProjectToFirestore","updateProjectToFirestore","createProject","updateProject","fetchProjects","selectedProject","AssignDashboard","refresh","setRefresh","then","Promise","all","add_row","remove_row","year_month_show","working_ratio_show","Sidebar","Pushable","Pusher","MySelectInput","helpers","onChange","d","setValue","onBlur","setTouched","availableOptions","useFirestoreDoc","query","deps","shouldExecute","unsubscribe","onSnapshot","code","ClientForm","clientId","setVisibleDetail","handleRefresh","loadFromClientFromFirestore","enableReinitialize","validateOnBlur","resetForm","positive","negative","ClientList","ClientDashboard","visibleDetail","animation","direction","dimmed","memberHubOptionsFactory","memberHubs","hub","fetchMemberHubCostSalessFromFirestore","addMemberHubCostSalesToFirestore","memberHubCostSales","updateMemberHubCostSalesToFirestore","createMemberHubCostSales","updateMemberHubCostSales","fetchMemberHubCostSaless","memberHubCostSaless","getCostAndSales","memberHubId","memberRankId","costs","cost_sales_kind","saless","cost_sales","selectedMemberHubCostSales","MemberForm","memberHub","notRequired","loadFromMemberFromFirestore","setFieldValue","search","clearable","target","MemberList","fetchMemberHubsFromFirestore","addMemberHubToFirestore","updateMemberHubToFirestore","createMemberHub","updateMemberHub","fetchMemberHubs","selectedMemberHub","MemberDashboard","ProjectForm","note","loadFromProjectFromFirestore","ProjectList","ProjectDashboard","useCostSalesOptions","MemberTagForm","loadFromMemberTagFromFirestore","MemberTagList","MemberTagDashboard","MemberRankForm","loadFromMemberRankFromFirestore","MemberRankList","MemberRankDashboard","MemberAffiliationForm","memberAffiliationId","loadFromMemberAffiliationFromFirestore","MemberAffiliationList","MemberAffiliationDashboard","MemberHubForm","loadFromMemberHubFromFirestore","MemberHubList","MemberHubDashboard","hubCostSalesKindOptions","MemberHubCostSalesForm","memberHubCostSalesId","typeError","loadFromMemberHubCostSalesFromFirestore","MemberHubCostSalesList","MemberHubCostSalesDashboard","AccDepartmentForm","accDepartmentId","loadFromAccDepartmentFromFirestore","AccDepartmentList","AccDepartmentDashboard","canInputSalesOptions","AccSubjectForm","loadFromAccSubjectFromFirestore","AccSubjectDashboard","MemberAssignManagerForm","memberAssignManagerId","loadFromMemberAssignManagerFromFirestore","MemberAssignManagerList","MemberAssignManagerDashboard","MyTextArea","PrecisionForm","loadFromPrecisionFromFirestore","rows","render","PrecisionList","PrecisionDashboard","App","hideProgressBar","exact","path","component","Boolean","hostname","match","rootReducer","combineReducers","store","createStore","composeWithDevTools","applyMiddleware","thunk","onAuthStateChanged","signOutUser","configureStore","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.93eaebf0.chunk.js","sourcesContent":["import { useField } from \"formik\";\r\nimport React from \"react\";\r\nimport { FormField, Label } from \"semantic-ui-react\";\r\n\r\nexport default function MyTextInput({ label, ...props }) {\r\n  const [field, meta] = useField(props);\r\n\r\n  return (\r\n    <FormField error={meta.touched && !!meta.error}>\r\n      <label>{label}</label>\r\n      <input {...field} {...props} />\r\n      {meta.touched && meta.error ? (\r\n        <Label pointing color=\"red\">\r\n          {meta.error}\r\n        </Label>\r\n      ) : null}\r\n    </FormField>\r\n  );\r\n}\r\n","import firebase from \"firebase/app\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/database\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDZ04kYbwSRlCebBOrF_7VlCFauBSaR5_o\",\r\n  authDomain: \"system-forecast.firebaseapp.com\",\r\n  databaseURL: \"https://system-forecast.firebaseio.com\",\r\n  projectId: \"system-forecast\",\r\n  storageBucket: \"system-forecast.appspot.com\",\r\n  messagingSenderId: \"300878264992\",\r\n  appId: \"1:300878264992:web:2c36eb34294ca6ed2b27c5\",\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nfirebase.firestore();\r\n\r\nexport default firebase;\r\n","import firebase from \"../config/firebase\";\r\n\r\nexport function signInFirebaseWithEmail(creds) {\r\n  return firebase\r\n    .auth()\r\n    .signInWithEmailAndPassword(creds.email, creds.password);\r\n}\r\n\r\nexport function signOutFirebase() {\r\n  return firebase.auth().signOut();\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Modal } from \"semantic-ui-react\";\r\nimport { closeModal } from \"./modalReducer\";\r\n\r\nexport default function ModalWrapper({ children, size, header }) {\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <Modal open={true} onClose={() => dispatch(closeModal())} size={size}>\r\n      {header && <Modal.Header>{header}</Modal.Header>}\r\n      <Modal.Content>{children}</Modal.Content>\r\n    </Modal>\r\n  );\r\n}\r\n","const OPEN_MODAL = \"modal/open\";\r\nconst CLOSE_MODAL = \"modal/close\";\r\n\r\nexport function openModal(payload) {\r\n  return {\r\n    type: OPEN_MODAL,\r\n    payload,\r\n  };\r\n}\r\n\r\nexport function closeModal() {\r\n  return {\r\n    type: CLOSE_MODAL,\r\n  };\r\n}\r\n\r\nconst initialState = null;\r\n\r\nexport default function modalReducer(state = initialState, { type, payload }) {\r\n  switch (type) {\r\n    case OPEN_MODAL:\r\n      const { modalType, modalProps } = payload;\r\n      return { modalType, modalProps };\r\n    case CLOSE_MODAL:\r\n      return null;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Button, Label } from \"semantic-ui-react\";\r\nimport { Form, Formik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport MyTextInput from \"../../app/common/form/MyTextInput\";\r\nimport { signInFirebaseWithEmail } from \"../../app/firebase/authService\";\r\nimport ModalWrapper from \"../../app/common/modals/ModalWrapper\";\r\n\r\nexport default function LoginForm() {\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <ModalWrapper size=\"mini\" header=\"フォーキャストにサインイン\">\r\n      <Formik\r\n        onSubmit={async (values, { setSubmitting, setErrors }) => {\r\n          setSubmitting(true);\r\n          try {\r\n            await signInFirebaseWithEmail(values);\r\n            history.push(\"/dashboard\");\r\n          } catch (error) {\r\n            setErrors({\r\n              auth: \"メールアドレス、またはパスワードが間違っています\",\r\n            });\r\n          } finally {\r\n            setSubmitting(false);\r\n          }\r\n        }}\r\n        initialValues={{ email: \"\", password: \"\" }}\r\n        validationSchema={Yup.object({\r\n          email: Yup.string()\r\n            .required(\"Email Address を入力してください\")\r\n            .email(\"Email 形式で入力してください\"),\r\n          password: Yup.string().required(\"パスワードを入力してください\"),\r\n        })}>\r\n        {({ isSubmitting, dirty, isValid, errors }) => (\r\n          <Form className=\"ui form\">\r\n            <MyTextInput name=\"email\" placeholder=\"Email Address\" />\r\n            <MyTextInput\r\n              name=\"password\"\r\n              placeholder=\"password\"\r\n              type=\"password\"\r\n            />\r\n            {errors.auth && (\r\n              <Label\r\n                basic\r\n                color=\"red\"\r\n                style={{ marginBottom: 10 }}\r\n                content={errors.auth}\r\n              />\r\n            )}\r\n\r\n            <Button\r\n              loading={isSubmitting}\r\n              disabled={!isValid || !dirty || isSubmitting}\r\n              type=\"submit\"\r\n              fluid\r\n              size=\"large\"\r\n              color=\"teal\"\r\n              content=\"サインイン\"\r\n            />\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </ModalWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport LoginForm from \"../../../features/auth/LoginForm\";\r\n\r\nexport default function ModalManager() {\r\n  const modalLookup = {\r\n    LoginForm,\r\n  };\r\n  const currentModal = useSelector((state) => state.modals);\r\n  let renderModal;\r\n  if (currentModal) {\r\n    const { modalType, modalProps } = currentModal;\r\n    const ModalComponent = modalLookup[modalType];\r\n    renderModal = <ModalComponent {...modalProps} />;\r\n  }\r\n  return <span>{renderModal}</span>;\r\n}\r\n","import React from \"react\";\r\nimport { Dimmer, Loader } from \"semantic-ui-react\";\r\n\r\nexport default function NowLoading({\r\n  inverted = true,\r\n  content = \"Loading...\",\r\n}) {\r\n  return (\r\n    <Dimmer inverted={inverted} active={true}>\r\n      <Loader content={content} />\r\n    </Dimmer>\r\n  );\r\n}\r\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { Segment, Header, Button } from \"semantic-ui-react\";\n\nexport default function ErrorComponent() {\n  const { error } = useSelector((state) => state.async);\n\n  return (\n    <Segment placeholder basic>\n      <Header\n        textAlign=\"center\"\n        content={error?.message || \"エラーが発生しました\"}\n      />\n      <Button\n        as={Link}\n        to=\"/dashboard\"\n        primary\n        style={{ marginTop: 20 }}\n        content=\"ダッシュボードへ戻る\"\n      />\n    </Segment>\n  );\n}\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport LoginForm from \"./LoginForm\";\r\n\r\nexport default function AuthContainer({ children }) {\r\n  const { authenticated } = useSelector((state) => state.auth);\r\n  return <>{authenticated === true ? children : <LoginForm />}</>;\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Button,\r\n  Container,\r\n  Header,\r\n  Icon,\r\n  Image,\r\n  Segment,\r\n} from \"semantic-ui-react\";\r\n\r\nexport default function HomePage({ history }) {\r\n  return (\r\n    <Segment inverted textAlign=\"center\" vertical className=\"masthead\">\r\n      <Container>\r\n        <Header as=\"h1\" inverted style={{ marginBottom: 50 }}>\r\n          <Image\r\n            size=\"massive\"\r\n            src=\"/assets/logo.png\"\r\n            style={{ marginBottom: 12, marginRight: 12 }}\r\n          />\r\n          Forecast\r\n        </Header>\r\n        <Button\r\n          onClick={() => history.push(\"/dashboard\")}\r\n          size=\"huge\"\r\n          color=\"teal\">\r\n          Get Started\r\n          <Icon name=\"right arrow\" />\r\n        </Button>\r\n      </Container>\r\n    </Segment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Dropdown, Menu } from \"semantic-ui-react\";\r\n\r\nexport default function MasterMenu() {\r\n  return (\r\n    <Menu.Item>\r\n      <Dropdown pointing=\"top right\" text=\"設定\">\r\n        <Dropdown.Menu>\r\n          <Dropdown.Item as={Link} to=\"/members\" text=\"メンバー\" icon=\"users\" />\r\n          <Dropdown.Item\r\n            as={Link}\r\n            to=\"/memberaffiliations\"\r\n            text=\"メンバー所属\"\r\n            icon=\"users\"\r\n          />\r\n          <Dropdown.Item\r\n            as={Link}\r\n            to=\"/membertags\"\r\n            text=\"メンバータグ\"\r\n            icon=\"users\"\r\n          />\r\n          <Dropdown.Item\r\n            as={Link}\r\n            to=\"/memberranks\"\r\n            text=\"メンバーランク\"\r\n            icon=\"users\"\r\n          />\r\n          <Dropdown.Item\r\n            as={Link}\r\n            to=\"/memberassignmanagers\"\r\n            text=\"メンバーアサイン管理担当者\"\r\n            icon=\"users\"\r\n          />\r\n          <Dropdown.Item\r\n            as={Link}\r\n            to=\"/memberhubs\"\r\n            text=\"メンバー拠点（標準売上原価用）\"\r\n            icon=\"users\"\r\n          />\r\n          <Dropdown.Item\r\n            as={Link}\r\n            to=\"/memberhubcostsaless\"\r\n            text=\"メンバー拠点別標準原価売上表\"\r\n            icon=\"users\"\r\n          />\r\n          <Dropdown.Divider />\r\n          <Dropdown.Item as={Link} to=\"/projects\" text=\"案件\" icon=\"inbox\" />\r\n          <Dropdown.Item\r\n            as={Link}\r\n            to=\"/clients\"\r\n            text=\"クライアント\"\r\n            icon=\"building outline\"\r\n          />\r\n          <Dropdown.Item\r\n            as={Link}\r\n            to=\"/accdepartments\"\r\n            text=\"計上部門\"\r\n            icon=\"chart bar\"\r\n          />\r\n          <Dropdown.Item\r\n            as={Link}\r\n            to=\"/accsubjects\"\r\n            text=\"費用科目\"\r\n            icon=\"chart bar\"\r\n          />\r\n          <Dropdown.Item\r\n            as={Link}\r\n            to=\"/precisions\"\r\n            text=\"確度\"\r\n            icon=\"chart bar\"\r\n          />\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    </Menu.Item>\r\n  );\r\n}\r\n","export function displayYYYYMMJp(yyyyMM) {\r\n  const strYYYYMM = \"\" + yyyyMM;\r\n  if (strYYYYMM.length !== 6) {\r\n    return strYYYYMM;\r\n  }\r\n  return strYYYYMM.substr(0, 4) + \"年\" + strYYYYMM.substr(4, 2) + \"月\";\r\n}\r\n\r\nexport function stripYYYYMMJp(YYYYMM) {\r\n  return YYYYMM.replace(/年月/g, \"\");\r\n}\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Menu } from \"semantic-ui-react\";\r\nimport { displayYYYYMMJp } from \"../../app/common/utils/textFormstUtils\";\r\n\r\nexport default function PeriodMonthMenu() {\r\n  const { currentPeriod, periods } = useSelector((state) => state.period);\r\n\r\n  return (\r\n    <>\r\n      {periods.length !== 0 && (\r\n        <Menu.Item>{displayYYYYMMJp(currentPeriod.yearMonth)}</Menu.Item>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Dropdown, Image, Menu } from \"semantic-ui-react\";\r\nimport { signOutFirebase } from \"../../app/firebase/authService\";\r\n\r\nexport default function SignedInMenu() {\r\n  const { currentUser } = useSelector((state) => state.auth);\r\n  const history = useHistory();\r\n\r\n  async function handleSignOut() {\r\n    try {\r\n      history.push(\"/\");\r\n      await signOutFirebase();\r\n    } catch (error) {\r\n      toast.error(error.message);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Menu.Item>\r\n      <Image\r\n        avatar\r\n        spaced=\"right\"\r\n        src={currentUser?.photoURL || \"/assets/user.png\"}\r\n      />\r\n      <Dropdown pointing=\"top right\" text={currentUser?.email}>\r\n        <Dropdown.Menu>\r\n          <Dropdown.Item\r\n            as={Link}\r\n            to=\"/profile\"\r\n            text=\"ユーザー情報\"\r\n            icon=\"user\"\r\n          />\r\n          <Dropdown.Item\r\n            onClick={handleSignOut}\r\n            text=\"サインアウト\"\r\n            icon=\"power\"\r\n          />\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    </Menu.Item>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Container, Menu } from \"semantic-ui-react\";\r\nimport MasterMenu from \"./MasterMenu\";\r\nimport PeriodMonthMenu from \"./PeriodMonthMenu\";\r\nimport SignedInMenu from \"./SignedInMenu\";\r\n\r\nexport default function NavBar() {\r\n  return (\r\n    <Menu inverted fixed=\"top\">\r\n      <Container>\r\n        <Menu.Item header as={Link} to=\"/dashboard\">\r\n          <img src=\"/assets/logo.png\" alt=\"logo\" style={{ marginRight: 15 }} />\r\n          Forecast\r\n        </Menu.Item>\r\n        <PeriodMonthMenu />\r\n        <Menu.Item as={Link} to=\"/assign\" name=\"assign\">\r\n          Assign\r\n        </Menu.Item>\r\n        <Menu.Menu position=\"right\">\r\n          <MasterMenu />\r\n          <SignedInMenu />\r\n        </Menu.Menu>\r\n      </Container>\r\n    </Menu>\r\n  );\r\n}\r\n","const PERIOD_LATEST = \"period/latest\";\r\nconst PERIOD_CHANGE_CURRENT = \"period/change_current\";\r\nconst PERIOD_CREATE_START = \"period/create_start\";\r\nconst PERIOD_CREATE_FINISHED = \"period/create_finished\";\r\nconst PERIOD_REMOVE = \"period/remove\";\r\nconst PERIOD_CLOSE = \"period/close\";\r\nconst PERIOD_OPEN = \"period/opeb\";\r\n\r\n/** 締め情報を読み込んで、最後の締め情報を設定する */\r\nexport function latestPeriod() {\r\n  return function (dispatch) {\r\n    // datastore にアクセスして締め情報リストと最後の締め情報を設定する\r\n    const latest = [\r\n      { yearMonth: 202011, close: false },\r\n      { yearMonth: 202010, close: false },\r\n      { yearMonth: 202009, close: true },\r\n      { yearMonth: 202008, close: true },\r\n      { yearMonth: 202007, close: true },\r\n      { yearMonth: 202006, close: true },\r\n      { yearMonth: 202005, close: true },\r\n    ];\r\n\r\n    dispatch({ type: PERIOD_LATEST, payload: latest });\r\n  };\r\n}\r\n\r\n/** 現在の締め年月を変更する */\r\nexport function changeCurrentPeriod(yearMonth) {\r\n  return {\r\n    type: PERIOD_CHANGE_CURRENT,\r\n    payload: yearMonth,\r\n  };\r\n}\r\n\r\n/** 指定した締め情報を作成する（開始） */\r\nexport function createPeriodStart(yearMonth) {\r\n  return {\r\n    type: PERIOD_CREATE_START,\r\n    payload: yearMonth,\r\n  };\r\n}\r\n\r\n/** 指定した締め情報を作成する（終了） */\r\nexport function createPeriodFinished() {\r\n  return {\r\n    type: PERIOD_CREATE_FINISHED,\r\n  };\r\n}\r\n\r\n/** 指定した締め情報を削除する */\r\nexport function removePeriod(yearMonth) {\r\n  return {\r\n    type: PERIOD_REMOVE,\r\n    payload: yearMonth,\r\n  };\r\n}\r\n\r\n/** 指定した締め年月を閉じる */\r\nexport function closePeriod(yearMonth) {\r\n  return {\r\n    type: PERIOD_CLOSE,\r\n    payload: yearMonth,\r\n  };\r\n}\r\n\r\n/** 指定した締め年月を開く */\r\nexport function openPeriod(yearMonth) {\r\n  return {\r\n    type: PERIOD_OPEN,\r\n    payload: yearMonth,\r\n  };\r\n}\r\n\r\nconst initialState = {\r\n  creating: false,\r\n  periods: [],\r\n  currentPeriod: null,\r\n  isOpen: false,\r\n};\r\n\r\nexport default function periodReducer(state = initialState, { type, payload }) {\r\n  switch (type) {\r\n    case PERIOD_LATEST:\r\n      return {\r\n        ...state,\r\n        periods: payload,\r\n        currentPeriod: payload.length === 0 ? null : payload[0],\r\n      };\r\n    case PERIOD_CHANGE_CURRENT:\r\n      return {\r\n        ...state,\r\n        currentPeriod: state.periods.filter((n) => n.yearMonth === payload)[0],\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  Button,\r\n  Divider,\r\n  Dropdown,\r\n  Grid,\r\n  Header,\r\n  Icon,\r\n  Input,\r\n  Menu,\r\n  Segment,\r\n  Select,\r\n} from \"semantic-ui-react\";\r\nimport { displayYYYYMMJp } from \"../../app/common/utils/textFormstUtils\";\r\nimport { changeCurrentPeriod } from \"../period/periodReducer\";\r\n\r\nexport default function Dashboard() {\r\n  const { currentPeriod, periods } = useSelector((state) => state.period);\r\n  const dispatch = useDispatch();\r\n  const monthOptions = [\r\n    { key: \"1\", text: \"1\", value: \"01\" },\r\n    { key: \"2\", text: \"2\", value: \"02\" },\r\n    { key: \"3\", text: \"3\", value: \"03\" },\r\n    { key: \"4\", text: \"4\", value: \"04\" },\r\n    { key: \"5\", text: \"5\", value: \"05\" },\r\n    { key: \"6\", text: \"6\", value: \"06\" },\r\n    { key: \"7\", text: \"7\", value: \"07\" },\r\n    { key: \"8\", text: \"8\", value: \"08\" },\r\n    { key: \"9\", text: \"9\", value: \"09\" },\r\n    { key: \"10\", text: \"10\", value: \"10\" },\r\n    { key: \"11\", text: \"11\", value: \"11\" },\r\n    { key: \"12\", text: \"12\", value: \"12\" },\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      <Menu secondary className=\"jmenu\">\r\n        <Menu.Item className={\"secondary_toolbar_title\"}>DashBoard</Menu.Item>\r\n      </Menu>\r\n      <Segment.Group>\r\n        <Segment>\r\n          <Header as=\"h3\">締め年月</Header>\r\n        </Segment>\r\n        <Segment>\r\n          <Grid columns={2} textAlign=\"center\">\r\n            <Grid.Column>\r\n              <p> 編集を行う締め年月を選択してください。</p>\r\n              <Dropdown\r\n                pointing=\"top left\"\r\n                text={displayYYYYMMJp(currentPeriod.yearMonth)}>\r\n                <Dropdown.Menu>\r\n                  {periods\r\n                    .filter((n) => n.yearMonth !== currentPeriod.yearMonth)\r\n                    .map((period) => (\r\n                      <Dropdown.Item\r\n                        key={period.yearMonth}\r\n                        onClick={(e) => {\r\n                          dispatch(changeCurrentPeriod(period.yearMonth));\r\n                        }}>\r\n                        <Icon name={period.close ? \"lock\" : \"clock outline\"} />\r\n                        {displayYYYYMMJp(period.yearMonth)}\r\n                      </Dropdown.Item>\r\n                    ))}\r\n                </Dropdown.Menu>\r\n              </Dropdown>\r\n            </Grid.Column>\r\n            <Grid.Column>\r\n              <p>新しい年月を新規作成してください。</p>\r\n              <Input type=\"text\">\r\n                <input value=\"2020\" style={{ width: \"5em\" }} />\r\n                <Select compact options={monthOptions} defaultValue=\"12\" />\r\n                <Button color=\"teal\">新規作成</Button>\r\n              </Input>\r\n            </Grid.Column>\r\n          </Grid>\r\n          <Divider vertical>Or</Divider>\r\n        </Segment>\r\n      </Segment.Group>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Icon } from \"semantic-ui-react\";\r\n\r\nexport default function ProfilePage() {\r\n  return (\r\n    <h1>\r\n      <Icon name=\"user\" style={{ marginRight: \"0.5em\" }} />\r\n      ユーザー情報\r\n    </h1>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport MouseTooltip from \"react-sticky-mouse-tooltip\";\r\nimport { Header, Segment, Table } from \"semantic-ui-react\";\r\n\r\nexport default function YearMonthTooptip({ offsetX, offsetY, visible }) {\r\n  return (\r\n    <MouseTooltip offsetX={15} offsetY={-30} visible={visible}>\r\n      <Segment.Group>\r\n        <Segment>\r\n          <Header as=\"h4\">渥美政廣</Header>\r\n        </Segment>\r\n        <Segment>\r\n          <Table compact=\"very\" size=\"small\">\r\n            <Table.Header>\r\n              <Table.Row>\r\n                <Table.HeaderCell>案件</Table.HeaderCell>\r\n                <Table.HeaderCell>稼働率</Table.HeaderCell>\r\n              </Table.Row>\r\n            </Table.Header>\r\n            <Table.Body>\r\n              <Table.Row>\r\n                <Table.Cell>本社業務</Table.Cell>\r\n                <Table.Cell>20%</Table.Cell>\r\n              </Table.Row>\r\n              <Table.Row>\r\n                <Table.Cell>NIPPO</Table.Cell>\r\n                <Table.Cell>80%</Table.Cell>\r\n              </Table.Row>\r\n            </Table.Body>\r\n          </Table>\r\n        </Segment>\r\n      </Segment.Group>\r\n    </MouseTooltip>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport MouseTooltip from \"react-sticky-mouse-tooltip\";\r\nimport { Header, Segment, Table } from \"semantic-ui-react\";\r\n\r\nexport default function WorkinRatioTooltip({ offsetX, offsetY, visible }) {\r\n  return (\r\n    <MouseTooltip offsetX={15} offsetY={-30} visible={visible}>\r\n      <Segment.Group>\r\n        <Segment>\r\n          <Header as=\"h3\">渥美政廣</Header>\r\n        </Segment>\r\n        <Segment>\r\n          <Table compact=\"very\" size=\"small\">\r\n            <Table.Header>\r\n              <Table.Row>\r\n                <Table.HeaderCell>月</Table.HeaderCell>\r\n                <Table.HeaderCell>稼働率</Table.HeaderCell>\r\n              </Table.Row>\r\n            </Table.Header>\r\n            <Table.Body>\r\n              <Table.Row>\r\n                <Table.Cell>9月</Table.Cell>\r\n                <Table.Cell>100%(20%)</Table.Cell>\r\n              </Table.Row>\r\n              <Table.Row>\r\n                <Table.Cell>10月</Table.Cell>\r\n                <Table.Cell>100%(20%)</Table.Cell>\r\n              </Table.Row>\r\n              <Table.Row>\r\n                <Table.Cell>11月</Table.Cell>\r\n                <Table.Cell>100%(20%)</Table.Cell>\r\n              </Table.Row>\r\n              <Table.Row>\r\n                <Table.Cell>12月</Table.Cell>\r\n                <Table.Cell>100%(20%)</Table.Cell>\r\n              </Table.Row>\r\n              <Table.Row>\r\n                <Table.Cell>1月</Table.Cell>\r\n                <Table.Cell>100%(20%)</Table.Cell>\r\n              </Table.Row>\r\n              <Table.Row>\r\n                <Table.Cell>2月</Table.Cell>\r\n                <Table.Cell>100%(20%)</Table.Cell>\r\n              </Table.Row>\r\n              <Table.Row>\r\n                <Table.Cell>3月</Table.Cell>\r\n                <Table.Cell>100%(20%)</Table.Cell>\r\n              </Table.Row>\r\n              <Table.Row>\r\n                <Table.Cell>4月</Table.Cell>\r\n                <Table.Cell>100%(20%)</Table.Cell>\r\n              </Table.Row>\r\n              <Table.Row>\r\n                <Table.Cell>5月</Table.Cell>\r\n                <Table.Cell>100%(20%)</Table.Cell>\r\n              </Table.Row>\r\n              <Table.Row>\r\n                <Table.Cell>6月</Table.Cell>\r\n                <Table.Cell>100%(20%)</Table.Cell>\r\n              </Table.Row>\r\n              <Table.Row>\r\n                <Table.Cell>7月</Table.Cell>\r\n                <Table.Cell>100%(20%)</Table.Cell>\r\n              </Table.Row>\r\n              <Table.Row>\r\n                <Table.Cell>8月</Table.Cell>\r\n                <Table.Cell>100%(20%)</Table.Cell>\r\n              </Table.Row>\r\n            </Table.Body>\r\n          </Table>\r\n        </Segment>\r\n      </Segment.Group>\r\n    </MouseTooltip>\r\n  );\r\n}\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport jexcel from \"jexcel\";\r\nimport \"jexcel/dist/jexcel.css\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function SpreadSheet({\r\n  options, // jexcel のオプション\r\n  data, // jexcel のデータ\r\n  setSpreadSheet = null, // SpreadSheet の参照を格納するための useState の setter\r\n  onReady = null, // jexcel のインスタンスができ、データをセットしたのち、一度だけ呼ばれるイベント\r\n}) {\r\n  const [isReady, setIsReady] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const jexcelRef = useRef(null);\r\n\r\n  const initialOptions = useRef({\r\n    allowComments: false,\r\n    allowInsertRow: true,\r\n    allowManualInsertRow: false,\r\n    allowManualInsertColumn: false,\r\n    defaultColAlign: \"left\",\r\n    contextMenu: () => [],\r\n  });\r\n\r\n  useEffect(() => {\r\n    const opt = { ...initialOptions.current, ...options.current };\r\n    if (setSpreadSheet) {\r\n      setSpreadSheet(jexcel(jexcelRef.current, opt));\r\n    } else {\r\n      jexcel(jexcelRef.current, opt);\r\n    }\r\n  }, [dispatch, options, setSpreadSheet]);\r\n\r\n  useEffect(() => {\r\n    jexcelRef.current.jexcel.setData(data);\r\n  }, [data]);\r\n\r\n  // jexcel のインスタンスができ、データをセットしたのち、一度だけ呼ばれる\r\n  if (jexcelRef.current && isReady === false) {\r\n    if (onReady) {\r\n      onReady(jexcelRef.current.jexcel);\r\n    }\r\n    setIsReady(true);\r\n  }\r\n\r\n  return <div ref={jexcelRef} />;\r\n}\r\n","export const ymjOptions = [\r\n  { key: \"1\", id: \"1\", text: \"予算\", name: \"予算\", value: \"1\" },\r\n  { key: \"2\", id: \"2\", text: \"見込\", name: \"見込\", value: \"2\" },\r\n  { key: \"3\", id: \"3\", text: \"実績\", name: \"実績\", value: \"3\" },\r\n];\r\n","export const memberOptionsFactory = (members, available = \"true\") => {\r\n  return members\r\n    .filter((member) => member.available === available)\r\n    .map((member) => ({\r\n      key: member.id,\r\n      id: member.id,\r\n      text: member.name,\r\n      name: member.name,\r\n      value: member.id,\r\n    }));\r\n};\r\n","export const memberTagOptionsFactory = (\r\n  memberTags,\r\n  available = \"true\",\r\n  use_cost_sales = [\"true\", \"false\"]\r\n) => {\r\n  return memberTags\r\n    .filter(\r\n      (tag) =>\r\n        tag.available === available &&\r\n        use_cost_sales.includes(tag.use_cost_sales)\r\n    )\r\n    .map((tag) => ({\r\n      key: tag.id,\r\n      id: tag.id,\r\n      text: tag.name,\r\n      name: tag.name,\r\n      value: tag.id,\r\n    }));\r\n};\r\n","export const memberAffiliationOptionsFactory = (\r\n  memberAffiliations,\r\n  available = \"true\"\r\n) => {\r\n  return memberAffiliations\r\n    .filter((affiliation) => affiliation.available === available)\r\n    .map((affiliation) => ({\r\n      key: affiliation.id,\r\n      id: affiliation.id,\r\n      text: affiliation.name,\r\n      name: affiliation.name,\r\n      value: affiliation.id,\r\n    }));\r\n};\r\n","export const memberRankOptionsFactory = (memberRanks, available = \"true\") => {\r\n  return memberRanks\r\n    .filter((rank) => rank.available === available)\r\n    .map((rank) => ({\r\n      key: rank.id,\r\n      id: rank.id,\r\n      text: rank.name,\r\n      name: rank.name,\r\n      value: rank.id,\r\n    }));\r\n};\r\n","export const memberAssignManagerOptionsFactory = (\r\n  memberAssignManagers,\r\n  available = \"true\"\r\n) => {\r\n  return memberAssignManagers\r\n    .filter((assignManager) => assignManager.available === available)\r\n    .map((assignManager) => ({\r\n      key: assignManager.id,\r\n      id: assignManager.id,\r\n      text: assignManager.name,\r\n      name: assignManager.name,\r\n      value: assignManager.id,\r\n    }));\r\n};\r\n","export const projectOptionsFactory = (projects, available = \"true\") => {\r\n  return projects\r\n    .filter((project) => project.available === available)\r\n    .map((project) => ({\r\n      key: project.id,\r\n      id: project.id,\r\n      text: project.name,\r\n      name: project.name,\r\n      value: project.id,\r\n    }));\r\n};\r\n","export const clientOptionsFactory = (clients, available = \"true\") => {\r\n  return clients\r\n    .filter((client) => client.available === available)\r\n    .map((client) => ({\r\n      key: client.id,\r\n      id: client.id,\r\n      text: client.name,\r\n      name: client.name,\r\n      value: client.id,\r\n    }));\r\n};\r\n","export const accDepartmentOptionsFactory = (\r\n  accDepartments,\r\n  available = \"true\"\r\n) => {\r\n  return accDepartments\r\n    .filter((accDepartment) => accDepartment.available === available)\r\n    .map((accDepartment) => ({\r\n      key: accDepartment.id,\r\n      id: accDepartment.id,\r\n      text: accDepartment.name,\r\n      name: accDepartment.name,\r\n      value: accDepartment.id,\r\n    }));\r\n};\r\n","export const accSubjectOptionsFactory = (accSubjects, available = \"true\") => {\r\n  return accSubjects\r\n    .filter((accSubject) => accSubject.available === available)\r\n    .map((accSubject) => ({\r\n      key: accSubject.id,\r\n      id: accSubject.id,\r\n      text: accSubject.name,\r\n      name: accSubject.name,\r\n      value: accSubject.id,\r\n    }));\r\n};\r\n","export const precisionOptionsFactory = (precisions, available = \"true\") => {\r\n  return precisions\r\n    .filter((precision) => precision.available === available)\r\n    .map((precision) => ({\r\n      key: precision.id,\r\n      id: precision.id,\r\n      text: precision.name,\r\n      name: precision.name,\r\n      value: precision.id,\r\n    }));\r\n};\r\n","import { ymjOptions } from \"../../app/options/ymjOptions\";\r\nimport { yearMonthOptionsFactory } from \"../../app/options/yearMonthOptionsFactory\";\r\nimport { memberOptionsFactory } from \"../../app/options/memberOptionsFactory\";\r\nimport { memberTagOptionsFactory } from \"../../app/options/memberTagOptionsFactory\";\r\nimport { memberAffiliationOptionsFactory } from \"../../app/options/memberAffiliationOptionsFactory\";\r\nimport { memberRankOptionsFactory } from \"../../app/options/memberRankOptionsFactory\";\r\nimport { memberAssignManagerOptionsFactory } from \"../../app/options/memberAssignManagerOptionsFactory\";\r\nimport { projectOptionsFactory } from \"../../app/options/projectOptionsFactory\";\r\nimport { clientOptionsFactory } from \"../../app/options/clientOptionsFactory\";\r\nimport { accDepartmentOptionsFactory } from \"../../app/options/accDepartmentOptionsFactory\";\r\nimport { accSubjectOptionsFactory } from \"../../app/options/accSubjectOptionsFactory\";\r\nimport { precisionOptionsFactory } from \"../../app/options/precisionOptionsFactory\";\r\n\r\nconst columnsOptions = (\r\n  members = [],\r\n  memberTags = [],\r\n  memberAffiliations = [],\r\n  memberAssignManagers = [],\r\n  projects = [],\r\n  clients = [],\r\n  accDepartments = [],\r\n  accSubjects = [],\r\n  memberRanks = [],\r\n  precisions = [],\r\n  startYearMonth = \"202009\"\r\n) => {\r\n  return [\r\n    {\r\n      // 0\r\n      name: \"add_row\",\r\n      title: \"追加\",\r\n      width: \"100px\",\r\n      align: \"center\",\r\n      readOnly: true,\r\n      type: \"html\",\r\n    },\r\n    {\r\n      // 1\r\n      name: \"remove_row\",\r\n      title: \"削除\",\r\n      width: \"100px\",\r\n      align: \"center\",\r\n      readOnly: true,\r\n      type: \"html\",\r\n    },\r\n    {\r\n      // 2\r\n      name: \"errors\",\r\n      title: \"Err/War\",\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      type: \"text\",\r\n    },\r\n    {\r\n      // 3\r\n      name: \"member\",\r\n      title: \"メンバー\",\r\n      width: \"140px\",\r\n      type: \"dropdown\",\r\n      source: memberOptionsFactory(members),\r\n      autocomplete: true,\r\n    },\r\n    {\r\n      // 4\r\n      name: \"member_tag\",\r\n      title: \"社員/PT\",\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      type: \"dropdown\",\r\n      source: memberTagOptionsFactory(memberTags),\r\n      autocomplete: true,\r\n    },\r\n    {\r\n      // 5\r\n      name: \"member_affiliations\",\r\n      title: \"所属\",\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      type: \"dropdown\",\r\n      source: memberAffiliationOptionsFactory(memberAffiliations),\r\n      autocomplete: true,\r\n    },\r\n    {\r\n      // 6\r\n      name: \"year_month\",\r\n      title: \"月度\",\r\n      width: \"140px\",\r\n      type: \"dropdown\",\r\n      source: yearMonthOptionsFactory(startYearMonth),\r\n      autocomplete: true,\r\n    },\r\n    {\r\n      // 7\r\n      name: \"year_month_show\",\r\n      title: \"参照\",\r\n      align: \"center\",\r\n      width: \"50px\",\r\n      readOnly: true,\r\n      type: \"html\",\r\n    },\r\n    {\r\n      // 8\r\n      name: \"budget_performance_class\",\r\n      title: \"予算/見込/実績\",\r\n      width: \"140px\",\r\n      type: \"dropdown\",\r\n      source: ymjOptions,\r\n      autocomplete: true,\r\n    },\r\n    {\r\n      // 9\r\n      name: \"member_assign_manager\",\r\n      title: \"アサイン管理担当\",\r\n      width: \"140px\",\r\n      type: \"dropdown\",\r\n      source: memberAssignManagerOptionsFactory(memberAssignManagers),\r\n      autocomplete: true,\r\n    },\r\n    {\r\n      // 10\r\n      name: \"project\",\r\n      title: \"案件\",\r\n      width: \"140px\",\r\n      type: \"dropdown\",\r\n      source: projectOptionsFactory(projects),\r\n      autocomplete: true,\r\n    },\r\n    {\r\n      // 11\r\n      name: \"client\",\r\n      title: \"クライアント\",\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      type: \"dropdown\",\r\n      source: clientOptionsFactory(clients),\r\n      autocomplete: true,\r\n    },\r\n    {\r\n      // 12\r\n      name: \"acc_department\",\r\n      title: \"計上部門\",\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      type: \"dropdown\",\r\n      source: accDepartmentOptionsFactory(accDepartments),\r\n      autocomplete: true,\r\n    },\r\n    {\r\n      // 13\r\n      name: \"acc_subject\",\r\n      title: \"費用区分\",\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      type: \"dropdown\",\r\n      source: accSubjectOptionsFactory(accSubjects),\r\n      autocomplete: true,\r\n    },\r\n    {\r\n      // 14\r\n      name: \"sales\",\r\n      title: \"売上\",\r\n      align: \"right\",\r\n      width: \"140px\",\r\n      type: \"numeric\",\r\n      mask: \"[-]#,##\",\r\n    },\r\n    {\r\n      // 15\r\n      name: \"cost\",\r\n      title: \"標準原価/PT原価\",\r\n      align: \"right\",\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      type: \"numeric\",\r\n      mask: \"[-]#,##\",\r\n    },\r\n    {\r\n      // 16\r\n      name: \"working_ratio\",\r\n      title: \"稼働割合\",\r\n      align: \"right\",\r\n      width: \"140px\",\r\n      type: \"numeric\",\r\n    },\r\n    {\r\n      // 17\r\n      name: \"working_ratio_show\",\r\n      title: \"参照\",\r\n      align: \"center\",\r\n      width: \"50px\",\r\n      readOnly: true,\r\n      type: \"html\",\r\n    },\r\n    {\r\n      // 18\r\n      name: \"inhouse_cost\",\r\n      title: \"社内原価\",\r\n      align: \"right\",\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      type: \"numeric\",\r\n      mask: \"[-]#,##\",\r\n    },\r\n    {\r\n      // 19\r\n      name: \"profit\",\r\n      title: \"利益額\",\r\n      align: \"right\",\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      type: \"numeric\",\r\n      mask: \"[-]#,##\",\r\n    },\r\n    {\r\n      // 20\r\n      name: \"profit_ratio\",\r\n      title: \"利益率\",\r\n      align: \"right\",\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      type: \"text\",\r\n    },\r\n    {\r\n      // 21\r\n      name: \"member_rank\",\r\n      title: \"ランク\",\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      type: \"dropdown\",\r\n      source: memberRankOptionsFactory(memberRanks),\r\n      autocomplete: true,\r\n    },\r\n    {\r\n      // 22\r\n      name: \"member_sales\",\r\n      title: \"標準売上\",\r\n      align: \"right\",\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      type: \"numeric\",\r\n      mask: \"[-]#,##\",\r\n    },\r\n    {\r\n      // 23\r\n      name: \"member_sales_diff\",\r\n      title: \"標準売上差異\",\r\n      align: \"right\",\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      type: \"numeric\",\r\n      mask: \"[-]#,##\",\r\n    },\r\n    {\r\n      // 24\r\n      name: \"precision\",\r\n      title: \"確度\",\r\n      width: \"140px\",\r\n      type: \"dropdown\",\r\n      source: precisionOptionsFactory(precisions),\r\n      autocomplete: true,\r\n    },\r\n    {\r\n      // 25\r\n      name: \"id\",\r\n      title: \"ドキュメントID\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n      type: \"hidden\",\r\n    },\r\n    {\r\n      // 26\r\n      name: \"closing_year_month\",\r\n      title: \"締め年月\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n      type: \"hidden\",\r\n    },\r\n    {\r\n      // 27\r\n      name: \"created_at\",\r\n      title: \"作成日\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n      type: \"hidden\",\r\n    },\r\n    {\r\n      // 28\r\n      name: \"created_user\",\r\n      title: \"作成ユーザー\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n      type: \"hidden\",\r\n    },\r\n    {\r\n      // 29\r\n      name: \"updated_at\",\r\n      title: \"更新日\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n      type: \"hidden\",\r\n    },\r\n    {\r\n      // 30\r\n      name: \"updated_user\",\r\n      title: \"更新ユーザー\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n      type: \"hidden\",\r\n    },\r\n  ];\r\n};\r\n\r\nexport default columnsOptions;\r\n","export const yearMonthOptionsFactory = (startYearMonth) => {\r\n  return [\r\n    {\r\n      key: \"202009\",\r\n      id: \"202009\",\r\n      text: \"2020/09\",\r\n      name: \"2020/09\",\r\n      value: \"202009\",\r\n    },\r\n    {\r\n      key: \"202010\",\r\n      id: \"202010\",\r\n      text: \"2020/10\",\r\n      name: \"2020/10\",\r\n      value: \"202010\",\r\n    },\r\n    {\r\n      key: \"202011\",\r\n      id: \"202011\",\r\n      text: \"2020/11\",\r\n      name: \"2020/11\",\r\n      value: \"202011\",\r\n    },\r\n    {\r\n      key: \"202012\",\r\n      id: \"202012\",\r\n      text: \"2020/12\",\r\n      name: \"2020/12\",\r\n      value: \"202012\",\r\n    },\r\n    {\r\n      key: \"202101\",\r\n      id: \"202101\",\r\n      text: \"2021/01\",\r\n      name: \"2021/01\",\r\n      value: \"202101\",\r\n    },\r\n    {\r\n      key: \"202102\",\r\n      id: \"202102\",\r\n      text: \"2021/02\",\r\n      name: \"2021/02\",\r\n      value: \"202102\",\r\n    },\r\n    {\r\n      key: \"202103\",\r\n      id: \"202103\",\r\n      text: \"2021/03\",\r\n      name: \"2021/03\",\r\n      value: \"202103\",\r\n    },\r\n    {\r\n      key: \"202104\",\r\n      id: \"202104\",\r\n      text: \"2021/04\",\r\n      name: \"2021/04\",\r\n      value: \"202104\",\r\n    },\r\n    {\r\n      key: \"202105\",\r\n      id: \"202105\",\r\n      text: \"2021/05\",\r\n      name: \"2021/05\",\r\n      value: \"202105\",\r\n    },\r\n    {\r\n      key: \"202106\",\r\n      id: \"202106\",\r\n      text: \"2021/06\",\r\n      name: \"2021/06\",\r\n      value: \"202106\",\r\n    },\r\n    {\r\n      key: \"202107\",\r\n      id: \"202107\",\r\n      text: \"2021/07\",\r\n      name: \"2021/07\",\r\n      value: \"202107\",\r\n    },\r\n    {\r\n      key: \"202108\",\r\n      id: \"202108\",\r\n      text: \"2021/08\",\r\n      name: \"2021/08\",\r\n      value: \"202108\",\r\n    },\r\n  ];\r\n};\r\n","const ASYNC_ACTION_START = \"async/action_start\";\r\nconst ASYNC_ACTION_FINISH = \"async/action_finish\";\r\nconst ASYNC_ACTION_ERROR = \"async/action_error\";\r\nexport const APP_LOADED = \"app/loaded\";\r\n\r\nexport function asyncActionStart() {\r\n  return {\r\n    type: ASYNC_ACTION_START,\r\n  };\r\n}\r\n\r\nexport function asyncActionFinish() {\r\n  return {\r\n    type: ASYNC_ACTION_FINISH,\r\n  };\r\n}\r\n\r\nexport function asyncActionError(error) {\r\n  return {\r\n    type: ASYNC_ACTION_ERROR,\r\n    payload: error,\r\n  };\r\n}\r\n\r\nconst initialState = {\r\n  loading: false,\r\n  count: 0,\r\n  error: null,\r\n  initialized: false,\r\n};\r\n\r\nexport default function asyncReducer(state = initialState, { type, payload }) {\r\n  switch (type) {\r\n    case ASYNC_ACTION_START:\r\n      state.count++;\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n        error: null,\r\n      };\r\n    case ASYNC_ACTION_FINISH:\r\n      state.count--;\r\n      return {\r\n        ...state,\r\n        loading: state.count <= 0 ? false : true,\r\n      };\r\n    case ASYNC_ACTION_ERROR:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: payload,\r\n      };\r\n    case APP_LOADED:\r\n      return {\r\n        ...state,\r\n        initialized: true,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import firebase from \"../config/firebase\";\r\n\r\nconst db = firebase.firestore();\r\nconst COLLECTION_NAME = \"last_update\";\r\n\r\nexport function fetchLastUpdatesFromFirestore(yyyyMM) {\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .where(\"closing_year_month\", \"==\", yyyyMM);\r\n}\r\n\r\nexport function addOrUpdateLastUpdateToFirestore(\r\n  collection_name,\r\n  yyyyMM,\r\n  lastupdate\r\n) {\r\n  if (!lastupdate) {\r\n    return null;\r\n  }\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(yyyyMM + \"-\" + collection_name)\r\n    .set({\r\n      closing_year_month: yyyyMM,\r\n      lastupdate: lastupdate,\r\n    });\r\n}\r\n","import lo from \"lodash\";\r\nimport firebase from \"../config/firebase\";\r\nimport { addOrUpdateLastUpdateToFirestore } from \"./lastupdateService\";\r\n\r\nconst db = firebase.firestore();\r\nconst COLLECTION_NAME = \"assign\";\r\n\r\nexport function fetchAssignsFromFirestore(yyyyMM) {\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .where(\"closing_year_month\", \"==\", yyyyMM)\r\n    .orderBy(\"created_at\", \"asc\");\r\n}\r\n\r\nexport function addAssignToFirestore(assign) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    assign.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(assign.id)\r\n    .set({\r\n      ...assign,\r\n      created_at: now,\r\n      created_user: user.email,\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n\r\nexport function updateAssignToFirestore(assign) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    assign.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(assign.id)\r\n    .update({\r\n      ...lo.omit(assign, \"id\"),\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n\r\nexport function removeAssignToFirestore(assignId) {\r\n  db.collection(COLLECTION_NAME).doc(assignId).delete();\r\n}\r\n","import firebase from \"../config/firebase\";\r\n\r\nexport function dataFromSnapshot(snapshot) {\r\n  if (!snapshot.exists) {\r\n    return undefined;\r\n  }\r\n  const data = snapshot.data();\r\n  for (const prop in data) {\r\n    if (data.hasOwnProperty(prop)) {\r\n      if (data[prop] instanceof firebase.firestore.Timestamp) {\r\n        data[prop] = data[prop].toDate();\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    ...data,\r\n    id: snapshot.id,\r\n  };\r\n}\r\n","import {\r\n  asyncActionError,\r\n  asyncActionFinish,\r\n  asyncActionStart,\r\n} from \"../../app/async/asyncReducer\";\r\nimport { dataFromSnapshot } from \"../../app/firestore/firestoreService\";\r\nimport {\r\n  addOrUpdateLastUpdateToFirestore,\r\n  fetchLastUpdatesFromFirestore,\r\n} from \"../../app/firestore/lastupdateService\";\r\n\r\nconst LASTUPDATE_FETCH = \"lastupdate/fetch\";\r\nconst LASTUPDATE_UPDATE = \"lastupdate/update\";\r\n\r\nexport function fetchLastUpdates(yyyyMM) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      const snapshot = fetchLastUpdatesFromFirestore(yyyyMM).get();\r\n      const data = {\r\n        acc_department: null,\r\n        acc_subject: null,\r\n        assign: null,\r\n        client: null,\r\n        member: null,\r\n        member_affiliation: null,\r\n        member_assign_manager: null,\r\n        member_hub: null,\r\n        member_hub_cost_sales: null,\r\n        member_rank: null,\r\n        member_tag: null,\r\n        precision: null,\r\n        project: null,\r\n      };\r\n      (await snapshot).docs.forEach((doc) => {\r\n        const item = dataFromSnapshot(doc);\r\n        const collection_name = item.id.slice(7);\r\n        data[collection_name] = item.lastupdate;\r\n      });\r\n      dispatch({\r\n        type: LASTUPDATE_FETCH,\r\n        payload: data,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n      return data;\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function updateLastUpdates(collection_name, yyyyMM, lastupdate) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await addOrUpdateLastUpdateToFirestore(\r\n        collection_name,\r\n        yyyyMM,\r\n        lastupdate\r\n      );\r\n      dispatch({\r\n        type: LASTUPDATE_UPDATE,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * 現在読み込み済みのリストを再読み込みするかどうか判断する\r\n * @param {array} current 現在読み込み済みリスト\r\n * @param {*} lastupdate 最終更新日\r\n */\r\nexport function mustRefresh(current, lastupdate) {\r\n  if (Array.isArray(current) && current.length > 0 && lastupdate) {\r\n    let last = null;\r\n    current.forEach((item) => {\r\n      // リストの更新日が最終更新日よりも新しい場合は再読み込み\r\n      if (!last || item.updated_at.getTime() > last.getTime()) {\r\n        last = item.updated_at;\r\n      }\r\n    });\r\n    // リストの更新日と最終更新日が同じ場合は読み込みの必要なし\r\n    console.log(last.getTime(), lastupdate.getTime());\r\n    console.log(\r\n      last.getTime() === lastupdate.getTime() ? \"not refresh\" : \"refresh\"\r\n    );\r\n    return last.getTime() === lastupdate.getTime()\r\n      ? { result: false, lastupdate: null }\r\n      : { result: true, lastupdate: last };\r\n  }\r\n  // 再読み込みの条件を満たしていない場合は読み込み\r\n  console.log(\"refresh\");\r\n  return { result: true, lastupadte: null };\r\n}\r\n\r\nexport default function lastUpdateReducer(state = {}, { type, payload }) {\r\n  switch (type) {\r\n    case LASTUPDATE_FETCH:\r\n      return payload;\r\n    case LASTUPDATE_UPDATE:\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {\r\n  asyncActionError,\r\n  asyncActionFinish,\r\n  asyncActionStart,\r\n} from \"../../app/async/asyncReducer\";\r\nimport { fetchAssignsFromFirestore } from \"../../app/firestore/assignService\";\r\nimport { dataFromSnapshot } from \"../../app/firestore/firestoreService\";\r\nimport { mustRefresh } from \"../lastupdate/lastupdateReducer\";\r\nimport {\r\n  createShowYearMonthTag,\r\n  createShowWorkingRatioTag,\r\n  createAddTag,\r\n  createRemoveTag,\r\n} from \"./assignListBehavior\";\r\n\r\nconst ASSIGN_ADD_ROW = \"assign/addRow\";\r\nconst ASSIGN_REMOVE_ROW = \"assign/removeRow\";\r\nconst ASSIGN_EDIT_ROW = \"assign/editRow\";\r\nconst ASSIGN_FETCH = \"assign/fetch\";\r\n\r\nexport function addAssign(assign) {\r\n  return {\r\n    type: ASSIGN_ADD_ROW,\r\n    payload: assign,\r\n  };\r\n}\r\n\r\nexport function removeAssign(assignId) {\r\n  return {\r\n    type: ASSIGN_REMOVE_ROW,\r\n    payload: assignId,\r\n  };\r\n}\r\n\r\nexport function editAssign(assign) {\r\n  return {\r\n    type: ASSIGN_EDIT_ROW,\r\n    payload: assign,\r\n  };\r\n}\r\n\r\nexport function fetchAssigns(yyyyMM) {\r\n  return async function (dispatch, getState) {\r\n    try {\r\n      // 現在読み込まれているリストと最終更新日リストを比べて、最新のデータを読み込むかどうか判断する\r\n      const must = mustRefresh(\r\n        getState().assign.assigns,\r\n        getState().lastupdate.assign\r\n      );\r\n      if (!must.result) {\r\n        // 読み込む必要がない場合は現在のリストを利用する\r\n        return getState().assign.assigns;\r\n      }\r\n      dispatch(asyncActionStart());\r\n      const snapshot = fetchAssignsFromFirestore(yyyyMM).get();\r\n      const data = (await snapshot).docs.map((doc) => {\r\n        const ret = dataFromSnapshot(doc);\r\n        return {\r\n          add_row: createAddTag(),\r\n          remove_row: createRemoveTag(),\r\n          year_month_show: createShowYearMonthTag(ret.member, ret.year_month),\r\n          working_ratio_show: createShowWorkingRatioTag(ret.member),\r\n          ...ret,\r\n        };\r\n      });\r\n      dispatch({\r\n        type: ASSIGN_FETCH,\r\n        payload: data,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n      return data;\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * Assignを比較する\r\n * @param {*} src\r\n * @param {*} dst\r\n */\r\nfunction equalAssign(src, dst) {\r\n  // ユーザーが入力する項目に変化があるかどうかを検出する\r\n  if (\r\n    src.id === dst.id &&\r\n    src.member === dst.member &&\r\n    src.year_month === dst.year_month &&\r\n    src.budget_performance_class === dst.budget_performance_class &&\r\n    src.member_assign_manager === dst.member_assign_manager &&\r\n    src.project === dst.project &&\r\n    src.sales === dst.sales &&\r\n    src.cost === dst.cost &&\r\n    src.working_ratio === dst.working_ratio &&\r\n    src.precision === dst.precision &&\r\n    src.closing_year_month === dst.closing_year_month\r\n  ) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nconst initialState = {\r\n  assigns: [],\r\n  add: [],\r\n  update: [],\r\n  remove: [],\r\n};\r\n\r\nexport default function assignReducer(state = initialState, { type, payload }) {\r\n  switch (type) {\r\n    case ASSIGN_ADD_ROW:\r\n      // TODO 登録を行ったら、addから削除, assigns へデータ追加\r\n      state.add.push(payload);\r\n      return state;\r\n    case ASSIGN_REMOVE_ROW:\r\n      // TODO 登録を行ったら、remove, assignsのデータから削除\r\n      state.remove.push(payload);\r\n      return state;\r\n    case ASSIGN_EDIT_ROW:\r\n      // TODO 登録を行ったら、, editから削除、assignsのデータと入れ替え\r\n      const assign = state.assigns.filter((item) => item.id === payload.id);\r\n      if (assign.length > 0) {\r\n        if (!equalAssign(assign[0], payload)) {\r\n          state.update.push(payload);\r\n        }\r\n      }\r\n      return state;\r\n    case ASSIGN_FETCH:\r\n      return {\r\n        ...state,\r\n        assigns: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import cuid from \"cuid\";\r\nimport { addAssign, editAssign, removeAssign } from \"./assignReducer\";\r\n\r\n/** Err/War */\r\nexport const COL_ERRORS = 2;\r\n/** 名前 */\r\nexport const COL_MEMBER = 3;\r\n/** 社員/PT */\r\nexport const COL_MEMBER_TAG = 4;\r\n/** 所属 */\r\nexport const COL_MEMBER_AFFILIATION = 5;\r\n/** 月度 */\r\nexport const COL_YEAR_MONTH = 6;\r\n/** 月度(参照) */\r\nexport const COL_YEAR_MONTH_SHOW = 7;\r\n/** 予算/見込/実績 */\r\nexport const COL_BUDGET_PERFORMANCE_CLASS = 8;\r\n/** アサイン管理担当 */\r\nexport const COL_MEMBER_ASSIGN_MANAGER = 9;\r\n/** 案件 */\r\nexport const COL_PROJECT = 10;\r\n/** クライアント */\r\nexport const COL_CLIENT = 11;\r\n/** 計上部門 */\r\nexport const COL_ACC_DEPARTMENT = 12;\r\n/** 費用区分 */\r\nexport const COL_ACC_SUBJECT = 13;\r\n/** 売上 */\r\nexport const COL_SALES = 14;\r\n/** 標準原価/PT原価 */\r\nexport const COL_COST = 15;\r\n/** 稼働割合 */\r\nexport const COL_WORKING_RATIO = 16;\r\n/** 稼働割合(参照) */\r\nexport const COL_WORKING_RATIO_SHOW = 17;\r\n/** 社内原価 */\r\nexport const COL_INHOUSE_COST = 18;\r\n/** 利益額 */\r\nexport const COL_PROFIT = 19;\r\n/** 利益率 */\r\nexport const COL_PROFIT_RATIO = 20;\r\n/** ランク */\r\nexport const COL_MEMBER_RANK = 21;\r\n/** 標準売上 */\r\nexport const COL_MEMBER_SALES = 22;\r\n/** 標準売上差異 */\r\nexport const COL_MEMBER_SALES_DIFF = 23;\r\n/** 確度 */\r\nexport const COL_PRECISION = 24;\r\n/** ドキュメントID */\r\nexport const COL_ID = 25;\r\n/** 締め年月 */\r\nexport const COL_CLOSING_YEAR_MONTH = 26;\r\n\r\n/**\r\n * 列を追加する\r\n * @param {*} spreadSheetRef シートへの参照\r\n * @param {string} closing_year_month 締め年月\r\n */\r\nexport function addRowForSpreadSheet(\r\n  spreadSheetRef,\r\n  closing_year_month,\r\n  dispatch = null\r\n) {\r\n  if (!spreadSheetRef) {\r\n    return;\r\n  }\r\n  const currentRowIds = spreadSheetRef.getSelectedRows(true);\r\n  if (currentRowIds && currentRowIds.length > 0) {\r\n    // SpreadSheetの操作\r\n    const newRowData = duplicateRowData(\r\n      spreadSheetRef,\r\n      currentRowIds[0],\r\n      closing_year_month\r\n    );\r\n    spreadSheetRef.insertRow(newRowData, currentRowIds[0]);\r\n    // データベースの登録\r\n    const assign = {\r\n      id: newRowData[COL_ID],\r\n      closing_year_month: newRowData[COL_CLOSING_YEAR_MONTH],\r\n      member: newRowData[COL_MEMBER],\r\n      year_month: newRowData[COL_YEAR_MONTH],\r\n      budget_performance_class: newRowData[COL_BUDGET_PERFORMANCE_CLASS],\r\n      member_assign_manager: newRowData[COL_MEMBER_ASSIGN_MANAGER],\r\n      project: newRowData[COL_PROJECT],\r\n      sales: _stripCamma(newRowData[COL_SALES]),\r\n      cost: _stripCamma(newRowData[COL_COST]),\r\n      working_ratio: _stripToZero(newRowData[COL_WORKING_RATIO]),\r\n      precision: newRowData[COL_PRECISION],\r\n    };\r\n    if (dispatch) {\r\n      dispatch(addAssign(assign));\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 複製行を元にして新規データ行のデータを作成する\r\n * @param {*} spreadSheetRef シートへの参照\r\n * @param {number} srcRowId 複製元の行番号\r\n * @param {string} closing_year_month 締め年月\r\n */\r\nfunction duplicateRowData(spreadSheetRef, srcRowId, closing_year_month) {\r\n  const currentRowData = spreadSheetRef.getRowData(srcRowId);\r\n  currentRowData[COL_YEAR_MONTH_SHOW] = createShowYearMonthTag(\r\n    currentRowData[COL_MEMBER],\r\n    currentRowData[COL_YEAR_MONTH]\r\n  );\r\n  currentRowData[COL_ERRORS] = \"\";\r\n  currentRowData[COL_PROJECT] = \"\";\r\n  currentRowData[COL_CLIENT] = \"\";\r\n  currentRowData[COL_ACC_DEPARTMENT] = \"\";\r\n  currentRowData[COL_ACC_SUBJECT] = \"\";\r\n  currentRowData[COL_SALES] = \"0\";\r\n  currentRowData[COL_WORKING_RATIO] = \"0 %\";\r\n  currentRowData[COL_WORKING_RATIO_SHOW] = createShowWorkingRatioTag(\r\n    currentRowData[COL_MEMBER]\r\n  );\r\n  currentRowData[COL_PRECISION] = \"\";\r\n  currentRowData[COL_ID] = createId(closing_year_month);\r\n  currentRowData[COL_CLOSING_YEAR_MONTH] = closing_year_month;\r\n  return currentRowData;\r\n}\r\n\r\n/**\r\n * IDを作成する\r\n * @param {string}} closing_year_month 締め年月\r\n */\r\nfunction createId(closing_year_month) {\r\n  return closing_year_month + \"-\" + cuid();\r\n}\r\n\r\n/**\r\n * 追加ボタンタグを作成する\r\n */\r\nexport function createAddTag() {\r\n  return `<button class=\"ui positive mini button\" onclick='location.href=\"#add\"'>追加</button>`;\r\n}\r\n\r\n/**\r\n * 削除ボタンタグを作成する\r\n */\r\nexport function createRemoveTag() {\r\n  return `<button class=\"ui negative mini button\" onclick='location.href=\"#remove\"'>削除</button>`;\r\n}\r\n\r\n/**\r\n * 参照タグを作成する\r\n * @param {string} targetMemberId 対象メンバーID\r\n * @param {*} targetYearMonth 対象年月\r\n */\r\nexport function createShowYearMonthTag(targetMemberId, targetYearMonth) {\r\n  return `<a href='#' onmouseover='location.href=\"#show${COL_YEAR_MONTH_SHOW}=${targetMemberId}&ym=${targetYearMonth}\"' onmouseout='location.href=\"#\"'>参照</a>`;\r\n}\r\n\r\n/**\r\n * 参照タグを作成する\r\n * @param {string} targetMemberId 対象メンバーID\r\n */\r\nexport function createShowWorkingRatioTag(targetMemberId) {\r\n  return `<a href='#' onmouseover='location.href=\"#show${COL_WORKING_RATIO_SHOW}=${targetMemberId}\"' onmouseout='location.href=\"#\"'>参照</a>`;\r\n}\r\n\r\n/**\r\n * 列を削除する\r\n * @param {*} spreadSheetRef シートへの参照\r\n */\r\nexport function removeRowForSpreadSheet(spreadSheetRef, dispatch = null) {\r\n  if (!spreadSheetRef) {\r\n    return;\r\n  }\r\n  const currentRowIds = spreadSheetRef.getSelectedRows(true);\r\n  if (currentRowIds && currentRowIds.length > 0) {\r\n    // SpreadSheetの操作\r\n    spreadSheetRef.deleteRow(currentRowIds[0], 1);\r\n    // データベースの操作\r\n    const currentRowData = spreadSheetRef.getRowData(currentRowIds[0]);\r\n    if (dispatch) {\r\n      // TODO currentRowData[COL_ID] ここで参照エラーが起こる場合がある。ちょっとおかしいかも。\r\n      dispatch(removeAssign(currentRowData[COL_ID]));\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 列を編集する\r\n * @param {*} spreadSheetRef\r\n * @param {number} col 現在の Col 位置\r\n * @param {number} row 現在の Row 位置\r\n * @param {*} master マスタのリスト\r\n */\r\nexport function editRowForSpreadSheet(\r\n  spreadSheetRef,\r\n  col,\r\n  row,\r\n  master = {},\r\n  dispatch = null\r\n) {\r\n  // SpreadSheetの操作\r\n  inputForSpreadSheet(spreadSheetRef, col, row, master);\r\n  // データベースの操作\r\n  const currentRowData = spreadSheetRef.getRowData(row);\r\n  const assign = {\r\n    id: currentRowData[COL_ID],\r\n    closing_year_month: currentRowData[COL_CLOSING_YEAR_MONTH],\r\n    member: currentRowData[COL_MEMBER],\r\n    year_month: currentRowData[COL_YEAR_MONTH],\r\n    budget_performance_class: currentRowData[COL_BUDGET_PERFORMANCE_CLASS],\r\n    member_assign_manager: currentRowData[COL_MEMBER_ASSIGN_MANAGER],\r\n    project: currentRowData[COL_PROJECT],\r\n    sales: _stripCamma(currentRowData[COL_SALES]),\r\n    cost: _stripCamma(currentRowData[COL_COST]),\r\n    working_ratio: currentRowData[COL_WORKING_RATIO],\r\n    precision: currentRowData[COL_PRECISION],\r\n  };\r\n  if (dispatch) {\r\n    dispatch(editAssign(assign));\r\n  }\r\n}\r\n\r\n/**\r\n * スプレッドシートへの入力\r\n * @param {*} spreadSheetRef\r\n * @param {number} col 現在の Col 位置\r\n * @param {number} row 現在の Row 位置\r\n * @param {*} masters\r\n */\r\nfunction inputForSpreadSheet(spreadSheetRef, col, row, masters = {}) {\r\n  if (col === COL_MEMBER) {\r\n    inputForColMember(spreadSheetRef, row, masters);\r\n  } else if (col === COL_MEMBER_TAG) {\r\n    inputForColMemberTag(spreadSheetRef, row, masters);\r\n  } else if (col === COL_PROJECT) {\r\n    inputForColProject(spreadSheetRef, row, masters);\r\n  } else if (col === COL_ACC_SUBJECT) {\r\n    inputForColAccSubject(spreadSheetRef, row, masters);\r\n  } else if (col === COL_SALES) {\r\n    inputForColSales(spreadSheetRef, row);\r\n  } else if (col === COL_COST) {\r\n    inputForColCost(spreadSheetRef, row);\r\n  } else if (col === COL_WORKING_RATIO) {\r\n    inputForColWorkingRatio(spreadSheetRef, row);\r\n  } else if (col === COL_PRECISION) {\r\n    inputForColPrecision(spreadSheetRef, row, masters);\r\n  }\r\n}\r\n\r\n/**\r\n * 名前への入力\r\n * @param {*} spreadSheetRef\r\n * @param {number} row 現在の Row 位置\r\n * @param {*} masters\r\n */\r\nfunction inputForColMember(spreadSheetRef, row, masters = {}) {\r\n  const memberId = spreadSheetRef.getValueFromCoords(COL_MEMBER, row);\r\n  const member = masters.members.filter((item) => {\r\n    return item.id === memberId;\r\n  })[0];\r\n\r\n  if (member) {\r\n    // 社員/PT\r\n    spreadSheetRef.setValueFromCoords(COL_MEMBER_TAG, row, member.tag, true);\r\n    // 所属\r\n    spreadSheetRef.setValueFromCoords(\r\n      COL_MEMBER_AFFILIATION,\r\n      row,\r\n      member.affiliation,\r\n      true\r\n    );\r\n    // アサイン管理担当者\r\n    spreadSheetRef.setValueFromCoords(\r\n      COL_MEMBER_ASSIGN_MANAGER,\r\n      row,\r\n      member.assign_manager,\r\n      true\r\n    );\r\n    // 標準原価/PT原価\r\n    spreadSheetRef.setValueFromCoords(COL_COST, row, member.cost, true);\r\n    // ランク\r\n    spreadSheetRef.setValueFromCoords(COL_MEMBER_RANK, row, member.rank, true);\r\n    // 標準売上\r\n    spreadSheetRef.setValueFromCoords(\r\n      COL_MEMBER_SALES,\r\n      row,\r\n      member.sales,\r\n      true\r\n    );\r\n    // 標準原価/PT原価への入力\r\n    inputForColCost(spreadSheetRef, row);\r\n    // 標準売上への入力\r\n    inputForColMemberSales(spreadSheetRef, row);\r\n  } else {\r\n    // 社員/PT\r\n    spreadSheetRef.setValueFromCoords(COL_MEMBER_TAG, row, \"\", true);\r\n    // 所属\r\n    spreadSheetRef.setValueFromCoords(COL_MEMBER_AFFILIATION, row, \"\", true);\r\n    // アサイン管理担当者\r\n    spreadSheetRef.setValueFromCoords(COL_MEMBER_ASSIGN_MANAGER, row, \"\", true);\r\n    // 標準原価/PT原価\r\n    spreadSheetRef.setValueFromCoords(COL_COST, row, \"0\", true);\r\n    // ランク\r\n    spreadSheetRef.setValueFromCoords(COL_MEMBER_RANK, row, \"\", true);\r\n    // 標準売上\r\n    spreadSheetRef.setValueFromCoords(COL_MEMBER_SALES, row, \"0\", true);\r\n    // 標準原価/PT原価への入力\r\n    inputForColCost(spreadSheetRef, row);\r\n    // 標準売上への入力\r\n    inputForColMemberSales(spreadSheetRef, row);\r\n  }\r\n}\r\n\r\n/**\r\n * メンバータグへの入力\r\n * @param {*} spreadSheetRef\r\n * @param {number} row 現在の Row 位置\r\n * @param {*} masters\r\n */\r\nfunction inputForColMemberTag(spreadSheetRef, row, masters = {}) {\r\n  const memberTagId = spreadSheetRef.getValueFromCoords(COL_MEMBER_TAG, row);\r\n  const memberTag = masters.memberTags.filter((item) => {\r\n    return item.id === memberTagId;\r\n  })[0];\r\n\r\n  if (memberTag && memberTag.use_cost_sales.toLowerCase() === \"true\") {\r\n    spreadSheetRef.getCellFromCoords(COL_COST, row).classList.add(\"readonly\");\r\n  } else {\r\n    // パートナーなど、標準売上原価テーブルを利用しないメンバーは、\r\n    // 原価を直接入力できるように入力可能に設定する\r\n    spreadSheetRef\r\n      .getCellFromCoords(COL_COST, row)\r\n      .classList.remove(\"readonly\");\r\n  }\r\n}\r\n\r\n/**\r\n * 案件への入力\r\n * @param {*} spreadSheetRef\r\n * @param {number} row 現在の Row 位置\r\n * @param {*} masters\r\n */\r\nfunction inputForColProject(spreadSheetRef, row, masters = {}) {\r\n  const projectId = spreadSheetRef.getValueFromCoords(COL_PROJECT, row);\r\n  const project = masters.projects.filter((item) => {\r\n    return item.id === projectId;\r\n  })[0];\r\n\r\n  if (project) {\r\n    // クライアント\r\n    spreadSheetRef.setValueFromCoords(COL_CLIENT, row, project.client, true);\r\n    // 計上部門\r\n    spreadSheetRef.setValueFromCoords(\r\n      COL_ACC_DEPARTMENT,\r\n      row,\r\n      project.accDepartment,\r\n      true\r\n    );\r\n    // 費用区分\r\n    spreadSheetRef.setValueFromCoords(\r\n      COL_ACC_SUBJECT,\r\n      row,\r\n      project.accSubject,\r\n      true\r\n    );\r\n  } else {\r\n    // クライアント\r\n    spreadSheetRef.setValueFromCoords(COL_CLIENT, row, \"\", true);\r\n    // 計上部門\r\n    spreadSheetRef.setValueFromCoords(COL_ACC_DEPARTMENT, row, \"\", true);\r\n    // 費用区分\r\n    spreadSheetRef.setValueFromCoords(COL_ACC_SUBJECT, row, \"\", true);\r\n  }\r\n}\r\n\r\n/**\r\n * 費用区分への入力\r\n * @param {*} spreadSheetRef\r\n * @param {number} row 現在の Row 位置\r\n * @param {*} masters\r\n */\r\nfunction inputForColAccSubject(spreadSheetRef, row, masters = {}) {\r\n  const accSubjectId = spreadSheetRef.getValueFromCoords(COL_ACC_SUBJECT, row);\r\n  const accSubject = masters.accSubjects.filter((item) => {\r\n    return item.id === accSubjectId;\r\n  })[0];\r\n\r\n  const precisionId = spreadSheetRef.getValueFromCoords(COL_PRECISION, row);\r\n  const precision = masters.precisions.filter((item) => {\r\n    return item.id === precisionId;\r\n  })[0];\r\n\r\n  if (!accSubject) {\r\n    // Nothing.\r\n  } else if (accSubject.can_input_sales.toLowerCase() === \"true\") {\r\n    spreadSheetRef\r\n      .getCellFromCoords(COL_SALES, row)\r\n      .classList.remove(\"readonly\");\r\n  } else {\r\n    // 販売管理費など売り上げを入力すべきでない費用区分の場合は、\r\n    // 売上をゼロ、入力不可に設定する\r\n    spreadSheetRef.getCellFromCoords(COL_SALES, row).classList.add(\"readonly\");\r\n    spreadSheetRef.setValueFromCoords(COL_SALES, row, \"0\", true);\r\n  }\r\n  // 費用区分と確度の売上入力可否に矛盾のあるレコードを選んだときは、確度をクリアする\r\n  if (!precision || !accSubject) {\r\n    // Nothing\r\n  } else if (\r\n    precision.can_input_sales.toLowerCase() !==\r\n    accSubject.can_input_sales.toLowerCase()\r\n  ) {\r\n    spreadSheetRef.setValueFromCoords(COL_PRECISION, row, \"\", true);\r\n  }\r\n}\r\n\r\n/**\r\n * 確度への入力\r\n * @param {*} spreadSheetRef\r\n * @param {number} row 現在の Row 位置\r\n * @param {*} masters\r\n */\r\nfunction inputForColPrecision(spreadSheetRef, row, masters = {}) {\r\n  const accSubjectId = spreadSheetRef.getValueFromCoords(COL_ACC_SUBJECT, row);\r\n  const accSubject = masters.accSubjects.filter((item) => {\r\n    return item.id === accSubjectId;\r\n  })[0];\r\n\r\n  const precisionId = spreadSheetRef.getValueFromCoords(COL_PRECISION, row);\r\n  const precision = masters.precisions.filter((item) => {\r\n    return item.id === precisionId;\r\n  })[0];\r\n\r\n  if (!precision) {\r\n    // Nothing.\r\n  } else if (precision.can_input_sales.toLowerCase() === \"true\") {\r\n    spreadSheetRef\r\n      .getCellFromCoords(COL_SALES, row)\r\n      .classList.remove(\"readonly\");\r\n  } else {\r\n    // 非稼働確定など売り上げを入力すべきでない費用区分の場合は、\r\n    // 売上をゼロ、入力不可に設定する\r\n    spreadSheetRef.getCellFromCoords(COL_SALES, row).classList.add(\"readonly\");\r\n    spreadSheetRef.setValueFromCoords(COL_SALES, row, \"0\", true);\r\n  }\r\n  // 費用区分と確度の売上入力可否に矛盾のあるレコードを選んだときは、案件をクリアする\r\n  if (!precision || !accSubject) {\r\n    // Nothing\r\n  } else if (\r\n    accSubject.can_input_sales.toLowerCase() !==\r\n    precision.can_input_sales.toLowerCase()\r\n  ) {\r\n    spreadSheetRef.setValueFromCoords(COL_PROJECT, row, \"\", true);\r\n  }\r\n}\r\n\r\n/**\r\n * 売上への入力\r\n * @param {*} spreadSheetRef\r\n * @param {number} row 現在の Row 位置\r\n */\r\nfunction inputForColSales(spreadSheetRef, row) {\r\n  // パラメータ取得/計算\r\n  const cost = _stripToZero(spreadSheetRef.getValueFromCoords(COL_COST, row));\r\n  const workingRatio = _stripToZero(\r\n    spreadSheetRef.getValueFromCoords(COL_WORKING_RATIO, row)\r\n  );\r\n  const salesRaw = spreadSheetRef.getValueFromCoords(COL_SALES, row);\r\n  const sales = _stripToZero(salesRaw);\r\n  const inHouseCost = calcInHouseCost(cost, workingRatio);\r\n  const profit = calcProfit(inHouseCost, sales);\r\n  const profitRatio = calcProfitRatio(profit, sales);\r\n  const memberSales = _stripToZero(\r\n    spreadSheetRef.getValueFromCoords(COL_MEMBER_SALES, row)\r\n  );\r\n  const memberSalesDiff = calcMemberSalesDiff(sales, memberSales, workingRatio);\r\n\r\n  // 利益額\r\n  spreadSheetRef.setValueFromCoords(COL_PROFIT, row, profit, true);\r\n  // 利益率\r\n  spreadSheetRef.setValueFromCoords(\r\n    COL_PROFIT_RATIO,\r\n    row,\r\n    profitRatio + \" %\",\r\n    true\r\n  );\r\n  // 標準売上差異\r\n  spreadSheetRef.setValueFromCoords(\r\n    COL_MEMBER_SALES_DIFF,\r\n    row,\r\n    memberSalesDiff,\r\n    true\r\n  );\r\n  // 売上の編集\r\n  if (!salesRaw) {\r\n    // Delete キーでクリアした場合\r\n    spreadSheetRef.getCellFromCoords(COL_SALES, row).innerHTML = sales;\r\n  }\r\n}\r\n\r\n/**\r\n * 標準原価/PT原価への入力\r\n * @param {*} spreadSheetRef\r\n * @param {number} row 現在の Row 位置\r\n */\r\nfunction inputForColCost(spreadSheetRef, row) {\r\n  // パラメータ取得/計算\r\n  const cost = _stripToZero(spreadSheetRef.getValueFromCoords(COL_COST, row));\r\n  const workingRatio = _stripToZero(\r\n    spreadSheetRef.getValueFromCoords(COL_WORKING_RATIO, row)\r\n  );\r\n  const sales = _stripToZero(spreadSheetRef.getValueFromCoords(COL_SALES, row));\r\n  const inHouseCost = calcInHouseCost(cost, workingRatio);\r\n  const profit = calcProfit(inHouseCost, sales);\r\n  const profitRatio = calcProfitRatio(profit, sales);\r\n\r\n  // 社内原価\r\n  spreadSheetRef.setValueFromCoords(COL_INHOUSE_COST, row, inHouseCost, true);\r\n  // 利益額\r\n  spreadSheetRef.setValueFromCoords(COL_PROFIT, row, profit, true);\r\n  // 利益率\r\n  spreadSheetRef.setValueFromCoords(\r\n    COL_PROFIT_RATIO,\r\n    row,\r\n    profitRatio + \" %\",\r\n    true\r\n  );\r\n}\r\n\r\n/**\r\n * 稼働割合への入力\r\n * @param {*} spreadSheetRef\r\n * @param {number} row 現在の Row 位置\r\n */\r\nfunction inputForColWorkingRatio(spreadSheetRef, row) {\r\n  // パラメータ取得/計算\r\n  const cost = _stripToZero(spreadSheetRef.getValueFromCoords(COL_COST, row));\r\n  const workingRatio = _stripToZero(\r\n    spreadSheetRef.getValueFromCoords(COL_WORKING_RATIO, row)\r\n  );\r\n  const sales = _stripToZero(spreadSheetRef.getValueFromCoords(COL_SALES, row));\r\n  const inHouseCost = calcInHouseCost(cost, workingRatio);\r\n  const profit = calcProfit(inHouseCost, sales);\r\n  const profitRatio = calcProfitRatio(profit, sales);\r\n  const memberSales = _stripToZero(\r\n    spreadSheetRef.getValueFromCoords(COL_MEMBER_SALES, row)\r\n  );\r\n  const memberSalesDiff = calcMemberSalesDiff(sales, memberSales, workingRatio);\r\n\r\n  // 社内原価\r\n  spreadSheetRef.setValueFromCoords(COL_INHOUSE_COST, row, inHouseCost, true);\r\n  // 利益額\r\n  spreadSheetRef.setValueFromCoords(COL_PROFIT, row, profit, true);\r\n  // 利益率\r\n  spreadSheetRef.setValueFromCoords(\r\n    COL_PROFIT_RATIO,\r\n    row,\r\n    profitRatio + \" %\",\r\n    true\r\n  );\r\n  // 標準売上差異\r\n  spreadSheetRef.setValueFromCoords(\r\n    COL_MEMBER_SALES_DIFF,\r\n    row,\r\n    memberSalesDiff,\r\n    true\r\n  );\r\n  // 稼働割合の編集\r\n  spreadSheetRef.getCellFromCoords(COL_WORKING_RATIO, row).innerHTML =\r\n    workingRatio + \" %\";\r\n}\r\n\r\n/**\r\n * 標準売上への入力\r\n * @param {*} spreadSheetRef\r\n * @param {number} row 現在の Row 位置\r\n */\r\nfunction inputForColMemberSales(spreadSheetRef, row) {\r\n  // パラメータ取得/計算\r\n  const sales = _stripToZero(spreadSheetRef.getValueFromCoords(COL_SALES, row));\r\n  const workingRatio = _stripToZero(\r\n    spreadSheetRef.getValueFromCoords(COL_WORKING_RATIO, row)\r\n  );\r\n  const memberSales = _stripToZero(\r\n    spreadSheetRef.getValueFromCoords(COL_MEMBER_SALES, row)\r\n  );\r\n  const memberSalesDiff = calcMemberSalesDiff(sales, memberSales, workingRatio);\r\n\r\n  // 標準売上差異\r\n  spreadSheetRef.setValueFromCoords(\r\n    COL_MEMBER_SALES_DIFF,\r\n    row,\r\n    memberSalesDiff,\r\n    true\r\n  );\r\n}\r\n\r\n/**\r\n * 社内原価を計算する\r\n * 標準原価/PT原価 × 稼働割合\r\n * @param {number} cost 標準原価/PT原価\r\n * @param {number} workingRatio 稼働割合\r\n */\r\nfunction calcInHouseCost(cost, workingRatio) {\r\n  if (workingRatio === 0) {\r\n    return 0;\r\n  }\r\n  return Math.round(cost * (workingRatio / 100));\r\n}\r\n\r\n/**\r\n * 利益額を計算する\r\n * 売上 － 社内原価\r\n * @param {number} inHouseCost 社内原価\r\n * @param {number} sales 売上\r\n */\r\nfunction calcProfit(inHouseCost, sales) {\r\n  return sales - inHouseCost;\r\n}\r\n\r\n/**\r\n * 利益率を計算する\r\n * 利益額 ÷ 売上\r\n * @param {number} profit 利益額\r\n * @param {number} sales 売上\r\n */\r\nfunction calcProfitRatio(profit, sales) {\r\n  if (sales === 0) {\r\n    return 0;\r\n  }\r\n  return Math.round((profit / sales) * 100 * 10) / 10;\r\n}\r\n\r\n/**\r\n * 標準売上差異を計算する\r\n * 売上 － 標準売上 × 稼働割合\r\n * @param {number} sales 売上\r\n * @param {number} memberSales 標準売上\r\n * @param {number} workingRatio 利益率\r\n */\r\nfunction calcMemberSalesDiff(sales, memberSales, workingRatio) {\r\n  // 標準売上がゼロの場合は標準売上利用なしとみなす\r\n  if (memberSales === 0) {\r\n    return 0;\r\n  }\r\n  if (workingRatio === 0) {\r\n    return sales;\r\n  }\r\n  return Math.round(sales - memberSales * (workingRatio / 100));\r\n}\r\n\r\n/**\r\n * 数値（とピリオド）以外の文字を削除する\r\n * 長さゼロの文字列の場合はゼロを返却する\r\n * @param {*} src\r\n */\r\nfunction _stripToZero(src) {\r\n  src = \"\" + src;\r\n  src = src.replace(/[^0-9.-]/g, \"\");\r\n  if (src.length === 0) {\r\n    src = 0;\r\n  }\r\n  return parseFloat(src);\r\n}\r\n\r\n/**\r\n * カンマを除去する\r\n * @param {*} src\r\n */\r\nfunction _stripCamma(src) {\r\n  src = \"\" + src;\r\n  return src.replace(/[,]/g, \"\");\r\n}\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport YearMonthTooptip from \"./tooltip/YearMonthTooptip\";\r\nimport WorkinRatioTooltip from \"./tooltip/WorkinRatioTooltip\";\r\nimport SpreadSheet from \"../../app/common/form/SpreadSheet\";\r\nimport columnsOptions from \"./columnsOptions\";\r\nimport {\r\n  COL_MEMBER,\r\n  COL_PROJECT,\r\n  COL_WORKING_RATIO,\r\n  COL_WORKING_RATIO_SHOW,\r\n  COL_YEAR_MONTH_SHOW,\r\n  addRowForSpreadSheet,\r\n  editRowForSpreadSheet,\r\n  removeRowForSpreadSheet,\r\n} from \"./assignListBehavior\";\r\n\r\nexport default function AssignPage({ location }) {\r\n  const command = location.hash?.replace(\"#\", \"\");\r\n  const history = useHistory();\r\n  const [tooltipVisible1, setTooltipVisible1] = useState(false);\r\n  const [tooltipVisible2, setTooltipVisible2] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const { members } = useSelector((state) => state.member);\r\n  const { memberTags } = useSelector((state) => state.memberTag);\r\n  const { memberAffiliations } = useSelector(\r\n    (state) => state.memberAffiliation\r\n  );\r\n  const { memberAssignManagers } = useSelector(\r\n    (state) => state.memberAssignManager\r\n  );\r\n  const { memberRanks } = useSelector((state) => state.memberRank);\r\n  const { projects } = useSelector((state) => state.project);\r\n  const { clients } = useSelector((state) => state.client);\r\n  const { accDepartments } = useSelector((state) => state.accDepartment);\r\n  const { accSubjects } = useSelector((state) => state.accSubject);\r\n  const { precisions } = useSelector((state) => state.precision);\r\n  const { assigns } = useSelector((state) => state.assign);\r\n  const [spreadSheet, setSpreadSheet] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (command?.startsWith(\"add\")) {\r\n      // 追加ボタンを押したとき\r\n      addRowForSpreadSheet(spreadSheet, currentPeriod.yearMonth, dispatch);\r\n      history.push(\"/assign\");\r\n    } else if (command?.startsWith(\"remove\")) {\r\n      // 削除ボタンを押したとき\r\n      if (window.confirm(\"行を削除してもいいですか？\") === true) {\r\n        removeRowForSpreadSheet(spreadSheet, dispatch);\r\n      }\r\n      history.push(\"/assign\");\r\n    } else if (command?.startsWith(\"show\" + COL_YEAR_MONTH_SHOW)) {\r\n      // 指定月稼働割合のツールチップ表示\r\n      setTooltipVisible1(true);\r\n    } else if (command?.startsWith(\"show\" + COL_WORKING_RATIO_SHOW)) {\r\n      // 稼働割合のツールチップ表示\r\n      setTooltipVisible2(true);\r\n    } else if (command.length === 0) {\r\n      // 指定月稼働割合のツールチップ表示\r\n      // 稼働割合のツールチップ非表示\r\n      setTooltipVisible1(false);\r\n      setTooltipVisible2(false);\r\n    }\r\n  }, [command, currentPeriod, dispatch, history, spreadSheet]);\r\n\r\n  const handleChange = (instance, cell, x, y, value) => {\r\n    // console.log(instance);\r\n    // console.log(cell);\r\n    // console.log(instance.jexcel);\r\n    // console.log(\"col(x): \" + x);\r\n    // console.log(\"row(y)\" + y);\r\n    // console.log(\"value:\" + value);\r\n    editRowForSpreadSheet(\r\n      instance.jexcel,\r\n      parseInt(x),\r\n      parseInt(y),\r\n      {\r\n        members: members,\r\n        memberTags: memberTags,\r\n        projects: projects,\r\n        accSubjects: accSubjects,\r\n        precisions: precisions,\r\n      },\r\n      dispatch\r\n    );\r\n  };\r\n\r\n  const handleReady = (jexcelRef) => {\r\n    // データの設定完了後、入力イベントを発行して列を完全な状態にしておく\r\n    for (let index = 0; index < assigns.length; index++) {\r\n      editRowForSpreadSheet(jexcelRef, parseInt(COL_MEMBER), parseInt(index), {\r\n        members: members,\r\n        memberTags: memberTags,\r\n        projects: projects,\r\n        accSubjects: accSubjects,\r\n        precisions: precisions,\r\n      });\r\n      editRowForSpreadSheet(jexcelRef, parseInt(COL_PROJECT), parseInt(index), {\r\n        members: members,\r\n        memberTags: memberTags,\r\n        projects: projects,\r\n        accSubjects: accSubjects,\r\n        precisions: precisions,\r\n      });\r\n      editRowForSpreadSheet(\r\n        jexcelRef,\r\n        parseInt(COL_WORKING_RATIO),\r\n        parseInt(index),\r\n        {\r\n          members: members,\r\n          memberTags: memberTags,\r\n          projects: projects,\r\n          accSubjects: accSubjects,\r\n          precisions: precisions,\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  const options = useRef({\r\n    columns: columnsOptions(\r\n      members,\r\n      memberTags,\r\n      memberAffiliations,\r\n      memberAssignManagers,\r\n      projects,\r\n      clients,\r\n      accDepartments,\r\n      accSubjects,\r\n      memberRanks,\r\n      precisions\r\n    ),\r\n    onchange: handleChange,\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <SpreadSheet\r\n        options={options}\r\n        data={assigns}\r\n        setSpreadSheet={setSpreadSheet}\r\n        onReady={handleReady}\r\n      />\r\n      <YearMonthTooptip visible={tooltipVisible1} />\r\n      <WorkinRatioTooltip visible={tooltipVisible2} />\r\n    </>\r\n  );\r\n}\r\n","import cuid from \"cuid\";\r\nimport lo from \"lodash\";\r\nimport firebase from \"../config/firebase\";\r\nimport { addOrUpdateLastUpdateToFirestore } from \"./lastupdateService\";\r\n\r\nconst db = firebase.firestore();\r\nconst COLLECTION_NAME = \"acc_department\";\r\n\r\nexport function fetchAccDepartmentsFromFirestore(yyyyMM) {\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .where(\"closing_year_month\", \"==\", yyyyMM)\r\n    .orderBy(\"created_at\", \"asc\");\r\n}\r\n\r\nexport function loadFromAccDepartmentFromFirestore(accDepartmentId) {\r\n  return db.collection(COLLECTION_NAME).doc(accDepartmentId);\r\n}\r\n\r\nexport function addAccDepartmentToFirestore(accDepartment) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    accDepartment.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(accDepartment.closing_year_month + \"-\" + cuid())\r\n    .set({\r\n      ...accDepartment,\r\n      created_at: now,\r\n      created_user: user.email,\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n\r\nexport function updateAccDepartmentToFirestore(accDepartment) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    accDepartment.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(accDepartment.id)\r\n    .update({\r\n      ...lo.omit(accDepartment, \"id\"),\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n","import {\r\n  asyncActionError,\r\n  asyncActionFinish,\r\n  asyncActionStart,\r\n} from \"../../../app/async/asyncReducer\";\r\nimport { dataFromSnapshot } from \"../../../app/firestore/firestoreService\";\r\nimport {\r\n  addAccDepartmentToFirestore,\r\n  fetchAccDepartmentsFromFirestore,\r\n  updateAccDepartmentToFirestore,\r\n} from \"../../../app/firestore/accDepartmentService\";\r\nimport { mustRefresh } from \"../../lastupdate/lastupdateReducer\";\r\n\r\nconst ACC_DEPARTMENT_CREATE = \"accDepartment/create\";\r\nconst ACC_DEPARTMENT_UPDATE = \"accDepartment/update\";\r\nconst ACC_DEPARTMENTS_FETCH = \"accDepartment/fetch\";\r\nconst ACC_DEPARTMENT_LISTEN = \"accDepartment/listen\";\r\nconst ACC_DEPARTMENT_SELECTED = \"accDepartment/selected\";\r\n\r\nexport function selectAccDepartment(accDepartment) {\r\n  return {\r\n    type: ACC_DEPARTMENT_SELECTED,\r\n    payload: accDepartment,\r\n  };\r\n}\r\n\r\nexport function createAccDepartment(accDepartment) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await addAccDepartmentToFirestore(accDepartment);\r\n      dispatch({\r\n        type: ACC_DEPARTMENT_CREATE,\r\n        payload: accDepartment,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function updateAccDepartment(accDepartment) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await updateAccDepartmentToFirestore(accDepartment);\r\n      dispatch({\r\n        type: ACC_DEPARTMENT_UPDATE,\r\n        payload: accDepartment,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function fetchAccDepartments(yyyyMM) {\r\n  return async function (dispatch, getState) {\r\n    try {\r\n      // 現在読み込まれているリストと最終更新日リストを比べて、最新のデータを読み込むかどうか判断する\r\n      const must = mustRefresh(\r\n        getState().accDepartment.accDepartments,\r\n        getState().lastupdate.acc_department\r\n      );\r\n      if (!must.result) {\r\n        // 読み込む必要がない場合は現在のリストを利用する\r\n        return getState().accDepartment.accDepartments;\r\n      }\r\n      dispatch(asyncActionStart());\r\n      const snapshot = fetchAccDepartmentsFromFirestore(yyyyMM).get();\r\n      const data = (await snapshot).docs.map((doc) => {\r\n        const ret = dataFromSnapshot(doc);\r\n        const href = `<a href=\"#${ret.id}\">編集</a>`;\r\n        return { href, ...ret };\r\n      });\r\n      dispatch({\r\n        type: ACC_DEPARTMENTS_FETCH,\r\n        payload: data,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n      return data;\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nconst initialState = {\r\n  accDepartments: [],\r\n  selectedAccDepartment: null,\r\n};\r\n\r\nexport default function accDepartmentReducer(\r\n  state = initialState,\r\n  { type, payload }\r\n) {\r\n  switch (type) {\r\n    case ACC_DEPARTMENT_SELECTED:\r\n      return {\r\n        ...state,\r\n        selectedAccDepartment: payload,\r\n      };\r\n    case ACC_DEPARTMENT_CREATE:\r\n      return state;\r\n    case ACC_DEPARTMENT_UPDATE:\r\n      return state;\r\n    case ACC_DEPARTMENTS_FETCH:\r\n      return {\r\n        ...state,\r\n        accDepartments: payload,\r\n      };\r\n    case ACC_DEPARTMENT_LISTEN:\r\n      return {\r\n        ...state,\r\n        selectedAccDepartment: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import cuid from \"cuid\";\r\nimport lo from \"lodash\";\r\nimport firebase from \"../config/firebase\";\r\nimport { addOrUpdateLastUpdateToFirestore } from \"./lastupdateService\";\r\n\r\nconst db = firebase.firestore();\r\nconst COLLECTION_NAME = \"acc_subject\";\r\n\r\nexport function fetchAccSubjectsFromFirestore(yyyyMM) {\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .where(\"closing_year_month\", \"==\", yyyyMM)\r\n    .orderBy(\"created_at\", \"asc\");\r\n}\r\n\r\nexport function loadFromAccSubjectFromFirestore(accSubjectId) {\r\n  return db.collection(COLLECTION_NAME).doc(accSubjectId);\r\n}\r\n\r\nexport function addAccSubjectToFirestore(accSubject) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    accSubject.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(accSubject.closing_year_month + \"-\" + cuid())\r\n    .set({\r\n      ...accSubject,\r\n      created_at: now,\r\n      created_user: user.email,\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n\r\nexport function updateAccSubjectToFirestore(accSubject) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    accSubject.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(accSubject.id)\r\n    .update({\r\n      ...lo.omit(accSubject, \"id\"),\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n","import {\r\n  asyncActionError,\r\n  asyncActionFinish,\r\n  asyncActionStart,\r\n} from \"../../../app/async/asyncReducer\";\r\nimport { dataFromSnapshot } from \"../../../app/firestore/firestoreService\";\r\nimport {\r\n  addAccSubjectToFirestore,\r\n  fetchAccSubjectsFromFirestore,\r\n  updateAccSubjectToFirestore,\r\n} from \"../../../app/firestore/accSubjectService\";\r\nimport { mustRefresh } from \"../../lastupdate/lastupdateReducer\";\r\n\r\nconst ACC_SUBJECT_CREATE = \"accSubject/create\";\r\nconst ACC_SUBJECT_UPDATE = \"accSubject/update\";\r\nconst ACC_SUBJECTS_FETCH = \"accSubject/fetch\";\r\nconst ACC_SUBJECT_LISTEN = \"accSubject/listen\";\r\nconst ACC_SUBJECT_SELECTED = \"accSubject/selected\";\r\n\r\nexport function selectAccSubject(accSubject) {\r\n  return {\r\n    type: ACC_SUBJECT_SELECTED,\r\n    payload: accSubject,\r\n  };\r\n}\r\n\r\nexport function createAccSubject(accSubject) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await addAccSubjectToFirestore(accSubject);\r\n      dispatch({\r\n        type: ACC_SUBJECT_CREATE,\r\n        payload: accSubject,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function updateAccSubject(accSubject) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await updateAccSubjectToFirestore(accSubject);\r\n      dispatch({\r\n        type: ACC_SUBJECT_UPDATE,\r\n        payload: accSubject,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function fetchAccSubjects(yyyyMM) {\r\n  return async function (dispatch, getState) {\r\n    try {\r\n      // 現在読み込まれているリストと最終更新日リストを比べて、最新のデータを読み込むかどうか判断する\r\n      const must = mustRefresh(\r\n        getState().accSubject.accSubjects,\r\n        getState().lastupdate.acc_subject\r\n      );\r\n      if (!must.result) {\r\n        // 読み込む必要がない場合は現在のリストを利用する\r\n        return getState().accSubject.accSubjects;\r\n      }\r\n      dispatch(asyncActionStart());\r\n      const snapshot = fetchAccSubjectsFromFirestore(yyyyMM).get();\r\n      const data = (await snapshot).docs.map((doc) => {\r\n        const ret = dataFromSnapshot(doc);\r\n        const href = `<a href=\"#${ret.id}\">編集</a>`;\r\n        return { href, ...ret };\r\n      });\r\n      dispatch({\r\n        type: ACC_SUBJECTS_FETCH,\r\n        payload: data,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n      return data;\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nconst initialState = {\r\n  accSubjects: [],\r\n  selectedAccSubject: null,\r\n};\r\n\r\nexport default function accSubjectReducer(\r\n  state = initialState,\r\n  { type, payload }\r\n) {\r\n  switch (type) {\r\n    case ACC_SUBJECT_SELECTED:\r\n      return {\r\n        ...state,\r\n        selectedAccSubject: payload,\r\n      };\r\n    case ACC_SUBJECT_CREATE:\r\n      return state;\r\n    case ACC_SUBJECT_UPDATE:\r\n      return state;\r\n    case ACC_SUBJECTS_FETCH:\r\n      return {\r\n        ...state,\r\n        accSubjects: payload,\r\n      };\r\n    case ACC_SUBJECT_LISTEN:\r\n      return {\r\n        ...state,\r\n        selectedAccSubject: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import cuid from \"cuid\";\r\nimport lo from \"lodash\";\r\nimport firebase from \"../config/firebase\";\r\nimport { addOrUpdateLastUpdateToFirestore } from \"./lastupdateService\";\r\n\r\nconst db = firebase.firestore();\r\nconst COLLECTION_NAME = \"client\";\r\n\r\nexport function fetchClientsFromFirestore(yyyyMM) {\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .where(\"closing_year_month\", \"==\", yyyyMM)\r\n    .orderBy(\"created_at\", \"asc\");\r\n}\r\n\r\nexport function loadFromClientFromFirestore(clientId) {\r\n  return db.collection(COLLECTION_NAME).doc(clientId);\r\n}\r\n\r\nexport function addClientToFirestore(client) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    client.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(client.closing_year_month + \"-\" + cuid())\r\n    .set({\r\n      ...client,\r\n      created_at: now,\r\n      created_user: user.email,\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n\r\nexport function updateClientToFirestore(client) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    client.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(client.id)\r\n    .update({\r\n      ...lo.omit(client, \"id\"),\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n","import {\r\n  asyncActionError,\r\n  asyncActionFinish,\r\n  asyncActionStart,\r\n} from \"../../../app/async/asyncReducer\";\r\nimport { dataFromSnapshot } from \"../../../app/firestore/firestoreService\";\r\nimport {\r\n  addClientToFirestore,\r\n  fetchClientsFromFirestore,\r\n  updateClientToFirestore,\r\n} from \"../../../app/firestore/clientService\";\r\nimport { mustRefresh } from \"../../lastupdate/lastupdateReducer\";\r\n\r\nconst CLIENT_CREATE = \"client/create\";\r\nconst CLIENT_UPDATE = \"client/update\";\r\nconst CLIENTS_FETCH = \"client/fetch\";\r\nconst CLIENT_LISTEN = \"client/listen\";\r\nconst CLIENT_SELECTED = \"client/selected\";\r\n\r\nexport function selectClient(client) {\r\n  return {\r\n    type: CLIENT_SELECTED,\r\n    payload: client,\r\n  };\r\n}\r\n\r\nexport function createClient(client) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await addClientToFirestore(client);\r\n      dispatch({\r\n        type: CLIENT_CREATE,\r\n        payload: client,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function updateClient(client) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await updateClientToFirestore(client);\r\n      dispatch({\r\n        type: CLIENT_UPDATE,\r\n        payload: client,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function fetchClients(yyyyMM) {\r\n  return async function (dispatch, getState) {\r\n    try {\r\n      // 現在読み込まれているリストと最終更新日リストを比べて、最新のデータを読み込むかどうか判断する\r\n      const must = mustRefresh(\r\n        getState().client.clients,\r\n        getState().lastupdate.client\r\n      );\r\n      if (!must.result) {\r\n        // 読み込む必要がない場合は現在のリストを利用する\r\n        return getState().client.clients;\r\n      }\r\n      dispatch(asyncActionStart());\r\n      const snapshot = fetchClientsFromFirestore(yyyyMM).get();\r\n      const data = (await snapshot).docs.map((doc) => {\r\n        const ret = dataFromSnapshot(doc);\r\n        const href = `<a href=\"#${ret.id}\">編集</a>`;\r\n        return { href, ...ret };\r\n      });\r\n      dispatch({\r\n        type: CLIENTS_FETCH,\r\n        payload: data,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n      return data;\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nconst initialState = {\r\n  clients: [],\r\n  selectedClient: null,\r\n};\r\n\r\nexport default function clientReducer(state = initialState, { type, payload }) {\r\n  switch (type) {\r\n    case CLIENT_SELECTED:\r\n      return {\r\n        ...state,\r\n        selectedClient: payload,\r\n      };\r\n    case CLIENT_CREATE:\r\n      return state;\r\n    case CLIENT_UPDATE:\r\n      return state;\r\n    case CLIENTS_FETCH:\r\n      return {\r\n        ...state,\r\n        clients: payload,\r\n      };\r\n    case CLIENT_LISTEN:\r\n      return {\r\n        ...state,\r\n        selectedClient: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import cuid from \"cuid\";\r\nimport lo from \"lodash\";\r\nimport firebase from \"../config/firebase\";\r\nimport { addOrUpdateLastUpdateToFirestore } from \"./lastupdateService\";\r\n\r\nconst db = firebase.firestore();\r\nconst COLLECTION_NAME = \"member_affiliation\";\r\n\r\nexport function fetchMemberAffiliationsFromFirestore(yyyyMM) {\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .where(\"closing_year_month\", \"==\", yyyyMM)\r\n    .orderBy(\"created_at\", \"asc\");\r\n}\r\n\r\nexport function loadFromMemberAffiliationFromFirestore(memberAffiliationId) {\r\n  return db.collection(COLLECTION_NAME).doc(memberAffiliationId);\r\n}\r\n\r\nexport function addMemberAffiliationToFirestore(memberAffiliation) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    memberAffiliation.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(memberAffiliation.closing_year_month + \"-\" + cuid())\r\n    .set({\r\n      ...memberAffiliation,\r\n      created_at: now,\r\n      created_user: user.email,\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n\r\nexport function updateMemberAffiliationToFirestore(memberAffiliation) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    memberAffiliation.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(memberAffiliation.id)\r\n    .update({\r\n      ...lo.omit(memberAffiliation, \"id\"),\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n","import {\r\n  asyncActionError,\r\n  asyncActionFinish,\r\n  asyncActionStart,\r\n} from \"../../../app/async/asyncReducer\";\r\nimport { dataFromSnapshot } from \"../../../app/firestore/firestoreService\";\r\nimport {\r\n  addMemberAffiliationToFirestore,\r\n  fetchMemberAffiliationsFromFirestore,\r\n  updateMemberAffiliationToFirestore,\r\n} from \"../../../app/firestore/memberAffiliationService\";\r\nimport { mustRefresh } from \"../../lastupdate/lastupdateReducer\";\r\n\r\nconst MEMBERAFFILIATION_CREATE = \"memberAffiliation/create\";\r\nconst MEMBERAFFILIATION_UPDATE = \"memberAffiliation/update\";\r\nconst MEMBERAFFILIATIONS_FETCH = \"memberAffiliation/fetch\";\r\nconst MEMBERAFFILIATION_LISTEN = \"memberAffiliation/listen\";\r\nconst MEMBERAFFILIATION_SELECTED = \"memberAffiliation/selected\";\r\n\r\nexport function selectMemberAffiliation(memberAffiliation) {\r\n  return {\r\n    type: MEMBERAFFILIATION_SELECTED,\r\n    payload: memberAffiliation,\r\n  };\r\n}\r\n\r\nexport function createMemberAffiliation(memberAffiliation) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await addMemberAffiliationToFirestore(memberAffiliation);\r\n      dispatch({\r\n        type: MEMBERAFFILIATION_CREATE,\r\n        payload: memberAffiliation,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function updateMemberAffiliation(memberAffiliation) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await updateMemberAffiliationToFirestore(memberAffiliation);\r\n      dispatch({\r\n        type: MEMBERAFFILIATION_UPDATE,\r\n        payload: memberAffiliation,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function fetchMemberAffiliations(yyyyMM) {\r\n  return async function (dispatch, getState) {\r\n    try {\r\n      // 現在読み込まれているリストと最終更新日リストを比べて、最新のデータを読み込むかどうか判断する\r\n      const must = mustRefresh(\r\n        getState().memberAffiliation.memberAffiliations,\r\n        getState().lastupdate.member_affiliation\r\n      );\r\n      if (!must.result) {\r\n        // 読み込む必要がない場合は現在のリストを利用する\r\n        return getState().memberAffiliation.memberAffiliations;\r\n      }\r\n      dispatch(asyncActionStart());\r\n      const snapshot = fetchMemberAffiliationsFromFirestore(yyyyMM).get();\r\n      const data = (await snapshot).docs.map((doc) => {\r\n        const ret = dataFromSnapshot(doc);\r\n        const href = `<a href=\"#${ret.id}\">編集</a>`;\r\n        return { href, ...ret };\r\n      });\r\n      dispatch({\r\n        type: MEMBERAFFILIATIONS_FETCH,\r\n        payload: data,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n      return data;\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nconst initialState = {\r\n  memberAffiliations: [],\r\n  selectedMemberAffiliation: null,\r\n};\r\n\r\nexport default function memberAffiliationReducer(\r\n  state = initialState,\r\n  { type, payload }\r\n) {\r\n  switch (type) {\r\n    case MEMBERAFFILIATION_SELECTED:\r\n      return {\r\n        ...state,\r\n        selectedMemberAffiliation: payload,\r\n      };\r\n    case MEMBERAFFILIATION_CREATE:\r\n      return state;\r\n    case MEMBERAFFILIATION_UPDATE:\r\n      return state;\r\n    case MEMBERAFFILIATIONS_FETCH:\r\n      return {\r\n        ...state,\r\n        memberAffiliations: payload,\r\n      };\r\n    case MEMBERAFFILIATION_LISTEN:\r\n      return {\r\n        ...state,\r\n        selectedMemberAffiliation: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import cuid from \"cuid\";\r\nimport lo from \"lodash\";\r\nimport firebase from \"../config/firebase\";\r\nimport { addOrUpdateLastUpdateToFirestore } from \"./lastupdateService\";\r\n\r\nconst db = firebase.firestore();\r\nconst COLLECTION_NAME = \"member_assign_manager\";\r\n\r\nexport function fetchMemberAssignManagersFromFirestore(yyyyMM) {\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .where(\"closing_year_month\", \"==\", yyyyMM)\r\n    .orderBy(\"created_at\", \"asc\");\r\n}\r\n\r\nexport function loadFromMemberAssignManagerFromFirestore(\r\n  memberAssignManagerId\r\n) {\r\n  return db.collection(COLLECTION_NAME).doc(memberAssignManagerId);\r\n}\r\n\r\nexport function addMemberAssignManagerToFirestore(memberAssignManager) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    memberAssignManager.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(memberAssignManager.closing_year_month + \"-\" + cuid())\r\n    .set({\r\n      ...memberAssignManager,\r\n      created_at: now,\r\n      created_user: user.email,\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n\r\nexport function updateMemberAssignManagerToFirestore(memberAssignManager) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    memberAssignManager.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(memberAssignManager.id)\r\n    .update({\r\n      ...lo.omit(memberAssignManager, \"id\"),\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n","import {\r\n  asyncActionError,\r\n  asyncActionFinish,\r\n  asyncActionStart,\r\n} from \"../../../app/async/asyncReducer\";\r\nimport { dataFromSnapshot } from \"../../../app/firestore/firestoreService\";\r\nimport {\r\n  addMemberAssignManagerToFirestore,\r\n  fetchMemberAssignManagersFromFirestore,\r\n  updateMemberAssignManagerToFirestore,\r\n} from \"../../../app/firestore/memberAssignManagerService\";\r\nimport { mustRefresh } from \"../../lastupdate/lastupdateReducer\";\r\n\r\nconst MEMBER_ASSIGN_MANAGER_CREATE = \"memberAssignManager/create\";\r\nconst MEMBER_ASSIGN_MANAGER_UPDATE = \"memberAssignManager/update\";\r\nconst MEMBER_ASSIGN_MANAGERS_FETCH = \"memberAssignManager/fetch\";\r\nconst MEMBER_ASSIGN_MANAGER_LISTEN = \"memberAssignManager/listen\";\r\nconst MEMBER_ASSIGN_MANAGER_SELECTED = \"memberAssignManager/selected\";\r\n\r\nexport function selectMemberAssignManager(memberAssignManager) {\r\n  return {\r\n    type: MEMBER_ASSIGN_MANAGER_SELECTED,\r\n    payload: memberAssignManager,\r\n  };\r\n}\r\n\r\nexport function createMemberAssignManager(memberAssignManager) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await addMemberAssignManagerToFirestore(memberAssignManager);\r\n      dispatch({\r\n        type: MEMBER_ASSIGN_MANAGER_CREATE,\r\n        payload: memberAssignManager,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function updateMemberAssignManager(memberAssignManager) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await updateMemberAssignManagerToFirestore(memberAssignManager);\r\n      dispatch({\r\n        type: MEMBER_ASSIGN_MANAGER_UPDATE,\r\n        payload: memberAssignManager,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function fetchMemberAssignManagers(yyyyMM) {\r\n  return async function (dispatch, getState) {\r\n    try {\r\n      // 現在読み込まれているリストと最終更新日リストを比べて、最新のデータを読み込むかどうか判断する\r\n      const must = mustRefresh(\r\n        getState().memberAssignManager.memberAssignManagers,\r\n        getState().lastupdate.member_assign_manager\r\n      );\r\n      if (!must.result) {\r\n        // 読み込む必要がない場合は現在のリストを利用する\r\n        return getState().memberAssignManager.memberAssignManagers;\r\n      }\r\n      dispatch(asyncActionStart());\r\n      const snapshot = fetchMemberAssignManagersFromFirestore(yyyyMM).get();\r\n      const data = (await snapshot).docs.map((doc) => {\r\n        const ret = dataFromSnapshot(doc);\r\n        const href = `<a href=\"#${ret.id}\">編集</a>`;\r\n        return { href, ...ret };\r\n      });\r\n      dispatch({\r\n        type: MEMBER_ASSIGN_MANAGERS_FETCH,\r\n        payload: data,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n      return data;\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nconst initialState = {\r\n  memberAssignManagers: [],\r\n  selectedMemberAssignManager: null,\r\n};\r\n\r\nexport default function memberAssignManagerReducer(\r\n  state = initialState,\r\n  { type, payload }\r\n) {\r\n  switch (type) {\r\n    case MEMBER_ASSIGN_MANAGER_SELECTED:\r\n      return {\r\n        ...state,\r\n        selectedMemberAssignManager: payload,\r\n      };\r\n    case MEMBER_ASSIGN_MANAGER_CREATE:\r\n      return state;\r\n    case MEMBER_ASSIGN_MANAGER_UPDATE:\r\n      return state;\r\n    case MEMBER_ASSIGN_MANAGERS_FETCH:\r\n      return {\r\n        ...state,\r\n        memberAssignManagers: payload,\r\n      };\r\n    case MEMBER_ASSIGN_MANAGER_LISTEN:\r\n      return {\r\n        ...state,\r\n        selectedMemberAssignManager: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import cuid from \"cuid\";\r\nimport lo from \"lodash\";\r\nimport firebase from \"../config/firebase\";\r\nimport { addOrUpdateLastUpdateToFirestore } from \"./lastupdateService\";\r\n\r\nconst db = firebase.firestore();\r\nconst COLLECTION_NAME = \"member_rank\";\r\n\r\nexport function fetchMemberRanksFromFirestore(yyyyMM) {\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .where(\"closing_year_month\", \"==\", yyyyMM)\r\n    .orderBy(\"created_at\", \"asc\");\r\n}\r\n\r\nexport function loadFromMemberRankFromFirestore(memberRankId) {\r\n  return db.collection(COLLECTION_NAME).doc(memberRankId);\r\n}\r\n\r\nexport function addMemberRankToFirestore(memberRank) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    memberRank.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(memberRank.closing_year_month + \"-\" + cuid())\r\n    .set({\r\n      ...memberRank,\r\n      created_at: now,\r\n      created_user: user.email,\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n\r\nexport function updateMemberRankToFirestore(memberRank) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    memberRank.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(memberRank.id)\r\n    .update({\r\n      ...lo.omit(memberRank, \"id\"),\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n","import {\r\n  asyncActionError,\r\n  asyncActionFinish,\r\n  asyncActionStart,\r\n} from \"../../../app/async/asyncReducer\";\r\nimport { dataFromSnapshot } from \"../../../app/firestore/firestoreService\";\r\nimport {\r\n  addMemberRankToFirestore,\r\n  fetchMemberRanksFromFirestore,\r\n  updateMemberRankToFirestore,\r\n} from \"../../../app/firestore/memberRankService\";\r\nimport { mustRefresh } from \"../../lastupdate/lastupdateReducer\";\r\n\r\nconst MEMBERRANK_CREATE = \"memberRank/create\";\r\nconst MEMBERRANK_UPDATE = \"memberRank/update\";\r\nconst MEMBERRANKS_FETCH = \"memberRank/fetch\";\r\nconst MEMBERRANK_LISTEN = \"memberRank/listen\";\r\nconst MEMBERRANK_SELECTED = \"memberRank/selected\";\r\n\r\nexport function selectMemberRank(memberRank) {\r\n  return {\r\n    type: MEMBERRANK_SELECTED,\r\n    payload: memberRank,\r\n  };\r\n}\r\n\r\nexport function createMemberRank(memberRank) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await addMemberRankToFirestore(memberRank);\r\n      dispatch({\r\n        type: MEMBERRANK_CREATE,\r\n        payload: memberRank,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function updateMemberRank(memberRank) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await updateMemberRankToFirestore(memberRank);\r\n      dispatch({\r\n        type: MEMBERRANK_UPDATE,\r\n        payload: memberRank,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function fetchMemberRanks(yyyyMM) {\r\n  return async function (dispatch, getState) {\r\n    try {\r\n      // 現在読み込まれているリストと最終更新日リストを比べて、最新のデータを読み込むかどうか判断する\r\n      const must = mustRefresh(\r\n        getState().memberRank.memberRanks,\r\n        getState().lastupdate.member_rank\r\n      );\r\n      if (!must.result) {\r\n        // 読み込む必要がない場合は現在のリストを利用する\r\n        return getState().memberRank.memberRanks;\r\n      }\r\n      dispatch(asyncActionStart());\r\n      const snapshot = fetchMemberRanksFromFirestore(yyyyMM).get();\r\n      const data = (await snapshot).docs.map((doc) => {\r\n        const ret = dataFromSnapshot(doc);\r\n        const href = `<a href=\"#${ret.id}\">編集</a>`;\r\n        return { href, ...ret };\r\n      });\r\n      dispatch({\r\n        type: MEMBERRANKS_FETCH,\r\n        payload: data,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n      return data;\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nconst initialState = {\r\n  memberRanks: [],\r\n  selectedMemberRank: null,\r\n};\r\n\r\nexport default function memberRankReducer(\r\n  state = initialState,\r\n  { type, payload }\r\n) {\r\n  switch (type) {\r\n    case MEMBERRANK_SELECTED:\r\n      return {\r\n        ...state,\r\n        selectedMemberRank: payload,\r\n      };\r\n    case MEMBERRANK_CREATE:\r\n      return state;\r\n    case MEMBERRANK_UPDATE:\r\n      return state;\r\n    case MEMBERRANKS_FETCH:\r\n      return {\r\n        ...state,\r\n        memberRanks: payload,\r\n      };\r\n    case MEMBERRANK_LISTEN:\r\n      return {\r\n        ...state,\r\n        selectedMemberRank: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import cuid from \"cuid\";\r\nimport lo from \"lodash\";\r\nimport firebase from \"../config/firebase\";\r\nimport { addOrUpdateLastUpdateToFirestore } from \"./lastupdateService\";\r\n\r\nconst db = firebase.firestore();\r\nconst COLLECTION_NAME = \"member\";\r\n\r\nexport function fetchMembersFromFirestore(yyyyMM) {\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .where(\"closing_year_month\", \"==\", yyyyMM)\r\n    .orderBy(\"created_at\", \"asc\");\r\n}\r\n\r\nexport function loadFromMemberFromFirestore(memberId) {\r\n  return db.collection(COLLECTION_NAME).doc(memberId);\r\n}\r\n\r\nexport function addMemberToFirestore(member) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    member.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(member.closing_year_month + \"-\" + cuid())\r\n    .set({\r\n      ...member,\r\n      created_at: now,\r\n      created_user: user.email,\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n\r\nexport function updateMemberToFirestore(member) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    member.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(member.id)\r\n    .update({\r\n      ...lo.omit(member, \"id\"),\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n","import {\r\n  asyncActionError,\r\n  asyncActionFinish,\r\n  asyncActionStart,\r\n} from \"../../../app/async/asyncReducer\";\r\nimport { dataFromSnapshot } from \"../../../app/firestore/firestoreService\";\r\nimport {\r\n  addMemberToFirestore,\r\n  fetchMembersFromFirestore,\r\n  updateMemberToFirestore,\r\n} from \"../../../app/firestore/memberService\";\r\nimport { mustRefresh } from \"../../lastupdate/lastupdateReducer\";\r\n\r\nconst MEMBER_CREATE = \"member/create\";\r\nconst MEMBER_UPDATE = \"member/update\";\r\nconst MEMBERS_FETCH = \"member/fetch\";\r\nconst MEMBER_LISTEN = \"member/listen\";\r\nconst MEMBER_SELECTED = \"member/selected\";\r\n\r\nexport function selectMember(member) {\r\n  return {\r\n    type: MEMBER_SELECTED,\r\n    payload: member,\r\n  };\r\n}\r\n\r\nexport function createMember(member) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await addMemberToFirestore(member);\r\n      dispatch({\r\n        type: MEMBER_CREATE,\r\n        payload: member,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function updateMember(member) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await updateMemberToFirestore(member);\r\n      dispatch({\r\n        type: MEMBER_UPDATE,\r\n        payload: member,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function fetchMembers(yyyyMM) {\r\n  return async function (dispatch, getState) {\r\n    try {\r\n      // 現在読み込まれているリストと最終更新日リストを比べて、最新のデータを読み込むかどうか判断する\r\n      const must = mustRefresh(\r\n        getState().member.members,\r\n        getState().lastupdate.member\r\n      );\r\n      if (!must.result) {\r\n        // 読み込む必要がない場合は現在のリストを利用する\r\n        return getState().member.members;\r\n      }\r\n      dispatch(asyncActionStart());\r\n      const snapshot = fetchMembersFromFirestore(yyyyMM).get();\r\n      const data = (await snapshot).docs.map((doc) => {\r\n        const ret = dataFromSnapshot(doc);\r\n        const href = `<a href=\"#${ret.id}\">編集</a>`;\r\n        return { href, ...ret };\r\n      });\r\n      dispatch({\r\n        type: MEMBERS_FETCH,\r\n        payload: data,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n      return data;\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nconst initialState = {\r\n  members: [],\r\n  selectedMember: null,\r\n};\r\n\r\nexport default function memberReducer(state = initialState, { type, payload }) {\r\n  switch (type) {\r\n    case MEMBER_SELECTED:\r\n      return {\r\n        ...state,\r\n        selectedMember: payload,\r\n      };\r\n    case MEMBER_CREATE:\r\n      return state;\r\n    case MEMBER_UPDATE:\r\n      return state;\r\n    case MEMBERS_FETCH:\r\n      return {\r\n        ...state,\r\n        members: payload,\r\n      };\r\n    case MEMBER_LISTEN:\r\n      return {\r\n        ...state,\r\n        selectedMember: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import cuid from \"cuid\";\r\nimport lo from \"lodash\";\r\nimport firebase from \"../config/firebase\";\r\nimport { addOrUpdateLastUpdateToFirestore } from \"./lastupdateService\";\r\n\r\nconst db = firebase.firestore();\r\nconst COLLECTION_NAME = \"member_tag\";\r\n\r\nexport function fetchMemberTagsFromFirestore(yyyyMM) {\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .where(\"closing_year_month\", \"==\", yyyyMM)\r\n    .orderBy(\"created_at\", \"asc\");\r\n}\r\n\r\nexport function loadFromMemberTagFromFirestore(memberTagId) {\r\n  return db.collection(COLLECTION_NAME).doc(memberTagId);\r\n}\r\n\r\nexport function addMemberTagToFirestore(memberTag) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    memberTag.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(memberTag.closing_year_month + \"-\" + cuid())\r\n    .set({\r\n      ...memberTag,\r\n      created_at: now,\r\n      created_user: user.email,\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n\r\nexport function updateMemberTagToFirestore(memberTag) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    memberTag.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(memberTag.id)\r\n    .update({\r\n      ...lo.omit(memberTag, \"id\"),\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n","import {\r\n  asyncActionError,\r\n  asyncActionFinish,\r\n  asyncActionStart,\r\n} from \"../../../app/async/asyncReducer\";\r\nimport { dataFromSnapshot } from \"../../../app/firestore/firestoreService\";\r\nimport {\r\n  addMemberTagToFirestore,\r\n  fetchMemberTagsFromFirestore,\r\n  updateMemberTagToFirestore,\r\n} from \"../../../app/firestore/memberTagService\";\r\nimport { mustRefresh } from \"../../lastupdate/lastupdateReducer\";\r\n\r\nconst MEMBERTAG_CREATE = \"memberTag/create\";\r\nconst MEMBERTAG_UPDATE = \"memberTag/update\";\r\nconst MEMBERTAGS_FETCH = \"memberTag/fetch\";\r\nconst MEMBERTAG_LISTEN = \"memberTag/listen\";\r\nconst MEMBERTAG_SELECTED = \"memberTag/selected\";\r\n\r\nexport function selectMemberTag(memberTag) {\r\n  return {\r\n    type: MEMBERTAG_SELECTED,\r\n    payload: memberTag,\r\n  };\r\n}\r\n\r\nexport function createMemberTag(memberTag) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await addMemberTagToFirestore(memberTag);\r\n      dispatch({\r\n        type: MEMBERTAG_CREATE,\r\n        payload: memberTag,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function updateMemberTag(memberTag) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await updateMemberTagToFirestore(memberTag);\r\n      dispatch({\r\n        type: MEMBERTAG_UPDATE,\r\n        payload: memberTag,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function fetchMemberTags(yyyyMM) {\r\n  return async function (dispatch, getState) {\r\n    try {\r\n      // 現在読み込まれているリストと最終更新日リストを比べて、最新のデータを読み込むかどうか判断する\r\n      const must = mustRefresh(\r\n        getState().memberTag.memberTags,\r\n        getState().lastupdate.member_tag\r\n      );\r\n      if (!must.result) {\r\n        // 読み込む必要がない場合は現在のリストを利用する\r\n        return getState().memberTag.memberTags;\r\n      }\r\n      dispatch(asyncActionStart());\r\n      const snapshot = fetchMemberTagsFromFirestore(yyyyMM).get();\r\n      const data = (await snapshot).docs.map((doc) => {\r\n        const ret = dataFromSnapshot(doc);\r\n        const href = `<a href=\"#${ret.id}\">編集</a>`;\r\n        return { href, ...ret };\r\n      });\r\n      dispatch({\r\n        type: MEMBERTAGS_FETCH,\r\n        payload: data,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n      return data;\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nconst initialState = {\r\n  memberTags: [],\r\n  selectedMemberTag: null,\r\n};\r\n\r\nexport default function memberTagReducer(\r\n  state = initialState,\r\n  { type, payload }\r\n) {\r\n  switch (type) {\r\n    case MEMBERTAG_SELECTED:\r\n      return {\r\n        ...state,\r\n        selectedMemberTag: payload,\r\n      };\r\n    case MEMBERTAG_CREATE:\r\n      return state;\r\n    case MEMBERTAG_UPDATE:\r\n      return state;\r\n    case MEMBERTAGS_FETCH:\r\n      return {\r\n        ...state,\r\n        memberTags: payload,\r\n      };\r\n    case MEMBERTAG_LISTEN:\r\n      return {\r\n        ...state,\r\n        selectedMemberTag: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import cuid from \"cuid\";\r\nimport lo from \"lodash\";\r\nimport firebase from \"../config/firebase\";\r\nimport { addOrUpdateLastUpdateToFirestore } from \"./lastupdateService\";\r\n\r\nconst db = firebase.firestore();\r\nconst COLLECTION_NAME = \"precision\";\r\n\r\nexport function fetchPrecisionsFromFirestore(yyyyMM) {\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .where(\"closing_year_month\", \"==\", yyyyMM)\r\n    .orderBy(\"created_at\", \"asc\");\r\n}\r\n\r\nexport function loadFromPrecisionFromFirestore(precisionId) {\r\n  return db.collection(COLLECTION_NAME).doc(precisionId);\r\n}\r\n\r\nexport function addPrecisionToFirestore(precision) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    precision.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(precision.closing_year_month + \"-\" + cuid())\r\n    .set({\r\n      ...precision,\r\n      created_at: now,\r\n      created_user: user.email,\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n\r\nexport function updatePrecisionToFirestore(precision) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    precision.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(precision.id)\r\n    .update({\r\n      ...lo.omit(precision, \"id\"),\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n","import {\r\n  asyncActionError,\r\n  asyncActionFinish,\r\n  asyncActionStart,\r\n} from \"../../../app/async/asyncReducer\";\r\nimport { dataFromSnapshot } from \"../../../app/firestore/firestoreService\";\r\nimport {\r\n  addPrecisionToFirestore,\r\n  fetchPrecisionsFromFirestore,\r\n  updatePrecisionToFirestore,\r\n} from \"../../../app/firestore/precisionService\";\r\nimport { mustRefresh } from \"../../lastupdate/lastupdateReducer\";\r\n\r\nconst PRECISION_CREATE = \"precision/create\";\r\nconst PRECISION_UPDATE = \"precision/update\";\r\nconst PRECISIONS_FETCH = \"precision/fetch\";\r\nconst PRECISION_LISTEN = \"precision/listen\";\r\nconst PRECISION_SELECTED = \"precision/selected\";\r\n\r\nexport function selectPrecision(precision) {\r\n  return {\r\n    type: PRECISION_SELECTED,\r\n    payload: precision,\r\n  };\r\n}\r\n\r\nexport function createPrecision(precision) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await addPrecisionToFirestore(precision);\r\n      dispatch({\r\n        type: PRECISION_CREATE,\r\n        payload: precision,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function updatePrecision(precision) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await updatePrecisionToFirestore(precision);\r\n      dispatch({\r\n        type: PRECISION_UPDATE,\r\n        payload: precision,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function fetchPrecisions(yyyyMM) {\r\n  return async function (dispatch, getState) {\r\n    try {\r\n      // 現在読み込まれているリストと最終更新日リストを比べて、最新のデータを読み込むかどうか判断する\r\n      const must = mustRefresh(\r\n        getState().precision.precisions,\r\n        getState().lastupdate.precision\r\n      );\r\n      if (!must.result) {\r\n        // 読み込む必要がない場合は現在のリストを利用する\r\n        return getState().precision.precisions;\r\n      }\r\n      dispatch(asyncActionStart());\r\n      const snapshot = fetchPrecisionsFromFirestore(yyyyMM).get();\r\n      const data = (await snapshot).docs.map((doc) => {\r\n        const ret = dataFromSnapshot(doc);\r\n        const href = `<a href=\"#${ret.id}\">編集</a>`;\r\n        return { href, ...ret };\r\n      });\r\n      dispatch({\r\n        type: PRECISIONS_FETCH,\r\n        payload: data,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n      return data;\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nconst initialState = {\r\n  precisions: [],\r\n  selectedPrecision: null,\r\n};\r\n\r\nexport default function precisionReducer(\r\n  state = initialState,\r\n  { type, payload }\r\n) {\r\n  switch (type) {\r\n    case PRECISION_SELECTED:\r\n      return {\r\n        ...state,\r\n        selectedPrecision: payload,\r\n      };\r\n    case PRECISION_CREATE:\r\n      return state;\r\n    case PRECISION_UPDATE:\r\n      return state;\r\n    case PRECISIONS_FETCH:\r\n      return {\r\n        ...state,\r\n        precisions: payload,\r\n      };\r\n    case PRECISION_LISTEN:\r\n      return {\r\n        ...state,\r\n        selectedPrecision: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import cuid from \"cuid\";\r\nimport lo from \"lodash\";\r\nimport firebase from \"../config/firebase\";\r\nimport { addOrUpdateLastUpdateToFirestore } from \"./lastupdateService\";\r\n\r\nconst db = firebase.firestore();\r\nconst COLLECTION_NAME = \"project\";\r\n\r\nexport function fetchProjectsFromFirestore(yyyyMM) {\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .where(\"closing_year_month\", \"==\", yyyyMM)\r\n    .orderBy(\"created_at\", \"asc\");\r\n}\r\n\r\nexport function loadFromProjectFromFirestore(projectId) {\r\n  return db.collection(COLLECTION_NAME).doc(projectId);\r\n}\r\n\r\nexport function addProjectToFirestore(project) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    project.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(project.closing_year_month + \"-\" + cuid())\r\n    .set({\r\n      ...project,\r\n      created_at: now,\r\n      created_user: user.email,\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n\r\nexport function updateProjectToFirestore(project) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    project.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(project.id)\r\n    .update({\r\n      ...lo.omit(project, \"id\"),\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n","import {\r\n  asyncActionError,\r\n  asyncActionFinish,\r\n  asyncActionStart,\r\n} from \"../../../app/async/asyncReducer\";\r\nimport { dataFromSnapshot } from \"../../../app/firestore/firestoreService\";\r\nimport {\r\n  addProjectToFirestore,\r\n  fetchProjectsFromFirestore,\r\n  updateProjectToFirestore,\r\n} from \"../../../app/firestore/projectService\";\r\nimport { mustRefresh } from \"../../lastupdate/lastupdateReducer\";\r\n\r\nconst PROJECT_CREATE = \"project/create\";\r\nconst PROJECT_UPDATE = \"project/update\";\r\nconst PROJECTS_FETCH = \"project/fetch\";\r\nconst PROJECT_LISTEN = \"project/listen\";\r\nconst PROJECT_SELECTED = \"project/selected\";\r\n\r\nexport function selectProject(project) {\r\n  return {\r\n    type: PROJECT_SELECTED,\r\n    payload: project,\r\n  };\r\n}\r\n\r\nexport function createProject(project) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await addProjectToFirestore(project);\r\n      dispatch({\r\n        type: PROJECT_CREATE,\r\n        payload: project,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function updateProject(project) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await updateProjectToFirestore(project);\r\n      dispatch({\r\n        type: PROJECT_UPDATE,\r\n        payload: project,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function fetchProjects(yyyyMM) {\r\n  return async function (dispatch, getState) {\r\n    try {\r\n      // 現在読み込まれているリストと最終更新日リストを比べて、最新のデータを読み込むかどうか判断する\r\n      const must = mustRefresh(\r\n        getState().project.projects,\r\n        getState().lastupdate.project\r\n      );\r\n      if (!must.result) {\r\n        // 読み込む必要がない場合は現在のリストを利用する\r\n        return getState().project.projects;\r\n      }\r\n      dispatch(asyncActionStart());\r\n      const snapshot = fetchProjectsFromFirestore(yyyyMM).get();\r\n      const data = (await snapshot).docs.map((doc) => {\r\n        const ret = dataFromSnapshot(doc);\r\n        const href = `<a href=\"#${ret.id}\">編集</a>`;\r\n        return { href, ...ret };\r\n      });\r\n      dispatch({\r\n        type: PROJECTS_FETCH,\r\n        payload: data,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n      return data;\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nconst initialState = {\r\n  projects: [],\r\n  selectedProject: null,\r\n};\r\n\r\nexport default function projectReducer(\r\n  state = initialState,\r\n  { type, payload }\r\n) {\r\n  switch (type) {\r\n    case PROJECT_SELECTED:\r\n      return {\r\n        ...state,\r\n        selectedProject: payload,\r\n      };\r\n    case PROJECT_CREATE:\r\n      return state;\r\n    case PROJECT_UPDATE:\r\n      return state;\r\n    case PROJECTS_FETCH:\r\n      return {\r\n        ...state,\r\n        projects: payload,\r\n      };\r\n    case PROJECT_LISTEN:\r\n      return {\r\n        ...state,\r\n        selectedProject: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Icon, Menu, Sidebar } from \"semantic-ui-react\";\r\nimport NowLoading from \"../../app/common/utils/NowLoading\";\r\nimport AssignList from \"./AssignList\";\r\nimport { fetchAccDepartments } from \"../master/accDepartments/accDepartmentReducer\";\r\nimport { fetchAccSubjects } from \"../master/accSubjects/accSubjectReducer\";\r\nimport { fetchClients } from \"../master/clients/clientReducer\";\r\nimport { fetchMemberAffiliations } from \"../master/memberAffiliations/memberAffiliationReducer\";\r\nimport { fetchMemberAssignManagers } from \"../master/memberAssignManagers/memberAssignManagerReducer\";\r\nimport { fetchMemberRanks } from \"../master/memberRanks/memberRankReducer\";\r\nimport { fetchMembers } from \"../master/members/memberReducer\";\r\nimport { fetchMemberTags } from \"../master/memberTags/memberTagReducer\";\r\nimport { fetchPrecisions } from \"../master/precisions/precisionReducer\";\r\nimport { fetchProjects } from \"../master/projects/projectReducer\";\r\nimport { fetchAssigns } from \"./assignReducer\";\r\nimport { fetchLastUpdates } from \"../lastupdate/lastupdateReducer\";\r\n\r\nexport default function AssignDashboard({ location }) {\r\n  const dispatch = useDispatch();\r\n  const [refresh, setRefresh] = useState(0);\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchLastUpdates(currentPeriod.yearMonth)).then(async () => {\r\n      await Promise.all([\r\n        dispatch(fetchMembers(currentPeriod.yearMonth)),\r\n        dispatch(fetchMemberTags(currentPeriod.yearMonth)),\r\n        dispatch(fetchMemberAffiliations(currentPeriod.yearMonth)),\r\n        dispatch(fetchMemberAssignManagers(currentPeriod.yearMonth)),\r\n        dispatch(fetchMemberRanks(currentPeriod.yearMonth)),\r\n        dispatch(fetchProjects(currentPeriod.yearMonth)),\r\n        dispatch(fetchAccDepartments(currentPeriod.yearMonth)),\r\n        dispatch(fetchAccSubjects(currentPeriod.yearMonth)),\r\n        dispatch(fetchPrecisions(currentPeriod.yearMonth)),\r\n        dispatch(fetchClients(currentPeriod.yearMonth)),\r\n      ]).then(() => {\r\n        dispatch(fetchAssigns(currentPeriod.yearMonth));\r\n      });\r\n    });\r\n  }, [currentPeriod.yearMonth, dispatch, refresh]);\r\n\r\n  const handleRefresh = () => {\r\n    setRefresh(refresh + 1);\r\n  };\r\n\r\n  if (loading) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Sidebar.Pushable>\r\n        <Sidebar.Pusher className=\"jpusher\">\r\n          <Menu secondary className=\"jmenu\">\r\n            <Menu.Item className={\"secondary_toolbar_title\"}>Assign</Menu.Item>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                handleRefresh();\r\n              }}>\r\n              <Icon name=\"refresh\" />\r\n              最新の状態に更新\r\n            </Menu.Item>\r\n          </Menu>\r\n          <AssignList refresh={refresh} location={location} />\r\n        </Sidebar.Pusher>\r\n      </Sidebar.Pushable>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\nimport { useField } from \"formik\";\nimport { FormField, Label, Select } from \"semantic-ui-react\";\n\nexport default function MySelectInput({ label, ...props }) {\n  const [field, meta, helpers] = useField(props);\n\n  return (\n    <FormField error={meta.touched && !!meta.error}>\n      <label>{label}</label>\n      <Select\n        value={field.value || null}\n        onChange={(e, d) => helpers.setValue(d.value)}\n        onBlur={() => helpers.setTouched(true)}\n        {...props}\n      />\n      {meta.touched && meta.error ? (\n        <Label pointing color=\"red\">\n          {meta.error}\n        </Label>\n      ) : null}\n    </FormField>\n  );\n}\n","export const availableOptions = [\r\n  { key: \"true\", id: \"true\", text: \"有効\", name: \"有効\", value: \"true\" },\r\n  { key: \"false\", id: \"false\", text: \"無効\", name: \"無効\", value: \"false\" },\r\n];\r\n","import { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  asyncActionStart,\n  asyncActionError,\n  asyncActionFinish,\n} from \"../async/asyncReducer\";\nimport { dataFromSnapshot } from \"../firestore/firestoreService\";\n\nexport default function useFirestoreDoc({\n  query,\n  data,\n  deps,\n  shouldExecute = true,\n}) {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (!shouldExecute) {\n      data(null);\n      return;\n    }\n\n    dispatch(asyncActionStart());\n    const unsubscribe = query().onSnapshot(\n      (snapshot) => {\n        if (!snapshot.exists) {\n          dispatch(\n            asyncActionError({\n              code: \"not-found\",\n              message: \"Could not find document\",\n            })\n          );\n          return;\n        }\n        data(dataFromSnapshot(snapshot));\n        dispatch(asyncActionFinish());\n      },\n      (error) => dispatch(asyncActionError(error))\n    );\n    return () => {\n      unsubscribe();\n    };\n  }, deps); // eslint-disable-line react-hooks/exhaustive-deps\n}\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\r\nimport { Button, Menu } from \"semantic-ui-react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Formik, Form } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport MyTextInput from \"../../../app/common/form/MyTextInput\";\r\nimport MySelectInput from \"../../../app/common/form/MySelectInput\";\r\nimport { availableOptions } from \"../../../app/options/availableOptions\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\r\nimport { loadFromClientFromFirestore } from \"../../../app/firestore/clientService\";\r\nimport { createClient, selectClient, updateClient } from \"./clientReducer\";\r\n\r\nexport default function ClientForm({\r\n  clientId,\r\n  setVisibleDetail,\r\n  handleRefresh,\r\n}) {\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const { selectedClient } = useSelector((state) => state.client);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const initialValues = selectedClient ?? {\r\n    closing_year_month: currentPeriod.yearMonth,\r\n    name: \"\",\r\n    available: \"true\",\r\n  };\r\n\r\n  const validationSchema = Yup.object({\r\n    name: Yup.string().required(\"取引先名称を入力してください\"),\r\n    available: Yup.string().required(\"有効・無効を設定してください\"),\r\n  });\r\n\r\n  useFirestoreDoc({\r\n    shouldExecute: !!clientId,\r\n    query: () => loadFromClientFromFirestore(clientId),\r\n    data: (item) => dispatch(selectClient(item)),\r\n    deps: [clientId, dispatch],\r\n  });\r\n\r\n  if (loading) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Menu secondary className=\"jmenu\">\r\n        <Menu.Item className={\"secondary_toolbar_title\"}>\r\n          クライアント\r\n        </Menu.Item>\r\n      </Menu>\r\n      <Formik\r\n        enableReinitialize={true}\r\n        validateOnBlur={false}\r\n        initialValues={initialValues}\r\n        validationSchema={validationSchema}\r\n        onSubmit={async (values, { setSubmitting }) => {\r\n          try {\r\n            setSubmitting(true);\r\n            clientId\r\n              ? dispatch(updateClient(values))\r\n              : dispatch(createClient(values));\r\n            setVisibleDetail(false);\r\n            history.push(\"/clients\");\r\n            handleRefresh();\r\n          } catch (error) {\r\n            toast.error(error.message);\r\n          } finally {\r\n            setSubmitting(false);\r\n          }\r\n        }}>\r\n        {({ isSubmitting, dirty, isValid, resetForm }) => (\r\n          <Form className=\"ui form\">\r\n            <input type=\"hidden\" name=\"id\" />\r\n            <input type=\"hidden\" name=\"closing_year_month\" />\r\n            <MyTextInput\r\n              label=\"クライアント名称\"\r\n              name=\"name\"\r\n              placeholder=\"クライアント名称\"\r\n            />\r\n            <MySelectInput\r\n              label=\"有効・無効\"\r\n              name=\"available\"\r\n              options={availableOptions}\r\n            />\r\n\r\n            <Button\r\n              loading={isSubmitting}\r\n              disabled={!isValid || !dirty || isSubmitting}\r\n              type=\"submit\"\r\n              positive\r\n              content=\"保存\"\r\n            />\r\n            <Button\r\n              negative\r\n              content=\"キャンセル\"\r\n              as={Link}\r\n              to=\"/clients\"\r\n              onClick={() => {\r\n                setVisibleDetail(false);\r\n                resetForm();\r\n              }}\r\n            />\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n}\r\n","import { availableOptions } from \"../../../app/options/availableOptions\";\r\n\r\nconst columnsOptions = () => {\r\n  return [\r\n    {\r\n      name: \"href\",\r\n      title: \"リンク\",\r\n      type: \"html\",\r\n      width: \"100px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"name\",\r\n      title: \"クライアント名称\",\r\n      type: \"text\",\r\n      width: \"300px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"available\",\r\n      title: \"有効・無効\",\r\n      type: \"dropdown\",\r\n      source: availableOptions,\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"created_at\",\r\n      title: \"作成日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"created_user\",\r\n      title: \"作成ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_at\",\r\n      title: \"更新日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_user\",\r\n      title: \"更新ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"id\",\r\n      title: \"ドキュメントID\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"closing_year_month\",\r\n      title: \"締め年月\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n  ];\r\n};\r\n\r\nexport default columnsOptions;\r\n","import React, { useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport SpreadSheet from \"../../../app/common/form/SpreadSheet\";\r\nimport columnsOptions from \"./columnsOptions\";\r\n\r\nexport default function ClientList({ refresh }) {\r\n  const { clients } = useSelector((state) => state.client);\r\n\r\n  const options = useRef({\r\n    columns: columnsOptions(),\r\n  });\r\n\r\n  return <SpreadSheet options={options} data={clients} />;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Icon, Menu, Sidebar } from \"semantic-ui-react\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport { fetchLastUpdates } from \"../../lastupdate/lastupdateReducer\";\r\nimport ClientForm from \"./ClientForm\";\r\nimport ClientList from \"./ClientList\";\r\nimport { fetchClients } from \"./clientReducer\";\r\n\r\nexport default function ClientDashboard({ location }) {\r\n  const clientId = location.hash?.replace(\"#\", \"\");\r\n  const [visibleDetail, setVisibleDetail] = useState(false);\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const dispatch = useDispatch();\r\n  const [refresh, setRefresh] = useState(0);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n\r\n  useEffect(() => {\r\n    if (clientId) {\r\n      setVisibleDetail(true);\r\n    }\r\n  }, [clientId]);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchLastUpdates(currentPeriod.yearMonth)).then(async () => {\r\n      await Promise.all([dispatch(fetchClients(currentPeriod.yearMonth))]);\r\n    });\r\n  }, [currentPeriod.yearMonth, dispatch, refresh]);\r\n\r\n  const handleRefresh = () => {\r\n    setRefresh(refresh + 1);\r\n  };\r\n\r\n  if (loading && !visibleDetail) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Sidebar.Pushable>\r\n        <Sidebar\r\n          width=\"wide\"\r\n          as={Menu}\r\n          animation=\"overlay\"\r\n          direction=\"right\"\r\n          vertical\r\n          visible={visibleDetail}>\r\n          <Menu.Item>\r\n            <ClientForm\r\n              clientId={clientId}\r\n              setVisibleDetail={setVisibleDetail}\r\n              handleRefresh={handleRefresh}\r\n            />\r\n          </Menu.Item>\r\n        </Sidebar>\r\n\r\n        <Sidebar.Pusher className=\"jpusher\" dimmed={visibleDetail}>\r\n          <Menu secondary className=\"jmenu\">\r\n            <Menu.Item className={\"secondary_toolbar_title\"}>\r\n              クライアント\r\n            </Menu.Item>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                handleRefresh();\r\n              }}>\r\n              <Icon name=\"refresh\" />\r\n              最新の状態に更新\r\n            </Menu.Item>\r\n            <Menu.Item onClick={() => setVisibleDetail(!visibleDetail)}>\r\n              <Icon name=\"edit\" />\r\n              新しいレコード\r\n            </Menu.Item>\r\n          </Menu>\r\n          <ClientList refresh={refresh} />\r\n        </Sidebar.Pusher>\r\n      </Sidebar.Pushable>\r\n    </>\r\n  );\r\n}\r\n","export const memberHubOptionsFactory = (memberHubs, available = \"true\") => {\r\n  return memberHubs\r\n    .filter((hub) => hub.available === available)\r\n    .map((hub) => ({\r\n      key: hub.id,\r\n      id: hub.id,\r\n      text: hub.name,\r\n      name: hub.name,\r\n      value: hub.id,\r\n    }));\r\n};\r\n","import cuid from \"cuid\";\r\nimport lo from \"lodash\";\r\nimport firebase from \"../config/firebase\";\r\nimport { addOrUpdateLastUpdateToFirestore } from \"./lastupdateService\";\r\n\r\nconst db = firebase.firestore();\r\nconst COLLECTION_NAME = \"member_hub_cost_sales\";\r\n\r\nexport function fetchMemberHubCostSalessFromFirestore(yyyyMM) {\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .where(\"closing_year_month\", \"==\", yyyyMM)\r\n    .orderBy(\"created_at\", \"asc\");\r\n}\r\n\r\nexport function loadFromMemberHubCostSalesFromFirestore(memberHubCostSalesId) {\r\n  return db.collection(COLLECTION_NAME).doc(memberHubCostSalesId);\r\n}\r\n\r\nexport function addMemberHubCostSalesToFirestore(memberHubCostSales) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    memberHubCostSales.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(memberHubCostSales.closing_year_month + \"-\" + cuid())\r\n    .set({\r\n      ...memberHubCostSales,\r\n      created_at: now,\r\n      created_user: user.email,\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n\r\nexport function updateMemberHubCostSalesToFirestore(memberHubCostSales) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    memberHubCostSales.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(memberHubCostSales.id)\r\n    .update({\r\n      ...lo.omit(memberHubCostSales, \"id\"),\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n","import {\r\n  asyncActionError,\r\n  asyncActionFinish,\r\n  asyncActionStart,\r\n} from \"../../../app/async/asyncReducer\";\r\nimport { dataFromSnapshot } from \"../../../app/firestore/firestoreService\";\r\nimport {\r\n  addMemberHubCostSalesToFirestore,\r\n  fetchMemberHubCostSalessFromFirestore,\r\n  updateMemberHubCostSalesToFirestore,\r\n} from \"../../../app/firestore/memberHubCostSalesService\";\r\nimport { mustRefresh } from \"../../lastupdate/lastupdateReducer\";\r\n\r\nconst MEMBERHUB_COST_SALES_CREATE = \"memberHubCostSales/create\";\r\nconst MEMBERHUB_COST_SALES_UPDATE = \"memberHubCostSales/update\";\r\nconst MEMBERHUB_COST_SALESS_FETCH = \"memberHubCostSales/fetch\";\r\nconst MEMBERHUB_COST_SALES_LISTEN = \"memberHubCostSales/listen\";\r\nconst MEMBERHUB_COST_SALES_SELECTED = \"memberHubCostSales/selected\";\r\n\r\nexport function selectMemberHubCostSales(memberHubCostSales) {\r\n  return {\r\n    type: MEMBERHUB_COST_SALES_SELECTED,\r\n    payload: memberHubCostSales,\r\n  };\r\n}\r\n\r\nexport function createMemberHubCostSales(memberHubCostSales) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await addMemberHubCostSalesToFirestore(memberHubCostSales);\r\n      dispatch({\r\n        type: MEMBERHUB_COST_SALES_CREATE,\r\n        payload: memberHubCostSales,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function updateMemberHubCostSales(memberHubCostSales) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await updateMemberHubCostSalesToFirestore(memberHubCostSales);\r\n      dispatch({\r\n        type: MEMBERHUB_COST_SALES_UPDATE,\r\n        payload: memberHubCostSales,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function fetchMemberHubCostSaless(yyyyMM) {\r\n  return async function (dispatch, getState) {\r\n    try {\r\n      // 現在読み込まれているリストと最終更新日リストを比べて、最新のデータを読み込むかどうか判断する\r\n      const must = mustRefresh(\r\n        getState().memberHubCostSales.memberHubCostSaless,\r\n        getState().lastupdate.member_hub_cost_sales\r\n      );\r\n      if (!must.result) {\r\n        // 読み込む必要がない場合は現在のリストを利用する\r\n        return getState().memberHubCostSales.memberHubCostSaless;\r\n      }\r\n      dispatch(asyncActionStart());\r\n      const snapshot = fetchMemberHubCostSalessFromFirestore(yyyyMM).get();\r\n      const data = (await snapshot).docs.map((doc) => {\r\n        const ret = dataFromSnapshot(doc);\r\n        const href = `<a href=\"#${ret.id}\">編集</a>`;\r\n        return { href, ...ret };\r\n      });\r\n      dispatch({\r\n        type: MEMBERHUB_COST_SALESS_FETCH,\r\n        payload: data,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n      return data;\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * 拠点・ランクを指定して標準売上原価と売り上げを取得する\r\n * @param {*} memberHubCostSaless\r\n * @param {*} memberHubId\r\n * @param {*} memberRankId\r\n */\r\nexport function getCostAndSales(\r\n  memberHubCostSaless,\r\n  memberHubId,\r\n  memberRankId\r\n) {\r\n  const costs = memberHubCostSaless.filter(\r\n    (item) =>\r\n      item.hub === memberHubId &&\r\n      item.rank === memberRankId &&\r\n      item.cost_sales_kind === \"1\" &&\r\n      item.available === \"true\"\r\n  );\r\n  const saless = memberHubCostSaless.filter(\r\n    (item) =>\r\n      item.hub === memberHubId &&\r\n      item.rank === memberRankId &&\r\n      item.cost_sales_kind === \"2\" &&\r\n      item.available === \"true\"\r\n  );\r\n\r\n  const cost = costs.length > 0 ? parseInt(costs[0].cost_sales, 10) : 0;\r\n  const sales = saless.length > 0 ? parseInt(saless[0].cost_sales, 10) : 0;\r\n  return { cost, sales };\r\n}\r\n\r\nconst initialState = {\r\n  memberHubCostSaless: [],\r\n  selectedMemberHubCostSales: null,\r\n};\r\n\r\nexport default function memberHubCostSalesReducer(\r\n  state = initialState,\r\n  { type, payload }\r\n) {\r\n  switch (type) {\r\n    case MEMBERHUB_COST_SALES_SELECTED:\r\n      return {\r\n        ...state,\r\n        selectedMemberHubCostSales: payload,\r\n      };\r\n    case MEMBERHUB_COST_SALES_CREATE:\r\n      return state;\r\n    case MEMBERHUB_COST_SALES_UPDATE:\r\n      return state;\r\n    case MEMBERHUB_COST_SALESS_FETCH:\r\n      return {\r\n        ...state,\r\n        memberHubCostSaless: payload,\r\n      };\r\n    case MEMBERHUB_COST_SALES_LISTEN:\r\n      return {\r\n        ...state,\r\n        selectedMemberHubCostSales: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\r\nimport { Button, Menu } from \"semantic-ui-react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Formik, Form } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport MyTextInput from \"../../../app/common/form/MyTextInput\";\r\nimport MySelectInput from \"../../../app/common/form/MySelectInput\";\r\nimport { availableOptions } from \"../../../app/options/availableOptions\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\r\nimport { loadFromMemberFromFirestore } from \"../../../app/firestore/memberService\";\r\nimport { createMember, selectMember, updateMember } from \"./memberReducer\";\r\nimport { memberHubOptionsFactory } from \"../../../app/options/memberHubOptionsFactory\";\r\nimport { memberRankOptionsFactory } from \"../../../app/options/memberRankOptionsFactory\";\r\nimport { memberAffiliationOptionsFactory } from \"../../../app/options/memberAffiliationOptionsFactory\";\r\nimport { memberTagOptionsFactory } from \"../../../app/options/memberTagOptionsFactory\";\r\nimport { getCostAndSales } from \"../memberHubCostSaless/memberHubCostSalesReducer\";\r\nimport { memberAssignManagerOptionsFactory } from \"../../../app/options/memberAssignManagerOptionsFactory\";\r\n\r\nexport default function MemberForm({\r\n  memberId,\r\n  setVisibleDetail,\r\n  handleRefresh,\r\n}) {\r\n  const { memberTags } = useSelector((state) => state.memberTag);\r\n  const { memberAffiliations } = useSelector(\r\n    (state) => state.memberAffiliation\r\n  );\r\n  const { memberHubs } = useSelector((state) => state.memberHub);\r\n  const { memberRanks } = useSelector((state) => state.memberRank);\r\n  const { memberAssignManagers } = useSelector(\r\n    (state) => state.memberAssignManager\r\n  );\r\n  const { memberHubCostSaless } = useSelector(\r\n    (state) => state.memberHubCostSales\r\n  );\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const { selectedMember } = useSelector((state) => state.member);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const initialValues = selectedMember ?? {\r\n    closing_year_month: currentPeriod.yearMonth,\r\n    name: \"\",\r\n    tag: \"\",\r\n    affiliation: \"\",\r\n    hub: \"\",\r\n    rank: \"\",\r\n    cost: 0,\r\n    sales: 0,\r\n    available: \"true\",\r\n  };\r\n\r\n  const validationSchema = Yup.object({\r\n    name: Yup.string().required(\"氏名を入力してください\"),\r\n    tag: Yup.string().required(\"メンバータグを設定してください\"),\r\n    affiliation: Yup.string().required(\"メンバー所属を設定してください\"),\r\n    hub: Yup.string().notRequired(),\r\n    rank: Yup.string().notRequired(),\r\n    assign_manager: Yup.string().notRequired(),\r\n    cost: Yup.number().required(\"標準原価を設定してください\"),\r\n    sales: Yup.number().required(\"標準売上を設定してください\"),\r\n    available: Yup.string().required(\"有効・無効を設定してください\"),\r\n  });\r\n\r\n  useFirestoreDoc({\r\n    shouldExecute: !!memberId,\r\n    query: () => loadFromMemberFromFirestore(memberId),\r\n    data: (item) => dispatch(selectMember(item)),\r\n    deps: [memberId, dispatch],\r\n  });\r\n\r\n  if (loading) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Menu secondary className=\"jmenu\">\r\n        <Menu.Item className={\"secondary_toolbar_title\"}>メンバー</Menu.Item>\r\n      </Menu>\r\n      <Formik\r\n        enableReinitialize={true}\r\n        validateOnBlur={false}\r\n        initialValues={initialValues}\r\n        validationSchema={validationSchema}\r\n        onSubmit={async (values, { setSubmitting }) => {\r\n          try {\r\n            setSubmitting(true);\r\n            memberId\r\n              ? dispatch(updateMember(values))\r\n              : dispatch(createMember(values));\r\n            setVisibleDetail(false);\r\n            history.push(\"/members\");\r\n            handleRefresh();\r\n          } catch (error) {\r\n            toast.error(error.message);\r\n          } finally {\r\n            setSubmitting(false);\r\n          }\r\n        }}>\r\n        {({\r\n          isSubmitting,\r\n          dirty,\r\n          isValid,\r\n          resetForm,\r\n          setFieldValue,\r\n          values,\r\n        }) => (\r\n          <Form className=\"ui form\">\r\n            <input type=\"hidden\" name=\"id\" />\r\n            <input type=\"hidden\" name=\"closing_year_month\" />\r\n            <MyTextInput label=\"氏名\" name=\"name\" placeholder=\"氏名\" />\r\n            <MySelectInput\r\n              label=\"メンバータグ\"\r\n              name=\"tag\"\r\n              options={memberTagOptionsFactory(memberTags)}\r\n            />\r\n            <MySelectInput\r\n              label=\"メンバー所属\"\r\n              name=\"affiliation\"\r\n              options={memberAffiliationOptionsFactory(memberAffiliations)}\r\n              search\r\n            />\r\n            <MySelectInput\r\n              label=\"メンバー拠点\"\r\n              name=\"hub\"\r\n              options={memberHubOptionsFactory(memberHubs)}\r\n              clearable\r\n              onChange={(e) => {\r\n                // onChangeを利用するとFormikに値が渡らないのでここで設定\r\n                // e.target.id はプルダウンのID値\r\n                setFieldValue(\"hub\", e.target.id);\r\n                // 拠点とランクを変更したときは、原価と売上に標準売上原価を設定\r\n                const { cost, sales } = getCostAndSales(\r\n                  memberHubCostSaless,\r\n                  e.target.id,\r\n                  values.rank\r\n                );\r\n                setFieldValue(\"cost\", cost);\r\n                setFieldValue(\"sales\", sales);\r\n              }}\r\n            />\r\n            <MySelectInput\r\n              label=\"メンバーランク\"\r\n              name=\"rank\"\r\n              options={memberRankOptionsFactory(memberRanks)}\r\n              clearable\r\n              onChange={(e) => {\r\n                // onChangeを利用するとFormikに値が渡らないのでここで設定\r\n                // e.target.id はプルダウンのID値\r\n                setFieldValue(\"rank\", e.target.id);\r\n                // 拠点とランクを変更したときは、原価と売上に標準売上原価を設定\r\n                const { cost, sales } = getCostAndSales(\r\n                  memberHubCostSaless,\r\n                  values.hub,\r\n                  e.target.id\r\n                );\r\n                setFieldValue(\"cost\", cost);\r\n                setFieldValue(\"sales\", sales);\r\n              }}\r\n            />\r\n            <MySelectInput\r\n              label=\"アサイン管理担当者\"\r\n              name=\"assign_manager\"\r\n              options={memberAssignManagerOptionsFactory(memberAssignManagers)}\r\n              search\r\n            />\r\n            <MyTextInput label=\"標準原価\" name=\"cost\" placeholder=\"標準原価\" />\r\n            <MyTextInput label=\"標準売上\" name=\"sales\" placeholder=\"標準売上\" />\r\n            <MySelectInput\r\n              label=\"有効・無効\"\r\n              name=\"available\"\r\n              options={availableOptions}\r\n            />\r\n\r\n            <Button\r\n              loading={isSubmitting}\r\n              disabled={!isValid || !dirty || isSubmitting}\r\n              type=\"submit\"\r\n              positive\r\n              content=\"保存\"\r\n            />\r\n            <Button\r\n              negative\r\n              content=\"キャンセル\"\r\n              as={Link}\r\n              to=\"/members\"\r\n              onClick={() => {\r\n                setVisibleDetail(false);\r\n                resetForm();\r\n              }}\r\n            />\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n}\r\n","import { availableOptions } from \"../../../app/options/availableOptions\";\r\nimport { memberAffiliationOptionsFactory } from \"../../../app/options/memberAffiliationOptionsFactory\";\r\nimport { memberAssignManagerOptionsFactory } from \"../../../app/options/memberAssignManagerOptionsFactory\";\r\nimport { memberHubOptionsFactory } from \"../../../app/options/memberHubOptionsFactory\";\r\nimport { memberRankOptionsFactory } from \"../../../app/options/memberRankOptionsFactory\";\r\nimport { memberTagOptionsFactory } from \"../../../app/options/memberTagOptionsFactory\";\r\n\r\nconst columnsOptions = (\r\n  memberTags,\r\n  memberAffiliations,\r\n  memberHubs,\r\n  memberRanks,\r\n  memberAssignManagers\r\n) => {\r\n  return [\r\n    {\r\n      name: \"href\",\r\n      title: \"リンク\",\r\n      type: \"html\",\r\n      width: \"100px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"name\",\r\n      title: \"氏名\",\r\n      type: \"text\",\r\n      width: \"120px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"tag\",\r\n      title: \"メンバータグ\",\r\n      type: \"dropdown\",\r\n      source: memberTagOptionsFactory(memberTags),\r\n      width: \"140px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"affiliation\",\r\n      title: \"メンバー所属\",\r\n      type: \"dropdown\",\r\n      source: memberAffiliationOptionsFactory(memberAffiliations),\r\n      width: \"250px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"hub\",\r\n      title: \"メンバー拠点\",\r\n      type: \"dropdown\",\r\n      source: memberHubOptionsFactory(memberHubs),\r\n      width: \"140px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"rank\",\r\n      title: \"メンバーランク\",\r\n      type: \"dropdown\",\r\n      source: memberRankOptionsFactory(memberRanks),\r\n      width: \"140px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"assign_manager\",\r\n      title: \"アサイン管理担当者\",\r\n      type: \"dropdown\",\r\n      source: memberAssignManagerOptionsFactory(memberAssignManagers),\r\n      width: \"140px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"cost\",\r\n      title: \"標準原価\",\r\n      type: \"numeric\",\r\n      width: \"120px\",\r\n      readOnly: true,\r\n      align: \"right\",\r\n      mask: \"[-]#,##\",\r\n    },\r\n    {\r\n      name: \"sales\",\r\n      title: \"標準売上\",\r\n      type: \"numeric\",\r\n      width: \"120px\",\r\n      readOnly: true,\r\n      align: \"right\",\r\n      mask: \"[-]#,##\",\r\n    },\r\n    {\r\n      name: \"available\",\r\n      title: \"有効・無効\",\r\n      type: \"dropdown\",\r\n      source: availableOptions,\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"created_at\",\r\n      title: \"作成日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"created_user\",\r\n      title: \"作成ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_at\",\r\n      title: \"更新日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_user\",\r\n      title: \"更新ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"id\",\r\n      title: \"ドキュメントID\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"closing_year_month\",\r\n      title: \"締め年月\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n  ];\r\n};\r\n\r\nexport default columnsOptions;\r\n","import React, { useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport SpreadSheet from \"../../../app/common/form/SpreadSheet\";\r\nimport columnsOptions from \"./columnsOptions\";\r\n\r\nexport default function MemberList({ refresh }) {\r\n  const { memberTags } = useSelector((state) => state.memberTag);\r\n  const { memberAffiliations } = useSelector(\r\n    (state) => state.memberAffiliation\r\n  );\r\n  const { memberHubs } = useSelector((state) => state.memberHub);\r\n  const { memberRanks } = useSelector((state) => state.memberRank);\r\n  const { memberAssignManagers } = useSelector(\r\n    (state) => state.memberAssignManager\r\n  );\r\n  const { members } = useSelector((state) => state.member);\r\n\r\n  const options = useRef({\r\n    columns: columnsOptions(\r\n      memberTags,\r\n      memberAffiliations,\r\n      memberHubs,\r\n      memberRanks,\r\n      memberAssignManagers\r\n    ),\r\n  });\r\n\r\n  return <SpreadSheet options={options} data={members} />;\r\n}\r\n","import cuid from \"cuid\";\r\nimport lo from \"lodash\";\r\nimport firebase from \"../config/firebase\";\r\nimport { addOrUpdateLastUpdateToFirestore } from \"./lastupdateService\";\r\n\r\nconst db = firebase.firestore();\r\nconst COLLECTION_NAME = \"member_hub\";\r\n\r\nexport function fetchMemberHubsFromFirestore(yyyyMM) {\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .where(\"closing_year_month\", \"==\", yyyyMM)\r\n    .orderBy(\"created_at\", \"asc\");\r\n}\r\n\r\nexport function loadFromMemberHubFromFirestore(memberHubId) {\r\n  return db.collection(COLLECTION_NAME).doc(memberHubId);\r\n}\r\n\r\nexport function addMemberHubToFirestore(memberHub) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    memberHub.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(memberHub.closing_year_month + \"-\" + cuid())\r\n    .set({\r\n      ...memberHub,\r\n      created_at: now,\r\n      created_user: user.email,\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n\r\nexport function updateMemberHubToFirestore(memberHub) {\r\n  const user = firebase.auth().currentUser;\r\n  const now = firebase.firestore.Timestamp.now();\r\n  addOrUpdateLastUpdateToFirestore(\r\n    COLLECTION_NAME,\r\n    memberHub.closing_year_month,\r\n    now\r\n  );\r\n  return db\r\n    .collection(COLLECTION_NAME)\r\n    .doc(memberHub.id)\r\n    .update({\r\n      ...lo.omit(memberHub, \"id\"),\r\n      updated_at: now,\r\n      updated_user: user.email,\r\n    });\r\n}\r\n","import {\r\n  asyncActionError,\r\n  asyncActionFinish,\r\n  asyncActionStart,\r\n} from \"../../../app/async/asyncReducer\";\r\nimport { dataFromSnapshot } from \"../../../app/firestore/firestoreService\";\r\nimport {\r\n  addMemberHubToFirestore,\r\n  fetchMemberHubsFromFirestore,\r\n  updateMemberHubToFirestore,\r\n} from \"../../../app/firestore/memberHubService\";\r\nimport { mustRefresh } from \"../../lastupdate/lastupdateReducer\";\r\n\r\nconst MEMBERHUB_CREATE = \"memberHub/create\";\r\nconst MEMBERHUB_UPDATE = \"memberHub/update\";\r\nconst MEMBERHUBS_FETCH = \"memberHub/fetch\";\r\nconst MEMBERHUB_LISTEN = \"memberHub/listen\";\r\nconst MEMBERHUB_SELECTED = \"memberHub/selected\";\r\n\r\nexport function selectMemberHub(memberHub) {\r\n  return {\r\n    type: MEMBERHUB_SELECTED,\r\n    payload: memberHub,\r\n  };\r\n}\r\n\r\nexport function createMemberHub(memberHub) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await addMemberHubToFirestore(memberHub);\r\n      dispatch({\r\n        type: MEMBERHUB_CREATE,\r\n        payload: memberHub,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function updateMemberHub(memberHub) {\r\n  return async function (dispatch) {\r\n    try {\r\n      dispatch(asyncActionStart());\r\n      await updateMemberHubToFirestore(memberHub);\r\n      dispatch({\r\n        type: MEMBERHUB_UPDATE,\r\n        payload: memberHub,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nexport function fetchMemberHubs(yyyyMM) {\r\n  return async function (dispatch, getState) {\r\n    try {\r\n      // 現在読み込まれているリストと最終更新日リストを比べて、最新のデータを読み込むかどうか判断する\r\n      const must = mustRefresh(\r\n        getState().memberHub.memberHubs,\r\n        getState().lastupdate.member_hub\r\n      );\r\n      if (!must.result) {\r\n        // 読み込む必要がない場合は現在のリストを利用する\r\n        return getState().memberHub.memberHubs;\r\n      }\r\n      dispatch(asyncActionStart());\r\n      const snapshot = fetchMemberHubsFromFirestore(yyyyMM).get();\r\n      const data = (await snapshot).docs.map((doc) => {\r\n        const ret = dataFromSnapshot(doc);\r\n        const href = `<a href=\"#${ret.id}\">編集</a>`;\r\n        return { href, ...ret };\r\n      });\r\n      dispatch({\r\n        type: MEMBERHUBS_FETCH,\r\n        payload: data,\r\n      });\r\n      dispatch(asyncActionFinish());\r\n      return data;\r\n    } catch (error) {\r\n      dispatch(asyncActionError(error));\r\n    }\r\n  };\r\n}\r\n\r\nconst initialState = {\r\n  memberHubs: [],\r\n  selectedMemberHub: null,\r\n};\r\n\r\nexport default function memberHubReducer(\r\n  state = initialState,\r\n  { type, payload }\r\n) {\r\n  switch (type) {\r\n    case MEMBERHUB_SELECTED:\r\n      return {\r\n        ...state,\r\n        selectedMemberHub: payload,\r\n      };\r\n    case MEMBERHUB_CREATE:\r\n      return state;\r\n    case MEMBERHUB_UPDATE:\r\n      return state;\r\n    case MEMBERHUBS_FETCH:\r\n      return {\r\n        ...state,\r\n        memberHubs: payload,\r\n      };\r\n    case MEMBERHUB_LISTEN:\r\n      return {\r\n        ...state,\r\n        selectedMemberHub: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Icon, Menu, Sidebar } from \"semantic-ui-react\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport MemberForm from \"./MemberForm\";\r\nimport MemberList from \"./MemberList\";\r\nimport { fetchLastUpdates } from \"../../lastupdate/lastupdateReducer\";\r\nimport { fetchMemberAffiliations } from \"../memberAffiliations/memberAffiliationReducer\";\r\nimport { fetchMemberAssignManagers } from \"../memberAssignManagers/memberAssignManagerReducer\";\r\nimport { fetchMemberHubCostSaless } from \"../memberHubCostSaless/memberHubCostSalesReducer\";\r\nimport { fetchMemberHubs } from \"../memberHubs/memberHubReducer\";\r\nimport { fetchMemberRanks } from \"../memberRanks/memberRankReducer\";\r\nimport { fetchMemberTags } from \"../memberTags/memberTagReducer\";\r\nimport { fetchMembers } from \"./memberReducer\";\r\n\r\nexport default function MemberDashboard({ location }) {\r\n  const memberId = location.hash?.replace(\"#\", \"\");\r\n  const [visibleDetail, setVisibleDetail] = useState(false);\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const dispatch = useDispatch();\r\n  const [refresh, setRefresh] = useState(0);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n\r\n  useEffect(() => {\r\n    if (memberId) {\r\n      setVisibleDetail(true);\r\n    }\r\n  }, [memberId]);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchLastUpdates(currentPeriod.yearMonth)).then(async () => {\r\n      await Promise.all([\r\n        dispatch(fetchMemberTags(currentPeriod.yearMonth)),\r\n        dispatch(fetchMemberAffiliations(currentPeriod.yearMonth)),\r\n        dispatch(fetchMemberHubs(currentPeriod.yearMonth)),\r\n        dispatch(fetchMemberRanks(currentPeriod.yearMonth)),\r\n        dispatch(fetchMemberAssignManagers(currentPeriod.yearMonth)),\r\n        dispatch(fetchMemberHubCostSaless(currentPeriod.yearMonth)),\r\n        dispatch(fetchMembers(currentPeriod.yearMonth)),\r\n      ]);\r\n    });\r\n  }, [currentPeriod.yearMonth, dispatch, refresh]);\r\n\r\n  const handleRefresh = () => {\r\n    setRefresh(refresh + 1);\r\n  };\r\n\r\n  if (loading && !visibleDetail) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Sidebar.Pushable>\r\n        <Sidebar\r\n          width=\"very wide\"\r\n          as={Menu}\r\n          animation=\"overlay\"\r\n          direction=\"right\"\r\n          vertical\r\n          visible={visibleDetail}>\r\n          <Menu.Item>\r\n            <MemberForm\r\n              memberId={memberId}\r\n              setVisibleDetail={setVisibleDetail}\r\n              handleRefresh={handleRefresh}\r\n            />\r\n          </Menu.Item>\r\n        </Sidebar>\r\n\r\n        <Sidebar.Pusher className=\"jpusher\" dimmed={visibleDetail}>\r\n          <Menu secondary className=\"jmenu\">\r\n            <Menu.Item className={\"secondary_toolbar_title\"}>\r\n              メンバー\r\n            </Menu.Item>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                handleRefresh();\r\n              }}>\r\n              <Icon name=\"refresh\" />\r\n              最新の状態に更新\r\n            </Menu.Item>\r\n            <Menu.Item onClick={() => setVisibleDetail(!visibleDetail)}>\r\n              <Icon name=\"edit\" />\r\n              新しいレコード\r\n            </Menu.Item>\r\n          </Menu>\r\n          <MemberList refresh={refresh} />\r\n        </Sidebar.Pusher>\r\n      </Sidebar.Pushable>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\r\nimport { Button, Menu } from \"semantic-ui-react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Formik, Form } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport MyTextInput from \"../../../app/common/form/MyTextInput\";\r\nimport MySelectInput from \"../../../app/common/form/MySelectInput\";\r\nimport { availableOptions } from \"../../../app/options/availableOptions\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\r\nimport { loadFromProjectFromFirestore } from \"../../../app/firestore/projectService\";\r\nimport { createProject, selectProject, updateProject } from \"./projectReducer\";\r\nimport { clientOptionsFactory } from \"../../../app/options/clientOptionsFactory\";\r\nimport { accDepartmentOptionsFactory } from \"../../../app/options/accDepartmentOptionsFactory\";\r\nimport { accSubjectOptionsFactory } from \"../../../app/options/accSubjectOptionsFactory\";\r\n\r\nexport default function ProjectForm({\r\n  projectId,\r\n  setVisibleDetail,\r\n  handleRefresh,\r\n}) {\r\n  const { clients } = useSelector((state) => state.client);\r\n  const { accDepartments } = useSelector((state) => state.accDepartment);\r\n  const { accSubjects } = useSelector((state) => state.accSubject);\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const { selectedProject } = useSelector((state) => state.project);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const initialValues = selectedProject ?? {\r\n    closing_year_month: currentPeriod.yearMonth,\r\n    name: \"\",\r\n    client: \"\",\r\n    accDepartment: \"\",\r\n    accSubject: \"\",\r\n    note: \"\",\r\n    available: \"true\",\r\n  };\r\n\r\n  const validationSchema = Yup.object({\r\n    name: Yup.string().required(\"案件名称を入力してください\"),\r\n    client: Yup.string().required(\"取引先を設定してください\"),\r\n    accDepartment: Yup.string().required(\"計上部門を設定してください\"),\r\n    accSubject: Yup.string().notRequired(\"費用科目\"),\r\n    note: Yup.string().notRequired(),\r\n    available: Yup.string().required(\"有効・無効を設定してください\"),\r\n  });\r\n\r\n  useFirestoreDoc({\r\n    shouldExecute: !!projectId,\r\n    query: () => loadFromProjectFromFirestore(projectId),\r\n    data: (item) => dispatch(selectProject(item)),\r\n    deps: [projectId, dispatch],\r\n  });\r\n\r\n  if (loading) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Menu secondary className=\"jmenu\">\r\n        <Menu.Item className={\"secondary_toolbar_title\"}>案件</Menu.Item>\r\n      </Menu>\r\n      <Formik\r\n        enableReinitialize={true}\r\n        validateOnBlur={false}\r\n        initialValues={initialValues}\r\n        validationSchema={validationSchema}\r\n        onSubmit={async (values, { setSubmitting }) => {\r\n          try {\r\n            setSubmitting(true);\r\n            projectId\r\n              ? dispatch(updateProject(values))\r\n              : dispatch(createProject(values));\r\n            setVisibleDetail(false);\r\n            history.push(\"/projects\");\r\n            handleRefresh();\r\n          } catch (error) {\r\n            toast.error(error.message);\r\n          } finally {\r\n            setSubmitting(false);\r\n          }\r\n        }}>\r\n        {({ isSubmitting, dirty, isValid, resetForm }) => (\r\n          <Form className=\"ui form\">\r\n            <input type=\"hidden\" name=\"id\" />\r\n            <input type=\"hidden\" name=\"closing_year_month\" />\r\n            <MyTextInput label=\"案件名称\" name=\"name\" placeholder=\"案件名称\" />\r\n            <MySelectInput\r\n              label=\"クライアント\"\r\n              name=\"client\"\r\n              options={clientOptionsFactory(clients)}\r\n              search\r\n            />\r\n            <MySelectInput\r\n              label=\"計上部門\"\r\n              name=\"accDepartment\"\r\n              options={accDepartmentOptionsFactory(accDepartments)}\r\n            />\r\n            <MySelectInput\r\n              label=\"費用科目\"\r\n              name=\"accSubject\"\r\n              options={accSubjectOptionsFactory(accSubjects)}\r\n            />\r\n            <MyTextInput label=\"備考\" name=\"note\" placeholder=\"備考\" />\r\n            <MySelectInput\r\n              label=\"有効・無効\"\r\n              name=\"available\"\r\n              options={availableOptions}\r\n            />\r\n\r\n            <Button\r\n              loading={isSubmitting}\r\n              disabled={!isValid || !dirty || isSubmitting}\r\n              type=\"submit\"\r\n              positive\r\n              content=\"保存\"\r\n            />\r\n            <Button\r\n              negative\r\n              content=\"キャンセル\"\r\n              as={Link}\r\n              to=\"/projects\"\r\n              onClick={() => {\r\n                setVisibleDetail(false);\r\n                resetForm();\r\n              }}\r\n            />\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n}\r\n","import { accDepartmentOptionsFactory } from \"../../../app/options/accDepartmentOptionsFactory\";\r\nimport { accSubjectOptionsFactory } from \"../../../app/options/accSubjectOptionsFactory\";\r\nimport { availableOptions } from \"../../../app/options/availableOptions\";\r\nimport { clientOptionsFactory } from \"../../../app/options/clientOptionsFactory\";\r\n\r\nconst columnsOptions = (clients, accDepartments, accSubjects) => {\r\n  return [\r\n    {\r\n      name: \"href\",\r\n      title: \"リンク\",\r\n      type: \"html\",\r\n      width: \"100px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"name\",\r\n      title: \"案件名\",\r\n      type: \"text\",\r\n      width: \"200px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"client\",\r\n      title: \"クライアント\",\r\n      type: \"dropdown\",\r\n      source: clientOptionsFactory(clients),\r\n      width: \"250px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"accDepartment\",\r\n      title: \"計上部門\",\r\n      type: \"dropdown\",\r\n      source: accDepartmentOptionsFactory(accDepartments),\r\n      width: \"140px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"accSubject\",\r\n      title: \"費用科目\",\r\n      type: \"dropdown\",\r\n      source: accSubjectOptionsFactory(accSubjects),\r\n      width: \"140px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"note\",\r\n      title: \"備考\",\r\n      type: \"text\",\r\n      width: \"200px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"available\",\r\n      title: \"有効・無効\",\r\n      type: \"dropdown\",\r\n      source: availableOptions,\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"created_at\",\r\n      title: \"作成日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"created_user\",\r\n      title: \"作成ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_at\",\r\n      title: \"更新日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_user\",\r\n      title: \"更新ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"id\",\r\n      title: \"ドキュメントID\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"closing_year_month\",\r\n      title: \"締め年月\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n  ];\r\n};\r\n\r\nexport default columnsOptions;\r\n","import React, { useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport SpreadSheet from \"../../../app/common/form/SpreadSheet\";\r\nimport columnsOptions from \"./columnsOptions\";\r\n\r\nexport default function ProjectList({ refresh }) {\r\n  const { clients } = useSelector((state) => state.client);\r\n  const { accDepartments } = useSelector((state) => state.accDepartment);\r\n  const { accSubjects } = useSelector((state) => state.accSubject);\r\n  const { projects } = useSelector((state) => state.project);\r\n\r\n  const options = useRef({\r\n    columns: columnsOptions(clients, accDepartments, accSubjects),\r\n  });\r\n\r\n  return <SpreadSheet options={options} data={projects} />;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Icon, Menu, Sidebar } from \"semantic-ui-react\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport { fetchLastUpdates } from \"../../lastupdate/lastupdateReducer\";\r\nimport { fetchAccDepartments } from \"../accDepartments/accDepartmentReducer\";\r\nimport { fetchAccSubjects } from \"../accSubjects/accSubjectReducer\";\r\nimport { fetchClients } from \"../clients/clientReducer\";\r\nimport ProjectForm from \"./ProjectForm\";\r\nimport ProjectList from \"./ProjectList\";\r\nimport { fetchProjects } from \"./projectReducer\";\r\n\r\nexport default function ProjectDashboard({ location }) {\r\n  const projectId = location.hash?.replace(\"#\", \"\");\r\n  const [visibleDetail, setVisibleDetail] = useState(false);\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const dispatch = useDispatch();\r\n  const [refresh, setRefresh] = useState(0);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n\r\n  useEffect(() => {\r\n    if (projectId) {\r\n      setVisibleDetail(true);\r\n    }\r\n  }, [projectId]);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchLastUpdates(currentPeriod.yearMonth)).then(async () => {\r\n      await Promise.all([\r\n        dispatch(fetchClients(currentPeriod.yearMonth)),\r\n        dispatch(fetchAccDepartments(currentPeriod.yearMonth)),\r\n        dispatch(fetchAccSubjects(currentPeriod.yearMonth)),\r\n        dispatch(fetchProjects(currentPeriod.yearMonth)),\r\n      ]);\r\n    });\r\n  }, [currentPeriod.yearMonth, dispatch, refresh]);\r\n\r\n  const handleRefresh = () => {\r\n    setRefresh(refresh + 1);\r\n  };\r\n\r\n  if (loading && !visibleDetail) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Sidebar.Pushable>\r\n        <Sidebar\r\n          width=\"very wide\"\r\n          as={Menu}\r\n          animation=\"overlay\"\r\n          direction=\"right\"\r\n          vertical\r\n          visible={visibleDetail}>\r\n          <Menu.Item>\r\n            <ProjectForm\r\n              projectId={projectId}\r\n              setVisibleDetail={setVisibleDetail}\r\n              handleRefresh={handleRefresh}\r\n            />\r\n          </Menu.Item>\r\n        </Sidebar>\r\n\r\n        <Sidebar.Pusher className=\"jpusher\" dimmed={visibleDetail}>\r\n          <Menu secondary className=\"jmenu\">\r\n            <Menu.Item className={\"secondary_toolbar_title\"}>案件</Menu.Item>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                handleRefresh();\r\n              }}>\r\n              <Icon name=\"refresh\" />\r\n              最新の状態に更新\r\n            </Menu.Item>\r\n            <Menu.Item onClick={() => setVisibleDetail(!visibleDetail)}>\r\n              <Icon name=\"edit\" />\r\n              新しいレコード\r\n            </Menu.Item>\r\n          </Menu>\r\n          <ProjectList refresh={refresh} />\r\n        </Sidebar.Pusher>\r\n      </Sidebar.Pushable>\r\n    </>\r\n  );\r\n}\r\n","export const useCostSalesOptions = [\r\n  {\r\n    key: \"true\",\r\n    id: \"true\",\r\n    text: \"利用する\",\r\n    name: \"利用する\",\r\n    value: \"true\",\r\n  },\r\n  {\r\n    key: \"false\",\r\n    id: \"false\",\r\n    text: \"利用しない（手入力）\",\r\n    name: \"利用しない（手入力）\",\r\n    value: \"false\",\r\n  },\r\n];\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\r\nimport { Button, Menu } from \"semantic-ui-react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Formik, Form } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport MyTextInput from \"../../../app/common/form/MyTextInput\";\r\nimport MySelectInput from \"../../../app/common/form/MySelectInput\";\r\nimport { useCostSalesOptions } from \"../../../app/options/useCostSalesOptions\";\r\nimport { availableOptions } from \"../../../app/options/availableOptions\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\r\nimport { loadFromMemberTagFromFirestore } from \"../../../app/firestore/memberTagService\";\r\nimport {\r\n  createMemberTag,\r\n  selectMemberTag,\r\n  updateMemberTag,\r\n} from \"./memberTagReducer\";\r\n\r\nexport default function MemberTagForm({\r\n  memberTagId,\r\n  setVisibleDetail,\r\n  handleRefresh,\r\n}) {\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const { selectedMemberTag } = useSelector((state) => state.memberTag);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const initialValues = selectedMemberTag ?? {\r\n    closing_year_month: currentPeriod.yearMonth,\r\n    name: \"\",\r\n    use_cost_sales: \"true\",\r\n    available: \"true\",\r\n  };\r\n\r\n  const validationSchema = Yup.object({\r\n    closing_year_month: Yup.string().required(\"締め年月を入力してください\"),\r\n    name: Yup.string().required(\"名称を入力してください\"),\r\n    use_cost_sales: Yup.string().required(\r\n      \"「標準売上原価利用可否」を設定してください\"\r\n    ),\r\n    available: Yup.string().required(\"有効・無効を設定してください\"),\r\n  });\r\n\r\n  useFirestoreDoc({\r\n    shouldExecute: !!memberTagId,\r\n    query: () => loadFromMemberTagFromFirestore(memberTagId),\r\n    data: (item) => dispatch(selectMemberTag(item)),\r\n    deps: [memberTagId, dispatch],\r\n  });\r\n\r\n  if (loading) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Menu secondary className=\"jmenu\">\r\n        <Menu.Item className={\"secondary_toolbar_title\"}>\r\n          メンバータグ\r\n        </Menu.Item>\r\n      </Menu>\r\n      <Formik\r\n        enableReinitialize={true}\r\n        validateOnBlur={false}\r\n        initialValues={initialValues}\r\n        validationSchema={validationSchema}\r\n        onSubmit={async (values, { setSubmitting }) => {\r\n          try {\r\n            setSubmitting(true);\r\n            memberTagId\r\n              ? dispatch(updateMemberTag(values))\r\n              : dispatch(createMemberTag(values));\r\n            setVisibleDetail(false);\r\n            history.push(\"/membertags\");\r\n            handleRefresh();\r\n          } catch (error) {\r\n            toast.error(error.message);\r\n          } finally {\r\n            setSubmitting(false);\r\n          }\r\n        }}>\r\n        {({ isSubmitting, dirty, isValid, resetForm }) => (\r\n          <Form className=\"ui form\">\r\n            <input type=\"hidden\" name=\"id\" />\r\n            <input type=\"hidden\" name=\"closing_year_month\" />\r\n            <MyTextInput label=\"タグ名称\" name=\"name\" placeholder=\"タグ名称\" />\r\n            <MySelectInput\r\n              label=\"標準売上原価利用可否\"\r\n              name=\"use_cost_sales\"\r\n              options={useCostSalesOptions}\r\n            />\r\n            <MySelectInput\r\n              label=\"有効・無効\"\r\n              name=\"available\"\r\n              options={availableOptions}\r\n            />\r\n\r\n            <Button\r\n              loading={isSubmitting}\r\n              disabled={!isValid || !dirty || isSubmitting}\r\n              type=\"submit\"\r\n              positive\r\n              content=\"保存\"\r\n            />\r\n            <Button\r\n              negative\r\n              content=\"キャンセル\"\r\n              as={Link}\r\n              to=\"/membertags\"\r\n              onClick={() => {\r\n                setVisibleDetail(false);\r\n                resetForm();\r\n              }}\r\n            />\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n}\r\n","import { useCostSalesOptions } from \"../../../app/options/useCostSalesOptions\";\r\nimport { availableOptions } from \"../../../app/options/availableOptions\";\r\n\r\nconst columnsOptions = () => {\r\n  return [\r\n    {\r\n      name: \"href\",\r\n      title: \"リンク\",\r\n      type: \"html\",\r\n      width: \"100px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"name\",\r\n      title: \"タグ名称\",\r\n      type: \"text\",\r\n      width: \"200px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"use_cost_sales\",\r\n      title: \"標準売上原価利用可否\",\r\n      type: \"dropdown\",\r\n      source: useCostSalesOptions,\r\n      width: \"200px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"available\",\r\n      title: \"有効・無効\",\r\n      type: \"dropdown\",\r\n      source: availableOptions,\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"created_at\",\r\n      title: \"作成日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"created_user\",\r\n      title: \"作成ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_at\",\r\n      title: \"更新日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_user\",\r\n      title: \"更新ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"id\",\r\n      title: \"ドキュメントID\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"closing_year_month\",\r\n      title: \"締め年月\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n  ];\r\n};\r\n\r\nexport default columnsOptions;\r\n","import React, { useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport SpreadSheet from \"../../../app/common/form/SpreadSheet\";\r\nimport columnsOptions from \"./columnsOptions\";\r\n\r\nexport default function MemberTagList({ refresh }) {\r\n  const { memberTags } = useSelector((state) => state.memberTag);\r\n\r\n  const options = useRef({\r\n    columns: columnsOptions(),\r\n  });\r\n\r\n  return <SpreadSheet options={options} data={memberTags} />;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Icon, Menu, Sidebar } from \"semantic-ui-react\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport { fetchLastUpdates } from \"../../lastupdate/lastupdateReducer\";\r\nimport MemberTagForm from \"./MemberTagForm\";\r\nimport MemberTagList from \"./MemberTagList\";\r\nimport { fetchMemberTags } from \"./memberTagReducer\";\r\n\r\nexport default function MemberTagDashboard({ location }) {\r\n  const memberTagId = location.hash?.replace(\"#\", \"\");\r\n  const [visibleDetail, setVisibleDetail] = useState(false);\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const dispatch = useDispatch();\r\n  const [refresh, setRefresh] = useState(0);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n\r\n  useEffect(() => {\r\n    if (memberTagId) {\r\n      setVisibleDetail(true);\r\n    }\r\n  }, [memberTagId]);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchLastUpdates(currentPeriod.yearMonth)).then(async () => {\r\n      await Promise.all([dispatch(fetchMemberTags(currentPeriod.yearMonth))]);\r\n    });\r\n  }, [currentPeriod.yearMonth, dispatch, refresh]);\r\n\r\n  const handleRefresh = () => {\r\n    setRefresh(refresh + 1);\r\n  };\r\n\r\n  if (loading && !visibleDetail) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Sidebar.Pushable>\r\n        <Sidebar\r\n          width=\"wide\"\r\n          as={Menu}\r\n          animation=\"overlay\"\r\n          direction=\"right\"\r\n          vertical\r\n          visible={visibleDetail}>\r\n          <Menu.Item>\r\n            <MemberTagForm\r\n              memberTagId={memberTagId}\r\n              setVisibleDetail={setVisibleDetail}\r\n              handleRefresh={handleRefresh}\r\n            />\r\n          </Menu.Item>\r\n        </Sidebar>\r\n\r\n        <Sidebar.Pusher className=\"jpusher\" dimmed={visibleDetail}>\r\n          <Menu secondary className=\"jmenu\">\r\n            <Menu.Item className={\"secondary_toolbar_title\"}>\r\n              メンバータグ\r\n            </Menu.Item>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                handleRefresh();\r\n              }}>\r\n              <Icon name=\"refresh\" />\r\n              最新の状態に更新\r\n            </Menu.Item>\r\n            <Menu.Item onClick={() => setVisibleDetail(!visibleDetail)}>\r\n              <Icon name=\"edit\" />\r\n              新しいレコード\r\n            </Menu.Item>\r\n          </Menu>\r\n          <MemberTagList refresh={refresh} />\r\n        </Sidebar.Pusher>\r\n      </Sidebar.Pushable>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\r\nimport { Button, Menu } from \"semantic-ui-react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Formik, Form } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport MyTextInput from \"../../../app/common/form/MyTextInput\";\r\nimport MySelectInput from \"../../../app/common/form/MySelectInput\";\r\nimport { availableOptions } from \"../../../app/options/availableOptions\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\r\nimport { loadFromMemberRankFromFirestore } from \"../../../app/firestore/memberRankService\";\r\nimport {\r\n  createMemberRank,\r\n  selectMemberRank,\r\n  updateMemberRank,\r\n} from \"./memberRankReducer\";\r\n\r\nexport default function MemberRankForm({\r\n  memberRankId,\r\n  setVisibleDetail,\r\n  handleRefresh,\r\n}) {\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const { selectedMemberRank } = useSelector((state) => state.memberRank);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const initialValues = selectedMemberRank ?? {\r\n    closing_year_month: currentPeriod.yearMonth,\r\n    name: \"\",\r\n    available: \"true\",\r\n  };\r\n\r\n  const validationSchema = Yup.object({\r\n    name: Yup.string().required(\"名称を入力してください\"),\r\n    available: Yup.string().required(\"有効・無効を設定してください\"),\r\n  });\r\n\r\n  useFirestoreDoc({\r\n    shouldExecute: !!memberRankId,\r\n    query: () => loadFromMemberRankFromFirestore(memberRankId),\r\n    data: (item) => dispatch(selectMemberRank(item)),\r\n    deps: [memberRankId, dispatch],\r\n  });\r\n\r\n  if (loading) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Menu secondary className=\"jmenu\">\r\n        <Menu.Item className={\"secondary_toolbar_title\"}>\r\n          メンバーランク\r\n        </Menu.Item>\r\n      </Menu>\r\n      <Formik\r\n        enableReinitialize={true}\r\n        validateOnBlur={false}\r\n        initialValues={initialValues}\r\n        validationSchema={validationSchema}\r\n        onSubmit={async (values, { setSubmitting }) => {\r\n          try {\r\n            setSubmitting(true);\r\n            memberRankId\r\n              ? dispatch(updateMemberRank(values))\r\n              : dispatch(createMemberRank(values));\r\n            setVisibleDetail(false);\r\n            history.push(\"/memberranks\");\r\n            handleRefresh();\r\n          } catch (error) {\r\n            toast.error(error.message);\r\n          } finally {\r\n            setSubmitting(false);\r\n          }\r\n        }}>\r\n        {({ isSubmitting, dirty, isValid, resetForm }) => (\r\n          <Form className=\"ui form\">\r\n            <input type=\"hidden\" name=\"id\" />\r\n            <input type=\"hidden\" name=\"closing_year_month\" />\r\n            <MyTextInput label=\"名称\" name=\"name\" placeholder=\"名称\" />\r\n            <MySelectInput\r\n              label=\"有効・無効\"\r\n              name=\"available\"\r\n              options={availableOptions}\r\n            />\r\n\r\n            <Button\r\n              loading={isSubmitting}\r\n              disabled={!isValid || !dirty || isSubmitting}\r\n              type=\"submit\"\r\n              positive\r\n              content=\"保存\"\r\n            />\r\n            <Button\r\n              negative\r\n              content=\"キャンセル\"\r\n              as={Link}\r\n              to=\"/memberranks\"\r\n              onClick={() => {\r\n                setVisibleDetail(false);\r\n                resetForm();\r\n              }}\r\n            />\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n}\r\n","import { availableOptions } from \"../../../app/options/availableOptions\";\r\n\r\nconst columnsOptions = () => {\r\n  return [\r\n    {\r\n      name: \"href\",\r\n      title: \"リンク\",\r\n      type: \"html\",\r\n      width: \"100px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"name\",\r\n      title: \"ランク名称\",\r\n      type: \"text\",\r\n      width: \"200px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"available\",\r\n      title: \"有効・無効\",\r\n      type: \"dropdown\",\r\n      source: availableOptions,\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"created_at\",\r\n      title: \"作成日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"created_user\",\r\n      title: \"作成ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_at\",\r\n      title: \"更新日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_user\",\r\n      title: \"更新ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"id\",\r\n      title: \"ドキュメントID\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"closing_year_month\",\r\n      title: \"締め年月\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n  ];\r\n};\r\n\r\nexport default columnsOptions;\r\n","import React, { useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport SpreadSheet from \"../../../app/common/form/SpreadSheet\";\r\nimport columnsOptions from \"./columnsOptions\";\r\n\r\nexport default function MemberRankList({ refresh }) {\r\n  const { memberRanks } = useSelector((state) => state.memberRank);\r\n\r\n  const options = useRef({\r\n    columns: columnsOptions(),\r\n  });\r\n\r\n  return <SpreadSheet options={options} data={memberRanks} />;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Icon, Menu, Sidebar } from \"semantic-ui-react\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport { fetchLastUpdates } from \"../../lastupdate/lastupdateReducer\";\r\nimport MemberRankForm from \"./MemberRankForm\";\r\nimport MemberRankList from \"./MemberRankList\";\r\nimport { fetchMemberRanks } from \"./memberRankReducer\";\r\n\r\nexport default function MemberRankDashboard({ location }) {\r\n  const memberRankId = location.hash?.replace(\"#\", \"\");\r\n  const [visibleDetail, setVisibleDetail] = useState(false);\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const dispatch = useDispatch();\r\n  const [refresh, setRefresh] = useState(0);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n\r\n  useEffect(() => {\r\n    if (memberRankId) {\r\n      setVisibleDetail(true);\r\n    }\r\n  }, [memberRankId]);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchLastUpdates(currentPeriod.yearMonth)).then(async () => {\r\n      await Promise.all([dispatch(fetchMemberRanks(currentPeriod.yearMonth))]);\r\n    });\r\n  }, [currentPeriod.yearMonth, dispatch, refresh]);\r\n\r\n  const handleRefresh = () => {\r\n    setRefresh(refresh + 1);\r\n  };\r\n\r\n  if (loading && !visibleDetail) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Sidebar.Pushable>\r\n        <Sidebar\r\n          width=\"wide\"\r\n          as={Menu}\r\n          animation=\"overlay\"\r\n          direction=\"right\"\r\n          vertical\r\n          visible={visibleDetail}>\r\n          <Menu.Item>\r\n            <MemberRankForm\r\n              memberRankId={memberRankId}\r\n              setVisibleDetail={setVisibleDetail}\r\n              handleRefresh={handleRefresh}\r\n            />\r\n          </Menu.Item>\r\n        </Sidebar>\r\n\r\n        <Sidebar.Pusher className=\"jpusher\" dimmed={visibleDetail}>\r\n          <Menu secondary className=\"jmenu\">\r\n            <Menu.Item className={\"secondary_toolbar_title\"}>\r\n              メンバーランク\r\n            </Menu.Item>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                handleRefresh();\r\n              }}>\r\n              <Icon name=\"refresh\" />\r\n              最新の状態に更新\r\n            </Menu.Item>\r\n            <Menu.Item onClick={() => setVisibleDetail(!visibleDetail)}>\r\n              <Icon name=\"edit\" />\r\n              新しいレコード\r\n            </Menu.Item>\r\n          </Menu>\r\n          <MemberRankList refresh={refresh} />\r\n        </Sidebar.Pusher>\r\n      </Sidebar.Pushable>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\r\nimport { Button, Menu } from \"semantic-ui-react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Formik, Form } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport MyTextInput from \"../../../app/common/form/MyTextInput\";\r\nimport MySelectInput from \"../../../app/common/form/MySelectInput\";\r\nimport { availableOptions } from \"../../../app/options/availableOptions\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\r\nimport { loadFromMemberAffiliationFromFirestore } from \"../../../app/firestore/memberAffiliationService\";\r\nimport {\r\n  createMemberAffiliation,\r\n  selectMemberAffiliation,\r\n  updateMemberAffiliation,\r\n} from \"./memberAffiliationReducer\";\r\n\r\nexport default function MemberAffiliationForm({\r\n  memberAffiliationId,\r\n  setVisibleDetail,\r\n  handleRefresh,\r\n}) {\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const { selectedMemberAffiliation } = useSelector(\r\n    (state) => state.memberAffiliation\r\n  );\r\n  const { loading, error } = useSelector((state) => state.async);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const initialValues = selectedMemberAffiliation ?? {\r\n    closing_year_month: currentPeriod.yearMonth,\r\n    name: \"\",\r\n    available: \"true\",\r\n  };\r\n\r\n  const validationSchema = Yup.object({\r\n    name: Yup.string().required(\"拠点名称を入力してください\"),\r\n    available: Yup.string().required(\"有効・無効を設定してください\"),\r\n  });\r\n\r\n  useFirestoreDoc({\r\n    shouldExecute: !!memberAffiliationId,\r\n    query: () => loadFromMemberAffiliationFromFirestore(memberAffiliationId),\r\n    data: (item) => dispatch(selectMemberAffiliation(item)),\r\n    deps: [memberAffiliationId, dispatch],\r\n  });\r\n\r\n  if (loading) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Menu secondary className=\"jmenu\">\r\n        <Menu.Item className={\"secondary_toolbar_title\"}>\r\n          メンバー所属\r\n        </Menu.Item>\r\n      </Menu>\r\n      <Formik\r\n        enableReinitialize={true}\r\n        validateOnBlur={false}\r\n        initialValues={initialValues}\r\n        validationSchema={validationSchema}\r\n        onSubmit={async (values, { setSubmitting }) => {\r\n          try {\r\n            setSubmitting(true);\r\n            memberAffiliationId\r\n              ? dispatch(updateMemberAffiliation(values))\r\n              : dispatch(createMemberAffiliation(values));\r\n            setVisibleDetail(false);\r\n            history.push(\"/memberaffiliations\");\r\n            handleRefresh();\r\n          } catch (error) {\r\n            toast.error(error.message);\r\n          } finally {\r\n            setSubmitting(false);\r\n          }\r\n        }}>\r\n        {({ isSubmitting, dirty, isValid, resetForm }) => (\r\n          <Form className=\"ui form\">\r\n            <input type=\"hidden\" name=\"id\" />\r\n            <input type=\"hidden\" name=\"closing_year_month\" />\r\n            <MyTextInput label=\"所属名称\" name=\"name\" placeholder=\"所属名称\" />\r\n            <MySelectInput\r\n              label=\"有効・無効\"\r\n              name=\"available\"\r\n              options={availableOptions}\r\n            />\r\n\r\n            <Button\r\n              loading={isSubmitting}\r\n              disabled={!isValid || !dirty || isSubmitting}\r\n              type=\"submit\"\r\n              positive\r\n              content=\"保存\"\r\n            />\r\n            <Button\r\n              negative\r\n              content=\"キャンセル\"\r\n              as={Link}\r\n              to=\"/memberaffiliations\"\r\n              onClick={() => {\r\n                setVisibleDetail(false);\r\n                resetForm();\r\n              }}\r\n            />\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n}\r\n","import { availableOptions } from \"../../../app/options/availableOptions\";\r\n\r\nconst columnsOptions = () => {\r\n  return [\r\n    {\r\n      name: \"href\",\r\n      title: \"リンク\",\r\n      type: \"html\",\r\n      width: \"100px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"name\",\r\n      title: \"所属名称\",\r\n      type: \"text\",\r\n      width: \"300px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"available\",\r\n      title: \"有効・無効\",\r\n      type: \"dropdown\",\r\n      source: availableOptions,\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"created_at\",\r\n      title: \"作成日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"created_user\",\r\n      title: \"作成ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_at\",\r\n      title: \"更新日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_user\",\r\n      title: \"更新ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"id\",\r\n      title: \"ドキュメントID\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"closing_year_month\",\r\n      title: \"締め年月\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n  ];\r\n};\r\n\r\nexport default columnsOptions;\r\n","import React, { useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport SpreadSheet from \"../../../app/common/form/SpreadSheet\";\r\nimport columnsOptions from \"./columnsOptions\";\r\n\r\nexport default function MemberAffiliationList({ refresh }) {\r\n  const { memberAffiliations } = useSelector(\r\n    (state) => state.memberAffiliation\r\n  );\r\n\r\n  const options = useRef({\r\n    columns: columnsOptions(),\r\n  });\r\n\r\n  return <SpreadSheet options={options} data={memberAffiliations} />;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Icon, Menu, Sidebar } from \"semantic-ui-react\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport { fetchLastUpdates } from \"../../lastupdate/lastupdateReducer\";\r\nimport MemberAffiliationForm from \"./MemberAffiliationForm\";\r\nimport MemberAffiliationList from \"./MemberAffiliationList\";\r\nimport { fetchMemberAffiliations } from \"./memberAffiliationReducer\";\r\n\r\nexport default function MemberAffiliationDashboard({ location }) {\r\n  const memberAffiliationId = location.hash?.replace(\"#\", \"\");\r\n  const [visibleDetail, setVisibleDetail] = useState(false);\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const dispatch = useDispatch();\r\n  const [refresh, setRefresh] = useState(0);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n\r\n  useEffect(() => {\r\n    if (memberAffiliationId) {\r\n      setVisibleDetail(true);\r\n    }\r\n  }, [memberAffiliationId]);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchLastUpdates(currentPeriod.yearMonth)).then(async () => {\r\n      await Promise.all([\r\n        dispatch(fetchMemberAffiliations(currentPeriod.yearMonth)),\r\n      ]);\r\n    });\r\n  }, [currentPeriod.yearMonth, dispatch, refresh]);\r\n\r\n  const handleRefresh = () => {\r\n    setRefresh(refresh + 1);\r\n  };\r\n\r\n  if (loading && !visibleDetail) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Sidebar.Pushable>\r\n        <Sidebar\r\n          width=\"wide\"\r\n          as={Menu}\r\n          animation=\"overlay\"\r\n          direction=\"right\"\r\n          vertical\r\n          visible={visibleDetail}>\r\n          <Menu.Item>\r\n            <MemberAffiliationForm\r\n              memberAffiliationId={memberAffiliationId}\r\n              setVisibleDetail={setVisibleDetail}\r\n              handleRefresh={handleRefresh}\r\n            />\r\n          </Menu.Item>\r\n        </Sidebar>\r\n\r\n        <Sidebar.Pusher className=\"jpusher\" dimmed={visibleDetail}>\r\n          <Menu secondary className=\"jmenu\">\r\n            <Menu.Item className={\"secondary_toolbar_title\"}>\r\n              メンバー所属\r\n            </Menu.Item>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                handleRefresh();\r\n              }}>\r\n              <Icon name=\"refresh\" />\r\n              最新の状態に更新\r\n            </Menu.Item>\r\n            <Menu.Item onClick={() => setVisibleDetail(!visibleDetail)}>\r\n              <Icon name=\"edit\" />\r\n              新しいレコード\r\n            </Menu.Item>\r\n          </Menu>\r\n          <MemberAffiliationList refresh={refresh} />\r\n        </Sidebar.Pusher>\r\n      </Sidebar.Pushable>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\r\nimport { Button, Menu } from \"semantic-ui-react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Formik, Form } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport MyTextInput from \"../../../app/common/form/MyTextInput\";\r\nimport MySelectInput from \"../../../app/common/form/MySelectInput\";\r\nimport { availableOptions } from \"../../../app/options/availableOptions\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\r\nimport { loadFromMemberHubFromFirestore } from \"../../../app/firestore/memberHubService\";\r\nimport {\r\n  createMemberHub,\r\n  selectMemberHub,\r\n  updateMemberHub,\r\n} from \"./memberHubReducer\";\r\n\r\nexport default function MemberHubForm({\r\n  memberHubId,\r\n  setVisibleDetail,\r\n  handleRefresh,\r\n}) {\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const { selectedMemberHub } = useSelector((state) => state.memberHub);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const initialValues = selectedMemberHub ?? {\r\n    closing_year_month: currentPeriod.yearMonth,\r\n    name: \"\",\r\n    available: \"true\",\r\n  };\r\n\r\n  const validationSchema = Yup.object({\r\n    name: Yup.string().required(\"拠点名称を入力してください\"),\r\n    available: Yup.string().required(\"有効・無効を設定してください\"),\r\n  });\r\n\r\n  useFirestoreDoc({\r\n    shouldExecute: !!memberHubId,\r\n    query: () => loadFromMemberHubFromFirestore(memberHubId),\r\n    data: (item) => dispatch(selectMemberHub(item)),\r\n    deps: [memberHubId, dispatch],\r\n  });\r\n\r\n  if (loading) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Menu secondary className=\"jmenu\">\r\n        <Menu.Item className={\"secondary_toolbar_title\"}>\r\n          メンバー拠点\r\n        </Menu.Item>\r\n      </Menu>\r\n      <Formik\r\n        enableReinitialize={true}\r\n        validateOnBlur={false}\r\n        initialValues={initialValues}\r\n        validationSchema={validationSchema}\r\n        onSubmit={async (values, { setSubmitting }) => {\r\n          try {\r\n            setSubmitting(true);\r\n            memberHubId\r\n              ? dispatch(updateMemberHub(values))\r\n              : dispatch(createMemberHub(values));\r\n            setVisibleDetail(false);\r\n            history.push(\"/memberhubs\");\r\n            handleRefresh();\r\n          } catch (error) {\r\n            toast.error(error.message);\r\n          } finally {\r\n            setSubmitting(false);\r\n          }\r\n        }}>\r\n        {({ isSubmitting, dirty, isValid, resetForm }) => (\r\n          <Form className=\"ui form\">\r\n            <input type=\"hidden\" name=\"id\" />\r\n            <input type=\"hidden\" name=\"closing_year_month\" />\r\n            <MyTextInput label=\"拠点名称\" name=\"name\" placeholder=\"拠点名称\" />\r\n            <MySelectInput\r\n              label=\"有効・無効\"\r\n              name=\"available\"\r\n              options={availableOptions}\r\n            />\r\n\r\n            <Button\r\n              loading={isSubmitting}\r\n              disabled={!isValid || !dirty || isSubmitting}\r\n              type=\"submit\"\r\n              positive\r\n              content=\"保存\"\r\n            />\r\n            <Button\r\n              negative\r\n              content=\"キャンセル\"\r\n              as={Link}\r\n              to=\"/memberhubs\"\r\n              onClick={() => {\r\n                setVisibleDetail(false);\r\n                resetForm();\r\n              }}\r\n            />\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n}\r\n","import { availableOptions } from \"../../../app/options/availableOptions\";\r\n\r\nconst columnsOptions = () => {\r\n  return [\r\n    {\r\n      name: \"href\",\r\n      title: \"リンク\",\r\n      type: \"html\",\r\n      width: \"100px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"name\",\r\n      title: \"拠点名称\",\r\n      type: \"text\",\r\n      width: \"200px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"available\",\r\n      title: \"有効・無効\",\r\n      type: \"dropdown\",\r\n      source: availableOptions,\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"created_at\",\r\n      title: \"作成日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"created_user\",\r\n      title: \"作成ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_at\",\r\n      title: \"更新日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_user\",\r\n      title: \"更新ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"id\",\r\n      title: \"ドキュメントID\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"closing_year_month\",\r\n      title: \"締め年月\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n  ];\r\n};\r\n\r\nexport default columnsOptions;\r\n","import React, { useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport SpreadSheet from \"../../../app/common/form/SpreadSheet\";\r\nimport columnsOptions from \"./columnsOptions\";\r\n\r\nexport default function MemberHubList({ refresh }) {\r\n  const { memberHubs } = useSelector((state) => state.memberHub);\r\n\r\n  const options = useRef({\r\n    columns: columnsOptions(),\r\n  });\r\n\r\n  return <SpreadSheet options={options} data={memberHubs} />;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Icon, Menu, Sidebar } from \"semantic-ui-react\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport { fetchLastUpdates } from \"../../lastupdate/lastupdateReducer\";\r\nimport MemberHubForm from \"./MemberHubForm\";\r\nimport MemberHubList from \"./MemberHubList\";\r\nimport { fetchMemberHubs } from \"./memberHubReducer\";\r\n\r\nexport default function MemberHubDashboard({ location }) {\r\n  const memberHubId = location.hash?.replace(\"#\", \"\");\r\n  const [visibleDetail, setVisibleDetail] = useState(false);\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const dispatch = useDispatch();\r\n  const [refresh, setRefresh] = useState(0);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n\r\n  useEffect(() => {\r\n    if (memberHubId) {\r\n      setVisibleDetail(true);\r\n    }\r\n  }, [memberHubId]);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchLastUpdates(currentPeriod.yearMonth)).then(async () => {\r\n      await Promise.all([dispatch(fetchMemberHubs(currentPeriod.yearMonth))]);\r\n    });\r\n  }, [currentPeriod.yearMonth, dispatch, refresh]);\r\n\r\n  const handleRefresh = () => {\r\n    setRefresh(refresh + 1);\r\n  };\r\n\r\n  if (loading && !visibleDetail) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Sidebar.Pushable>\r\n        <Sidebar\r\n          width=\"wide\"\r\n          as={Menu}\r\n          animation=\"overlay\"\r\n          direction=\"right\"\r\n          vertical\r\n          visible={visibleDetail}>\r\n          <Menu.Item>\r\n            <MemberHubForm\r\n              memberHubId={memberHubId}\r\n              setVisibleDetail={setVisibleDetail}\r\n              handleRefresh={handleRefresh}\r\n            />\r\n          </Menu.Item>\r\n        </Sidebar>\r\n\r\n        <Sidebar.Pusher className=\"jpusher\" dimmed={visibleDetail}>\r\n          <Menu secondary className=\"jmenu\">\r\n            <Menu.Item className={\"secondary_toolbar_title\"}>\r\n              メンバー拠点\r\n            </Menu.Item>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                handleRefresh();\r\n              }}>\r\n              <Icon name=\"refresh\" />\r\n              最新の状態に更新\r\n            </Menu.Item>\r\n            <Menu.Item onClick={() => setVisibleDetail(!visibleDetail)}>\r\n              <Icon name=\"edit\" />\r\n              新しいレコード\r\n            </Menu.Item>\r\n          </Menu>\r\n          <MemberHubList refresh={refresh} />\r\n        </Sidebar.Pusher>\r\n      </Sidebar.Pushable>\r\n    </>\r\n  );\r\n}\r\n","export const hubCostSalesKindOptions = [\r\n  { key: \"1\", id: \"1\", text: \"原価\", name: \"原価\", value: \"1\" },\r\n  { key: \"2\", id: \"2\", text: \"売上\", name: \"売上\", value: \"2\" },\r\n];\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\r\nimport { Button, Menu } from \"semantic-ui-react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Formik, Form } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport MyTextInput from \"../../../app/common/form/MyTextInput\";\r\nimport MySelectInput from \"../../../app/common/form/MySelectInput\";\r\nimport { availableOptions } from \"../../../app/options/availableOptions\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\r\nimport { loadFromMemberHubCostSalesFromFirestore } from \"../../../app/firestore/memberHubCostSalesService\";\r\nimport {\r\n  createMemberHubCostSales,\r\n  selectMemberHubCostSales,\r\n  updateMemberHubCostSales,\r\n} from \"./memberHubCostSalesReducer\";\r\nimport { memberHubOptionsFactory } from \"../../../app/options/memberHubOptionsFactory\";\r\nimport { hubCostSalesKindOptions } from \"../../../app/options/hubCostSalesKindOptions\";\r\nimport { memberRankOptionsFactory } from \"../../../app/options/memberRankOptionsFactory\";\r\n\r\nexport default function MemberHubCostSalesForm({\r\n  memberHubCostSalesId,\r\n  setVisibleDetail,\r\n  handleRefresh,\r\n}) {\r\n  const { memberHubs } = useSelector((state) => state.memberHub);\r\n  const { memberRanks } = useSelector((state) => state.memberRank);\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const { selectedMemberHubCostSales } = useSelector(\r\n    (state) => state.memberHubCostSales\r\n  );\r\n  const { loading, error } = useSelector((state) => state.async);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const initialValues = selectedMemberHubCostSales ?? {\r\n    closing_year_month: currentPeriod.yearMonth,\r\n    cost_sales_kind: \"\",\r\n    hub: \"\",\r\n    rank: \"\",\r\n    cost_sales: 0,\r\n    available: \"true\",\r\n  };\r\n\r\n  const validationSchema = Yup.object({\r\n    cost_sales_kind: Yup.string().required(\"売上・原価区分を設定してください\"),\r\n    hub: Yup.string().required(\"拠点を設定してください\"),\r\n    rank: Yup.string().required(\"ランクを設定してください\"),\r\n    cost_sales: Yup.number()\r\n      .required(\"金額を設定してください\")\r\n      .typeError(\"数値を入力してください\"),\r\n    available: Yup.string().required(\"有効・無効を設定してください\"),\r\n  });\r\n\r\n  useFirestoreDoc({\r\n    shouldExecute: !!memberHubCostSalesId,\r\n    query: () => loadFromMemberHubCostSalesFromFirestore(memberHubCostSalesId),\r\n    data: (item) => dispatch(selectMemberHubCostSales(item)),\r\n    deps: [memberHubCostSalesId, dispatch],\r\n  });\r\n\r\n  if (loading) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Menu secondary className=\"jmenu\">\r\n        <Menu.Item className={\"secondary_toolbar_title\"}>\r\n          メンバー拠点別標準原価売上表\r\n        </Menu.Item>\r\n      </Menu>\r\n      <Formik\r\n        enableReinitialize={true}\r\n        validateOnBlur={false}\r\n        initialValues={initialValues}\r\n        validationSchema={validationSchema}\r\n        onSubmit={async (values, { setSubmitting }) => {\r\n          try {\r\n            setSubmitting(true);\r\n            memberHubCostSalesId\r\n              ? dispatch(updateMemberHubCostSales(values))\r\n              : dispatch(createMemberHubCostSales(values));\r\n            setVisibleDetail(false);\r\n            history.push(\"/memberhubcostsaless\");\r\n            handleRefresh();\r\n          } catch (error) {\r\n            toast.error(error.message);\r\n          } finally {\r\n            setSubmitting(false);\r\n          }\r\n        }}>\r\n        {({ isSubmitting, dirty, isValid, resetForm }) => (\r\n          <Form className=\"ui form\">\r\n            <input type=\"hidden\" name=\"id\" />\r\n            <input type=\"hidden\" name=\"closing_year_month\" />\r\n            <MySelectInput\r\n              label=\"売上・原価区分\"\r\n              name=\"cost_sales_kind\"\r\n              options={hubCostSalesKindOptions}\r\n            />\r\n            <MySelectInput\r\n              label=\"拠点\"\r\n              name=\"hub\"\r\n              options={memberHubOptionsFactory(memberHubs)}\r\n            />\r\n            <MySelectInput\r\n              label=\"ランク\"\r\n              name=\"rank\"\r\n              options={memberRankOptionsFactory(memberRanks)}\r\n            />\r\n            <MyTextInput label=\"金額\" name=\"cost_sales\" placeholder=\"金額\" />\r\n            <MySelectInput\r\n              label=\"有効・無効\"\r\n              name=\"available\"\r\n              options={availableOptions}\r\n            />\r\n\r\n            <Button\r\n              loading={isSubmitting}\r\n              disabled={!isValid || !dirty || isSubmitting}\r\n              type=\"submit\"\r\n              positive\r\n              content=\"保存\"\r\n            />\r\n            <Button\r\n              negative\r\n              content=\"キャンセル\"\r\n              as={Link}\r\n              to=\"/memberhubcostsaless\"\r\n              onClick={() => {\r\n                setVisibleDetail(false);\r\n                resetForm();\r\n              }}\r\n            />\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n}\r\n","import { availableOptions } from \"../../../app/options/availableOptions\";\r\nimport { hubCostSalesKindOptions } from \"../../../app/options/hubCostSalesKindOptions\";\r\nimport { memberHubOptionsFactory } from \"../../../app/options/memberHubOptionsFactory\";\r\nimport { memberRankOptionsFactory } from \"../../../app/options/memberRankOptionsFactory\";\r\n\r\nconst columnsOptions = (memberHubs, memberRanks) => {\r\n  return [\r\n    {\r\n      name: \"href\",\r\n      title: \"リンク\",\r\n      type: \"html\",\r\n      width: \"100px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"cost_sales_kind\",\r\n      title: \"売上・原価区分\",\r\n      type: \"dropdown\",\r\n      source: hubCostSalesKindOptions,\r\n      width: \"140px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"hub\",\r\n      title: \"メンバー拠点\",\r\n      type: \"dropdown\",\r\n      source: memberHubOptionsFactory(memberHubs),\r\n      width: \"140px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"rank\",\r\n      title: \"メンバーランク\",\r\n      type: \"dropdown\",\r\n      source: memberRankOptionsFactory(memberRanks),\r\n      width: \"140px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"cost_sales\",\r\n      title: \"金額\",\r\n      type: \"numeric\",\r\n      width: \"120px\",\r\n      readOnly: true,\r\n      align: \"right\",\r\n      mask: \"[-]#,##\",\r\n    },\r\n    {\r\n      name: \"available\",\r\n      title: \"有効・無効\",\r\n      type: \"dropdown\",\r\n      source: availableOptions,\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"created_at\",\r\n      title: \"作成日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"created_user\",\r\n      title: \"作成ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_at\",\r\n      title: \"更新日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_user\",\r\n      title: \"更新ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"id\",\r\n      title: \"ドキュメントID\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"closing_year_month\",\r\n      title: \"締め年月\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n  ];\r\n};\r\n\r\nexport default columnsOptions;\r\n","import React, { useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport SpreadSheet from \"../../../app/common/form/SpreadSheet\";\r\nimport columnsOptions from \"./columnsOptions\";\r\n\r\nexport default function MemberHubCostSalesList({ refresh }) {\r\n  const { memberHubs } = useSelector((state) => state.memberHub);\r\n  const { memberRanks } = useSelector((state) => state.memberRank);\r\n  const { memberHubCostSaless } = useSelector(\r\n    (state) => state.memberHubCostSales\r\n  );\r\n\r\n  const options = useRef({\r\n    columns: columnsOptions(memberHubs, memberRanks),\r\n  });\r\n\r\n  return <SpreadSheet options={options} data={memberHubCostSaless} />;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Icon, Menu, Sidebar } from \"semantic-ui-react\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport { fetchLastUpdates } from \"../../lastupdate/lastupdateReducer\";\r\nimport { fetchMemberHubs } from \"../memberHubs/memberHubReducer\";\r\nimport { fetchMemberRanks } from \"../memberRanks/memberRankReducer\";\r\nimport MemberHubCostSalesForm from \"./MemberHubCostSalesForm\";\r\nimport MemberHubCostSalesList from \"./MemberHubCostSalesList\";\r\nimport { fetchMemberHubCostSaless } from \"./memberHubCostSalesReducer\";\r\n\r\nexport default function MemberHubCostSalesDashboard({ location }) {\r\n  const memberHubCostSalesId = location.hash?.replace(\"#\", \"\");\r\n  const [visibleDetail, setVisibleDetail] = useState(false);\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const dispatch = useDispatch();\r\n  const [refresh, setRefresh] = useState(0);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n\r\n  useEffect(() => {\r\n    if (memberHubCostSalesId) {\r\n      setVisibleDetail(true);\r\n    }\r\n  }, [memberHubCostSalesId]);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchLastUpdates(currentPeriod.yearMonth)).then(async () => {\r\n      await Promise.all([\r\n        dispatch(fetchMemberHubs(currentPeriod.yearMonth)),\r\n        dispatch(fetchMemberRanks(currentPeriod.yearMonth)),\r\n        dispatch(fetchMemberHubCostSaless(currentPeriod.yearMonth)),\r\n      ]);\r\n    });\r\n  }, [currentPeriod.yearMonth, dispatch, refresh]);\r\n\r\n  const handleRefresh = () => {\r\n    setRefresh(refresh + 1);\r\n  };\r\n\r\n  if (loading && !visibleDetail) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Sidebar.Pushable>\r\n        <Sidebar\r\n          width=\"wide\"\r\n          as={Menu}\r\n          animation=\"overlay\"\r\n          direction=\"right\"\r\n          vertical\r\n          visible={visibleDetail}>\r\n          <Menu.Item>\r\n            <MemberHubCostSalesForm\r\n              memberHubCostSalesId={memberHubCostSalesId}\r\n              setVisibleDetail={setVisibleDetail}\r\n              handleRefresh={handleRefresh}\r\n            />\r\n          </Menu.Item>\r\n        </Sidebar>\r\n\r\n        <Sidebar.Pusher className=\"jpusher\" dimmed={visibleDetail}>\r\n          <Menu secondary className=\"jmenu\">\r\n            <Menu.Item className={\"secondary_toolbar_title\"}>\r\n              メンバー拠点別標準原価売上表\r\n            </Menu.Item>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                handleRefresh();\r\n              }}>\r\n              <Icon name=\"refresh\" />\r\n              最新の状態に更新\r\n            </Menu.Item>\r\n            <Menu.Item onClick={() => setVisibleDetail(!visibleDetail)}>\r\n              <Icon name=\"edit\" />\r\n              新しいレコード\r\n            </Menu.Item>\r\n          </Menu>\r\n          <MemberHubCostSalesList refresh={refresh} />\r\n        </Sidebar.Pusher>\r\n      </Sidebar.Pushable>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\r\nimport { Button, Menu } from \"semantic-ui-react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Formik, Form } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport MyTextInput from \"../../../app/common/form/MyTextInput\";\r\nimport MySelectInput from \"../../../app/common/form/MySelectInput\";\r\nimport { availableOptions } from \"../../../app/options/availableOptions\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\r\nimport { loadFromAccDepartmentFromFirestore } from \"../../../app/firestore/accDepartmentService\";\r\nimport {\r\n  createAccDepartment,\r\n  selectAccDepartment,\r\n  updateAccDepartment,\r\n} from \"./accDepartmentReducer\";\r\n\r\nexport default function AccDepartmentForm({\r\n  accDepartmentId,\r\n  setVisibleDetail,\r\n  handleRefresh,\r\n}) {\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const { selectedAccDepartment } = useSelector((state) => state.accDepartment);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const initialValues = selectedAccDepartment ?? {\r\n    closing_year_month: currentPeriod.yearMonth,\r\n    name: \"\",\r\n    available: \"true\",\r\n  };\r\n\r\n  const validationSchema = Yup.object({\r\n    name: Yup.string().required(\"計上部門名称を入力してください\"),\r\n    available: Yup.string().required(\"有効・無効を設定してください\"),\r\n  });\r\n\r\n  useFirestoreDoc({\r\n    shouldExecute: !!accDepartmentId,\r\n    query: () => loadFromAccDepartmentFromFirestore(accDepartmentId),\r\n    data: (item) => dispatch(selectAccDepartment(item)),\r\n    deps: [accDepartmentId, dispatch],\r\n  });\r\n\r\n  if (loading) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Menu secondary className=\"jmenu\">\r\n        <Menu.Item className={\"secondary_toolbar_title\"}>計上部門</Menu.Item>\r\n      </Menu>\r\n      <Formik\r\n        enableReinitialize={true}\r\n        validateOnBlur={false}\r\n        initialValues={initialValues}\r\n        validationSchema={validationSchema}\r\n        onSubmit={async (values, { setSubmitting }) => {\r\n          try {\r\n            setSubmitting(true);\r\n            accDepartmentId\r\n              ? dispatch(updateAccDepartment(values))\r\n              : dispatch(createAccDepartment(values));\r\n            setVisibleDetail(false);\r\n            history.push(\"/accdepartments\");\r\n            handleRefresh();\r\n          } catch (error) {\r\n            toast.error(error.message);\r\n          } finally {\r\n            setSubmitting(false);\r\n          }\r\n        }}>\r\n        {({ isSubmitting, dirty, isValid, resetForm }) => (\r\n          <Form className=\"ui form\">\r\n            <input type=\"hidden\" name=\"id\" />\r\n            <input type=\"hidden\" name=\"closing_year_month\" />\r\n            <MyTextInput label=\"計上部門名称\" name=\"name\" placeholder=\"名称\" />\r\n            <MySelectInput\r\n              label=\"有効・無効\"\r\n              name=\"available\"\r\n              options={availableOptions}\r\n            />\r\n\r\n            <Button\r\n              loading={isSubmitting}\r\n              disabled={!isValid || !dirty || isSubmitting}\r\n              type=\"submit\"\r\n              positive\r\n              content=\"保存\"\r\n            />\r\n            <Button\r\n              negative\r\n              content=\"キャンセル\"\r\n              as={Link}\r\n              to=\"/accdepartments\"\r\n              onClick={() => {\r\n                setVisibleDetail(false);\r\n                resetForm();\r\n              }}\r\n            />\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n}\r\n","import { availableOptions } from \"../../../app/options/availableOptions\";\r\n\r\nconst columnsOptions = () => {\r\n  return [\r\n    {\r\n      name: \"href\",\r\n      title: \"リンク\",\r\n      type: \"html\",\r\n      width: \"100px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"name\",\r\n      title: \"計上部門名称\",\r\n      type: \"text\",\r\n      width: \"200px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"available\",\r\n      title: \"有効・無効\",\r\n      type: \"dropdown\",\r\n      source: availableOptions,\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"created_at\",\r\n      title: \"作成日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"created_user\",\r\n      title: \"作成ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_at\",\r\n      title: \"更新日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_user\",\r\n      title: \"更新ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"id\",\r\n      title: \"ドキュメントID\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"closing_year_month\",\r\n      title: \"締め年月\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n  ];\r\n};\r\n\r\nexport default columnsOptions;\r\n","import React, { useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport SpreadSheet from \"../../../app/common/form/SpreadSheet\";\r\nimport columnsOptions from \"./columnsOptions\";\r\n\r\nexport default function AccDepartmentList({ refresh }) {\r\n  const { accDepartments } = useSelector((state) => state.accDepartment);\r\n\r\n  const options = useRef({\r\n    columns: columnsOptions(),\r\n  });\r\n\r\n  return <SpreadSheet options={options} data={accDepartments} />;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Icon, Menu, Sidebar } from \"semantic-ui-react\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport { fetchLastUpdates } from \"../../lastupdate/lastupdateReducer\";\r\nimport AccDepartmentForm from \"./AccDepartmentForm\";\r\nimport AccDepartmentList from \"./AccDepartmentList\";\r\nimport { fetchAccDepartments } from \"./accDepartmentReducer\";\r\n\r\nexport default function AccDepartmentDashboard({ location }) {\r\n  const accDepartmentId = location.hash?.replace(\"#\", \"\");\r\n  const [visibleDetail, setVisibleDetail] = useState(false);\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const dispatch = useDispatch();\r\n  const [refresh, setRefresh] = useState(0);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n\r\n  useEffect(() => {\r\n    if (accDepartmentId) {\r\n      setVisibleDetail(true);\r\n    }\r\n  }, [accDepartmentId]);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchLastUpdates(currentPeriod.yearMonth)).then(async () => {\r\n      await Promise.all([\r\n        dispatch(fetchAccDepartments(currentPeriod.yearMonth)),\r\n      ]);\r\n    });\r\n  }, [currentPeriod.yearMonth, dispatch, refresh]);\r\n\r\n  const handleRefresh = () => {\r\n    setRefresh(refresh + 1);\r\n  };\r\n\r\n  if (loading && !visibleDetail) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Sidebar.Pushable>\r\n        <Sidebar\r\n          width=\"wide\"\r\n          as={Menu}\r\n          animation=\"overlay\"\r\n          direction=\"right\"\r\n          vertical\r\n          visible={visibleDetail}>\r\n          <Menu.Item>\r\n            <AccDepartmentForm\r\n              accDepartmentId={accDepartmentId}\r\n              setVisibleDetail={setVisibleDetail}\r\n              handleRefresh={handleRefresh}\r\n            />\r\n          </Menu.Item>\r\n        </Sidebar>\r\n\r\n        <Sidebar.Pusher className=\"jpusher\" dimmed={visibleDetail}>\r\n          <Menu secondary className=\"jmenu\">\r\n            <Menu.Item className={\"secondary_toolbar_title\"}>\r\n              計上部門\r\n            </Menu.Item>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                handleRefresh();\r\n              }}>\r\n              <Icon name=\"refresh\" />\r\n              最新の状態に更新\r\n            </Menu.Item>\r\n            <Menu.Item onClick={() => setVisibleDetail(!visibleDetail)}>\r\n              <Icon name=\"edit\" />\r\n              新しいレコード\r\n            </Menu.Item>\r\n          </Menu>\r\n          <AccDepartmentList refresh={refresh} />\r\n        </Sidebar.Pusher>\r\n      </Sidebar.Pushable>\r\n    </>\r\n  );\r\n}\r\n","export const canInputSalesOptions = [\r\n  {\r\n    key: \"true\",\r\n    id: \"true\",\r\n    text: \"入力可\",\r\n    name: \"入力可\",\r\n    value: \"true\",\r\n  },\r\n  {\r\n    key: \"false\",\r\n    id: \"false\",\r\n    text: \"入力不可\",\r\n    name: \"入力不可\",\r\n    value: \"false\",\r\n  },\r\n];\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\r\nimport { Button, Menu } from \"semantic-ui-react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Formik, Form } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport MyTextInput from \"../../../app/common/form/MyTextInput\";\r\nimport MySelectInput from \"../../../app/common/form/MySelectInput\";\r\nimport { availableOptions } from \"../../../app/options/availableOptions\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\r\nimport { loadFromAccSubjectFromFirestore } from \"../../../app/firestore/accSubjectService\";\r\nimport {\r\n  createAccSubject,\r\n  selectAccSubject,\r\n  updateAccSubject,\r\n} from \"./accSubjectReducer\";\r\nimport { canInputSalesOptions } from \"../../../app/options/canInputSalesOptions\";\r\n\r\nexport default function AccSubjectForm({\r\n  accSubjectId,\r\n  setVisibleDetail,\r\n  handleRefresh,\r\n}) {\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const { selectedAccSubject } = useSelector((state) => state.accSubject);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const initialValues = selectedAccSubject ?? {\r\n    closing_year_month: currentPeriod.yearMonth,\r\n    name: \"\",\r\n    can_input_sales: \"true\",\r\n    available: \"true\",\r\n  };\r\n\r\n  const validationSchema = Yup.object({\r\n    name: Yup.string().required(\"費用科目名称を入力してください\"),\r\n    can_input_sales: Yup.string().required(\"売上入力可否を設定してください\"),\r\n    available: Yup.string().required(\"有効・無効を設定してください\"),\r\n  });\r\n\r\n  useFirestoreDoc({\r\n    shouldExecute: !!accSubjectId,\r\n    query: () => loadFromAccSubjectFromFirestore(accSubjectId),\r\n    data: (item) => dispatch(selectAccSubject(item)),\r\n    deps: [accSubjectId, dispatch],\r\n  });\r\n\r\n  if (loading) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Menu secondary className=\"jmenu\">\r\n        <Menu.Item className={\"secondary_toolbar_title\"}>費用科目</Menu.Item>\r\n      </Menu>\r\n      <Formik\r\n        enableReinitialize={true}\r\n        validateOnBlur={false}\r\n        initialValues={initialValues}\r\n        validationSchema={validationSchema}\r\n        onSubmit={async (values, { setSubmitting }) => {\r\n          try {\r\n            setSubmitting(true);\r\n            accSubjectId\r\n              ? dispatch(updateAccSubject(values))\r\n              : dispatch(createAccSubject(values));\r\n            setVisibleDetail(false);\r\n            history.push(\"/accsubjects\");\r\n            handleRefresh();\r\n          } catch (error) {\r\n            toast.error(error.message);\r\n          } finally {\r\n            setSubmitting(false);\r\n          }\r\n        }}>\r\n        {({ isSubmitting, dirty, isValid, resetForm }) => (\r\n          <Form className=\"ui form\">\r\n            <input type=\"hidden\" name=\"id\" />\r\n            <input type=\"hidden\" name=\"closing_year_month\" />\r\n            <MyTextInput label=\"費用科目名称\" name=\"name\" placeholder=\"名称\" />\r\n            <MySelectInput\r\n              label=\"売上入力可否\"\r\n              name=\"can_input_sales\"\r\n              options={canInputSalesOptions}\r\n            />\r\n            <MySelectInput\r\n              label=\"有効・無効\"\r\n              name=\"available\"\r\n              options={availableOptions}\r\n            />\r\n\r\n            <Button\r\n              loading={isSubmitting}\r\n              disabled={!isValid || !dirty || isSubmitting}\r\n              type=\"submit\"\r\n              positive\r\n              content=\"保存\"\r\n            />\r\n            <Button\r\n              negative\r\n              content=\"キャンセル\"\r\n              as={Link}\r\n              to=\"/accsubjects\"\r\n              onClick={() => {\r\n                setVisibleDetail(false);\r\n                resetForm();\r\n              }}\r\n            />\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n}\r\n","import { availableOptions } from \"../../../app/options/availableOptions\";\r\nimport { canInputSalesOptions } from \"../../../app/options/canInputSalesOptions\";\r\n\r\nconst columnsOptions = () => {\r\n  return [\r\n    {\r\n      name: \"href\",\r\n      title: \"リンク\",\r\n      type: \"html\",\r\n      width: \"100px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"name\",\r\n      title: \"費用科目名称\",\r\n      type: \"text\",\r\n      width: \"200px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"can_input_sales\",\r\n      title: \"売上入力可否\",\r\n      type: \"dropdown\",\r\n      source: canInputSalesOptions,\r\n      width: \"140px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"available\",\r\n      title: \"有効・無効\",\r\n      type: \"dropdown\",\r\n      source: availableOptions,\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"created_at\",\r\n      title: \"作成日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"created_user\",\r\n      title: \"作成ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_at\",\r\n      title: \"更新日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_user\",\r\n      title: \"更新ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"id\",\r\n      title: \"ドキュメントID\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"closing_year_month\",\r\n      title: \"締め年月\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n  ];\r\n};\r\n\r\nexport default columnsOptions;\r\n","import React, { useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport SpreadSheet from \"../../../app/common/form/SpreadSheet\";\r\nimport columnsOptions from \"./columnsOptions\";\r\n\r\nexport default function AccDepartmentList({ refresh }) {\r\n  const { accSubjects } = useSelector((state) => state.accSubject);\r\n\r\n  const options = useRef({\r\n    columns: columnsOptions(),\r\n  });\r\n\r\n  return <SpreadSheet options={options} data={accSubjects} />;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Icon, Menu, Sidebar } from \"semantic-ui-react\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport { fetchLastUpdates } from \"../../lastupdate/lastupdateReducer\";\r\nimport AccSubjectForm from \"./AccSubjectForm\";\r\nimport AccSubjectList from \"./AccSubjectList\";\r\nimport { fetchAccSubjects } from \"./accSubjectReducer\";\r\n\r\nexport default function AccSubjectDashboard({ location }) {\r\n  const accSubjectId = location.hash?.replace(\"#\", \"\");\r\n  const [visibleDetail, setVisibleDetail] = useState(false);\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const dispatch = useDispatch();\r\n  const [refresh, setRefresh] = useState(0);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n\r\n  useEffect(() => {\r\n    if (accSubjectId) {\r\n      setVisibleDetail(true);\r\n    }\r\n  }, [accSubjectId]);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchLastUpdates(currentPeriod.yearMonth)).then(async () => {\r\n      await Promise.all([dispatch(fetchAccSubjects(currentPeriod.yearMonth))]);\r\n    });\r\n  }, [currentPeriod.yearMonth, dispatch, refresh]);\r\n\r\n  const handleRefresh = () => {\r\n    setRefresh(refresh + 1);\r\n  };\r\n\r\n  if (loading && !visibleDetail) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Sidebar.Pushable>\r\n        <Sidebar\r\n          width=\"wide\"\r\n          as={Menu}\r\n          animation=\"overlay\"\r\n          direction=\"right\"\r\n          vertical\r\n          visible={visibleDetail}>\r\n          <Menu.Item>\r\n            <AccSubjectForm\r\n              accSubjectId={accSubjectId}\r\n              setVisibleDetail={setVisibleDetail}\r\n              handleRefresh={handleRefresh}\r\n            />\r\n          </Menu.Item>\r\n        </Sidebar>\r\n\r\n        <Sidebar.Pusher className=\"jpusher\" dimmed={visibleDetail}>\r\n          <Menu secondary className=\"jmenu\">\r\n            <Menu.Item className={\"secondary_toolbar_title\"}>\r\n              費用科目\r\n            </Menu.Item>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                handleRefresh();\r\n              }}>\r\n              <Icon name=\"refresh\" />\r\n              最新の状態に更新\r\n            </Menu.Item>\r\n            <Menu.Item onClick={() => setVisibleDetail(!visibleDetail)}>\r\n              <Icon name=\"edit\" />\r\n              新しいレコード\r\n            </Menu.Item>\r\n          </Menu>\r\n          <AccSubjectList refresh={refresh} />\r\n        </Sidebar.Pusher>\r\n      </Sidebar.Pushable>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\r\nimport { Button, Menu } from \"semantic-ui-react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Formik, Form } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport MyTextInput from \"../../../app/common/form/MyTextInput\";\r\nimport MySelectInput from \"../../../app/common/form/MySelectInput\";\r\nimport { availableOptions } from \"../../../app/options/availableOptions\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\r\nimport { loadFromMemberAssignManagerFromFirestore } from \"../../../app/firestore/memberAssignManagerService\";\r\nimport {\r\n  createMemberAssignManager,\r\n  selectMemberAssignManager,\r\n  updateMemberAssignManager,\r\n} from \"./memberAssignManagerReducer\";\r\n\r\nexport default function MemberAssignManagerForm({\r\n  memberAssignManagerId,\r\n  setVisibleDetail,\r\n  handleRefresh,\r\n}) {\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const { selectedMemberAssignManager } = useSelector(\r\n    (state) => state.memberAssignManager\r\n  );\r\n  const { loading, error } = useSelector((state) => state.async);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const initialValues = selectedMemberAssignManager ?? {\r\n    closing_year_month: currentPeriod.yearMonth,\r\n    name: \"\",\r\n    available: \"true\",\r\n  };\r\n\r\n  const validationSchema = Yup.object({\r\n    name: Yup.string().required(\"担当者名称を入力してください\"),\r\n    available: Yup.string().required(\"有効・無効を設定してください\"),\r\n  });\r\n\r\n  useFirestoreDoc({\r\n    shouldExecute: !!memberAssignManagerId,\r\n    query: () =>\r\n      loadFromMemberAssignManagerFromFirestore(memberAssignManagerId),\r\n    data: (item) => dispatch(selectMemberAssignManager(item)),\r\n    deps: [memberAssignManagerId, dispatch],\r\n  });\r\n\r\n  if (loading) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Menu secondary className=\"jmenu\">\r\n        <Menu.Item className={\"secondary_toolbar_title\"}>\r\n          メンバーアサイン管理担当者\r\n        </Menu.Item>\r\n      </Menu>\r\n      <Formik\r\n        enableReinitialize={true}\r\n        validateOnBlur={false}\r\n        initialValues={initialValues}\r\n        validationSchema={validationSchema}\r\n        onSubmit={async (values, { setSubmitting }) => {\r\n          try {\r\n            setSubmitting(true);\r\n            memberAssignManagerId\r\n              ? dispatch(updateMemberAssignManager(values))\r\n              : dispatch(createMemberAssignManager(values));\r\n            setVisibleDetail(false);\r\n            history.push(\"/memberassignmanagers\");\r\n            handleRefresh();\r\n          } catch (error) {\r\n            toast.error(error.message);\r\n          } finally {\r\n            setSubmitting(false);\r\n          }\r\n        }}>\r\n        {({ isSubmitting, dirty, isValid, resetForm }) => (\r\n          <Form className=\"ui form\">\r\n            <input type=\"hidden\" name=\"id\" />\r\n            <input type=\"hidden\" name=\"closing_year_month\" />\r\n            <MyTextInput\r\n              label=\"担当者名称\"\r\n              name=\"name\"\r\n              placeholder=\"担当者名称\"\r\n            />\r\n            <MySelectInput\r\n              label=\"有効・無効\"\r\n              name=\"available\"\r\n              options={availableOptions}\r\n            />\r\n\r\n            <Button\r\n              loading={isSubmitting}\r\n              disabled={!isValid || !dirty || isSubmitting}\r\n              type=\"submit\"\r\n              positive\r\n              content=\"保存\"\r\n            />\r\n            <Button\r\n              negative\r\n              content=\"キャンセル\"\r\n              as={Link}\r\n              to=\"/memberassignmanagers\"\r\n              onClick={() => {\r\n                setVisibleDetail(false);\r\n                resetForm();\r\n              }}\r\n            />\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n}\r\n","import { availableOptions } from \"../../../app/options/availableOptions\";\r\n\r\nconst columnsOptions = () => {\r\n  return [\r\n    {\r\n      name: \"href\",\r\n      title: \"リンク\",\r\n      type: \"html\",\r\n      width: \"100px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"name\",\r\n      title: \"担当者名称\",\r\n      type: \"text\",\r\n      width: \"200px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"available\",\r\n      title: \"有効・無効\",\r\n      type: \"dropdown\",\r\n      source: availableOptions,\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"created_at\",\r\n      title: \"作成日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"created_user\",\r\n      title: \"作成ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_at\",\r\n      title: \"更新日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_user\",\r\n      title: \"更新ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"id\",\r\n      title: \"ドキュメントID\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"closing_year_month\",\r\n      title: \"締め年月\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n  ];\r\n};\r\n\r\nexport default columnsOptions;\r\n","import React, { useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport SpreadSheet from \"../../../app/common/form/SpreadSheet\";\r\nimport columnsOptions from \"./columnsOptions\";\r\n\r\nexport default function MemberAssignManagerList({ refresh }) {\r\n  const { memberAssignManagers } = useSelector(\r\n    (state) => state.memberAssignManager\r\n  );\r\n\r\n  const options = useRef({\r\n    columns: columnsOptions(),\r\n  });\r\n\r\n  return <SpreadSheet options={options} data={memberAssignManagers} />;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Icon, Menu, Sidebar } from \"semantic-ui-react\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport { fetchLastUpdates } from \"../../lastupdate/lastupdateReducer\";\r\nimport MemberAssignManagerForm from \"./MemberAssignManagerForm\";\r\nimport MemberAssignManagerList from \"./MemberAssignManagerList\";\r\nimport { fetchMemberAssignManagers } from \"./memberAssignManagerReducer\";\r\n\r\nexport default function MemberAssignManagerDashboard({ location }) {\r\n  const memberAssignManagerId = location.hash?.replace(\"#\", \"\");\r\n  const [visibleDetail, setVisibleDetail] = useState(false);\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const dispatch = useDispatch();\r\n  const [refresh, setRefresh] = useState(0);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n\r\n  useEffect(() => {\r\n    if (memberAssignManagerId) {\r\n      setVisibleDetail(true);\r\n    }\r\n  }, [memberAssignManagerId]);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchLastUpdates(currentPeriod.yearMonth)).then(async () => {\r\n      await Promise.all([\r\n        dispatch(fetchMemberAssignManagers(currentPeriod.yearMonth)),\r\n      ]);\r\n    });\r\n  }, [currentPeriod.yearMonth, dispatch, refresh]);\r\n\r\n  const handleRefresh = () => {\r\n    setRefresh(refresh + 1);\r\n  };\r\n\r\n  if (loading && !visibleDetail) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Sidebar.Pushable>\r\n        <Sidebar\r\n          width=\"wide\"\r\n          as={Menu}\r\n          animation=\"overlay\"\r\n          direction=\"right\"\r\n          vertical\r\n          visible={visibleDetail}>\r\n          <Menu.Item>\r\n            <MemberAssignManagerForm\r\n              memberAssignManagerId={memberAssignManagerId}\r\n              setVisibleDetail={setVisibleDetail}\r\n              handleRefresh={handleRefresh}\r\n            />\r\n          </Menu.Item>\r\n        </Sidebar>\r\n\r\n        <Sidebar.Pusher className=\"jpusher\" dimmed={visibleDetail}>\r\n          <Menu secondary className=\"jmenu\">\r\n            <Menu.Item className={\"secondary_toolbar_title\"}>\r\n              メンバーアサイン管理担当者\r\n            </Menu.Item>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                handleRefresh();\r\n              }}>\r\n              <Icon name=\"refresh\" />\r\n              最新の状態に更新\r\n            </Menu.Item>\r\n            <Menu.Item onClick={() => setVisibleDetail(!visibleDetail)}>\r\n              <Icon name=\"edit\" />\r\n              新しいレコード\r\n            </Menu.Item>\r\n          </Menu>\r\n          <MemberAssignManagerList refresh={refresh} />\r\n        </Sidebar.Pusher>\r\n      </Sidebar.Pushable>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\nimport { useField } from \"formik\";\nimport { FormField, Label } from \"semantic-ui-react\";\n\nexport default function MyTextArea({ label, ...props }) {\n  const [field, meta] = useField(props);\n\n  return (\n    <FormField error={meta.touched && !!meta.error}>\n      <label>{label}</label>\n      <textarea {...field} {...props} />\n      {meta.touched && meta.error ? (\n        <Label pointing color='red'>\n          {meta.error}\n        </Label>\n      ) : null}\n    </FormField>\n  );\n}\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, Redirect, useHistory } from \"react-router-dom\";\r\nimport { Button, Menu } from \"semantic-ui-react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Formik, Form } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport MyTextInput from \"../../../app/common/form/MyTextInput\";\r\nimport MyTextArea from \"../../../app/common/form/MyTextArea\";\r\nimport MySelectInput from \"../../../app/common/form/MySelectInput\";\r\nimport { availableOptions } from \"../../../app/options/availableOptions\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport useFirestoreDoc from \"../../../app/hooks/useFirestoreDoc\";\r\nimport { loadFromPrecisionFromFirestore } from \"../../../app/firestore/precisionService\";\r\nimport {\r\n  createPrecision,\r\n  selectPrecision,\r\n  updatePrecision,\r\n} from \"./precisionReducer\";\r\nimport { canInputSalesOptions } from \"../../../app/options/canInputSalesOptions\";\r\n\r\nexport default function PrecisionForm({\r\n  precisionId,\r\n  setVisibleDetail,\r\n  handleRefresh,\r\n}) {\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const { selectedPrecision } = useSelector((state) => state.precision);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const initialValues = selectedPrecision ?? {\r\n    closing_year_month: currentPeriod.yearMonth,\r\n    name: \"\",\r\n    color: \"#ffffff\",\r\n    can_input_sales: \"true\",\r\n    note: \"\",\r\n    available: \"true\",\r\n  };\r\n\r\n  const validationSchema = Yup.object({\r\n    name: Yup.string().required(\"名称を入力してください\"),\r\n    color: Yup.string().required(\"色を入力してください\"),\r\n    can_input_sales: Yup.string().required(\"売上入力可否を設定してください\"),\r\n    note: Yup.string().notRequired(),\r\n    available: Yup.string().required(\"有効・無効を設定してください\"),\r\n  });\r\n\r\n  useFirestoreDoc({\r\n    shouldExecute: !!precisionId,\r\n    query: () => loadFromPrecisionFromFirestore(precisionId),\r\n    data: (item) => dispatch(selectPrecision(item)),\r\n    deps: [precisionId, dispatch],\r\n  });\r\n\r\n  if (loading) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Menu secondary className=\"jmenu\">\r\n        <Menu.Item className={\"secondary_toolbar_title\"}>確度</Menu.Item>\r\n      </Menu>\r\n      <Formik\r\n        enableReinitialize={true}\r\n        validateOnBlur={false}\r\n        initialValues={initialValues}\r\n        validationSchema={validationSchema}\r\n        onSubmit={async (values, { setSubmitting }) => {\r\n          try {\r\n            setSubmitting(true);\r\n            precisionId\r\n              ? dispatch(updatePrecision(values))\r\n              : dispatch(createPrecision(values));\r\n            setVisibleDetail(false);\r\n            history.push(\"/precisions\");\r\n            handleRefresh();\r\n          } catch (error) {\r\n            toast.error(error.message);\r\n          } finally {\r\n            setSubmitting(false);\r\n          }\r\n        }}>\r\n        {({ isSubmitting, dirty, isValid, resetForm }) => (\r\n          <Form className=\"ui form\">\r\n            <input type=\"hidden\" name=\"id\" />\r\n            <input type=\"hidden\" name=\"closing_year_month\" />\r\n            <MyTextInput label=\"確度名称\" name=\"name\" placeholder=\"確度名称\" />\r\n            <MyTextInput label=\"色\" name=\"color\" placeholder=\"色\" />\r\n            <MySelectInput\r\n              label=\"売上入力可否\"\r\n              name=\"can_input_sales\"\r\n              options={canInputSalesOptions}\r\n            />\r\n            <MyTextArea label=\"内容\" name=\"note\" placeholder=\"内容\" rows=\"5\" />\r\n            <MySelectInput\r\n              label=\"有効・無効\"\r\n              name=\"available\"\r\n              options={availableOptions}\r\n            />\r\n\r\n            <Button\r\n              loading={isSubmitting}\r\n              disabled={!isValid || !dirty || isSubmitting}\r\n              type=\"submit\"\r\n              positive\r\n              content=\"保存\"\r\n            />\r\n            <Button\r\n              negative\r\n              content=\"キャンセル\"\r\n              as={Link}\r\n              to=\"/precisions\"\r\n              onClick={() => {\r\n                setVisibleDetail(false);\r\n                resetForm();\r\n              }}\r\n            />\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n}\r\n","import { availableOptions } from \"../../../app/options/availableOptions\";\r\nimport { canInputSalesOptions } from \"../../../app/options/canInputSalesOptions\";\r\n\r\nconst columnsOptions = () => {\r\n  return [\r\n    {\r\n      name: \"href\",\r\n      title: \"リンク\",\r\n      type: \"html\",\r\n      width: \"100px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"name\",\r\n      title: \"確度名称\",\r\n      type: \"text\",\r\n      width: \"200px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"color\",\r\n      title: \"色\",\r\n      type: \"color\",\r\n      width: \"100px\",\r\n      render: \"square\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"can_input_sales\",\r\n      title: \"売上入力可否\",\r\n      type: \"dropdown\",\r\n      source: canInputSalesOptions,\r\n      width: \"140px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"note\",\r\n      title: \"内容\",\r\n      type: \"text\",\r\n      width: \"500px\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"available\",\r\n      title: \"有効・無効\",\r\n      type: \"dropdown\",\r\n      source: availableOptions,\r\n      width: \"140px\",\r\n      readOnly: true,\r\n      align: \"center\",\r\n    },\r\n    {\r\n      name: \"created_at\",\r\n      title: \"作成日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"created_user\",\r\n      title: \"作成ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_at\",\r\n      title: \"更新日\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"updated_user\",\r\n      title: \"更新ユーザー\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"id\",\r\n      title: \"ドキュメントID\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n    {\r\n      name: \"closing_year_month\",\r\n      title: \"締め年月\",\r\n      type: \"hidden\",\r\n      width: \"0\",\r\n      readOnly: true,\r\n    },\r\n  ];\r\n};\r\n\r\nexport default columnsOptions;\r\n","import React, { useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport SpreadSheet from \"../../../app/common/form/SpreadSheet\";\r\nimport columnsOptions from \"./columnsOptions\";\r\n\r\nexport default function PrecisionList({ refresh }) {\r\n  const { precisions } = useSelector((state) => state.precision);\r\n\r\n  const options = useRef({\r\n    columns: columnsOptions(),\r\n  });\r\n\r\n  return <SpreadSheet options={options} data={precisions} />;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Icon, Menu, Sidebar } from \"semantic-ui-react\";\r\nimport NowLoading from \"../../../app/common/utils/NowLoading\";\r\nimport { fetchLastUpdates } from \"../../lastupdate/lastupdateReducer\";\r\nimport PrecisionForm from \"./PrecisionForm\";\r\nimport PrecisionList from \"./PrecisionList\";\r\nimport { fetchPrecisions } from \"./precisionReducer\";\r\n\r\nexport default function PrecisionDashboard({ location }) {\r\n  const precisionId = location.hash?.replace(\"#\", \"\");\r\n  const [visibleDetail, setVisibleDetail] = useState(false);\r\n  const { currentPeriod } = useSelector((state) => state.period);\r\n  const dispatch = useDispatch();\r\n  const [refresh, setRefresh] = useState(0);\r\n  const { loading, error } = useSelector((state) => state.async);\r\n\r\n  useEffect(() => {\r\n    if (precisionId) {\r\n      setVisibleDetail(true);\r\n    }\r\n  }, [precisionId]);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchLastUpdates(currentPeriod.yearMonth)).then(async () => {\r\n      await Promise.all([dispatch(fetchPrecisions(currentPeriod.yearMonth))]);\r\n    });\r\n  }, [currentPeriod.yearMonth, dispatch, refresh]);\r\n\r\n  const handleRefresh = () => {\r\n    setRefresh(refresh + 1);\r\n  };\r\n\r\n  if (loading && !visibleDetail) {\r\n    return <NowLoading />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to=\"/error\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Sidebar.Pushable>\r\n        <Sidebar\r\n          width=\"wide\"\r\n          as={Menu}\r\n          animation=\"overlay\"\r\n          direction=\"right\"\r\n          vertical\r\n          visible={visibleDetail}>\r\n          <Menu.Item>\r\n            <PrecisionForm\r\n              precisionId={precisionId}\r\n              setVisibleDetail={setVisibleDetail}\r\n              handleRefresh={handleRefresh}\r\n            />\r\n          </Menu.Item>\r\n        </Sidebar>\r\n\r\n        <Sidebar.Pusher className=\"jpusher\" dimmed={visibleDetail}>\r\n          <Menu secondary className=\"jmenu\">\r\n            <Menu.Item className={\"secondary_toolbar_title\"}>確度</Menu.Item>\r\n            <Menu.Item\r\n              onClick={() => {\r\n                handleRefresh();\r\n              }}>\r\n              <Icon name=\"refresh\" />\r\n              最新の状態に更新\r\n            </Menu.Item>\r\n            <Menu.Item onClick={() => setVisibleDetail(!visibleDetail)}>\r\n              <Icon name=\"edit\" />\r\n              新しいレコード\r\n            </Menu.Item>\r\n          </Menu>\r\n          <PrecisionList refresh={refresh} />\r\n        </Sidebar.Pusher>\r\n      </Sidebar.Pushable>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.min.css\";\nimport { Container } from \"semantic-ui-react\";\nimport ModalManager from \"../common/modals/ModalManager\";\nimport NowLoading from \"../common/utils/NowLoading\";\nimport ErrorComponent from \"../common/errors/ErrorComponent\";\nimport AuthContainer from \"../../features/auth/AuthContainer\";\nimport HomePage from \"../../features/home/HomePage\";\nimport NavBar from \"../../features/nav/NavBar\";\nimport Dashboard from \"../../features/dashboard/Dashboard\";\nimport ProfilePage from \"../../features/profiles/profilePage/ProfilePage\";\nimport AssignDashboard from \"../../features/assign/AssignDashboard\";\nimport ClientDashboard from \"../../features/master/clients/ClientDashboard\";\nimport MemberDashboard from \"../../features/master/members/MemberDashboard\";\nimport ProjectDashboard from \"../../features/master/projects/ProjectDashboard\";\nimport MemberTagDashboard from \"../../features/master/memberTags/MemberTagDashboard\";\nimport MemberRankDashboard from \"../../features/master/memberRanks/MemberRankDashboard\";\nimport MemberAffiliationDashboard from \"../../features/master/memberAffiliations/MemberAffiliationDashboard\";\nimport MemberHubDashboard from \"../../features/master/memberHubs/MemberHubDashboard\";\nimport MemberHubCostSalesDashboard from \"../../features/master/memberHubCostSaless/MemberHubCostSalesDashboard\";\nimport AccDepartmentDashboard from \"../../features/master/accDepartments/AccDepartmentDashboard\";\nimport AccSubjectDashboard from \"../../features/master/accSubjects/AccSubjectDashboard\";\nimport MemberAssignManagerDashboard from \"../../features/master/memberAssignManagers/MemberAssignManagerDashboard\";\nimport PrecisionDashboard from \"../../features/master/precisions/PrecisionDashboard\";\n\nfunction App() {\n  const { initialized } = useSelector((state) => state.async);\n\n  if (!initialized) {\n    return <NowLoading content=\"Loading Application...\" />;\n  }\n\n  return (\n    <>\n      <ModalManager />\n      <ToastContainer position=\"bottom-right\" hideProgressBar />\n      <Route exact path=\"/\" component={HomePage} />\n      <Route\n        path={\"/(.+)\"}\n        render={() => (\n          <AuthContainer>\n            <NavBar />\n            <Container className=\"wide\">\n              <Route exact path=\"/error\" component={ErrorComponent} />\n              <Route exact path=\"/dashboard\" component={Dashboard} />\n              <Route exact path=\"/assign\" component={AssignDashboard} />\n              <Route exact path=\"/profile\" component={ProfilePage} />\n              <Route exact path=\"/clients\" component={ClientDashboard} />\n              <Route exact path=\"/members\" component={MemberDashboard} />\n              <Route exact path=\"/projects\" component={ProjectDashboard} />\n              <Route exact path=\"/membertags\" component={MemberTagDashboard} />\n              <Route\n                exact\n                path=\"/memberranks\"\n                component={MemberRankDashboard}\n              />\n              <Route\n                exact\n                path=\"/memberassignmanagers\"\n                component={MemberAssignManagerDashboard}\n              />\n              <Route\n                exact\n                path=\"/memberaffiliations\"\n                component={MemberAffiliationDashboard}\n              />\n              <Route exact path=\"/memberhubs\" component={MemberHubDashboard} />\n              <Route\n                exact\n                path=\"/memberhubcostsaless\"\n                component={MemberHubCostSalesDashboard}\n              />\n              <Route\n                exact\n                path=\"/accdepartments\"\n                component={AccDepartmentDashboard}\n              />\n              <Route\n                exact\n                path=\"/accsubjects\"\n                component={AccSubjectDashboard}\n              />\n              <Route exact path=\"/precisions\" component={PrecisionDashboard} />\n            </Container>\n          </AuthContainer>\n        )}\n      />\n    </>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { SIGN_IN_USER, SIGN_OUT_USER } from \"./authConstants\";\r\n\r\nconst initialState = {\r\n  authenticated: false,\r\n  currentUser: {\r\n    email: \"\",\r\n    photoURL: \"/assets/user.png\",\r\n  },\r\n};\r\n\r\nexport default function authReducer(state = initialState, { type, payload }) {\r\n  switch (type) {\r\n    case SIGN_IN_USER:\r\n      return {\r\n        ...state,\r\n        authenticated: true,\r\n        currentUser: {\r\n          email: payload.email,\r\n          photoURL: \"/assets/user.png\",\r\n        },\r\n      };\r\n    case SIGN_OUT_USER:\r\n      return {\r\n        ...state,\r\n        authenticated: false,\r\n        currentUser: null,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from \"redux\";\r\nimport assignReducer from \"../../features/assign/assignReducer\";\r\nimport authReducer from \"../../features/auth/authReducer\";\r\nimport lastUpdateReducer from \"../../features/lastupdate/lastupdateReducer\";\r\nimport accDepartmentReducer from \"../../features/master/accDepartments/accDepartmentReducer\";\r\nimport accSubjectReducer from \"../../features/master/accSubjects/accSubjectReducer\";\r\nimport clientReducer from \"../../features/master/clients/clientReducer\";\r\nimport memberAffiliationReducer from \"../../features/master/memberAffiliations/memberAffiliationReducer\";\r\nimport memberAssignManagerReducer from \"../../features/master/memberAssignManagers/memberAssignManagerReducer\";\r\nimport memberHubCostSalesReducer from \"../../features/master/memberHubCostSaless/memberHubCostSalesReducer\";\r\nimport memberHubReducer from \"../../features/master/memberHubs/memberHubReducer\";\r\nimport memberRankReducer from \"../../features/master/memberRanks/memberRankReducer\";\r\nimport memberReducer from \"../../features/master/members/memberReducer\";\r\nimport memberTagReducer from \"../../features/master/memberTags/memberTagReducer\";\r\nimport precisionReducer from \"../../features/master/precisions/precisionReducer\";\r\nimport projectReducer from \"../../features/master/projects/projectReducer\";\r\nimport periodReducer from \"../../features/period/periodReducer\";\r\nimport asyncReducer from \"../async/asyncReducer\";\r\nimport modalReducer from \"../common/modals/modalReducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n  modals: modalReducer,\r\n  async: asyncReducer,\r\n  auth: authReducer,\r\n  lastupdate: lastUpdateReducer,\r\n  period: periodReducer,\r\n  assign: assignReducer,\r\n  member: memberReducer,\r\n  memberTag: memberTagReducer,\r\n  memberRank: memberRankReducer,\r\n  memberAssignManager: memberAssignManagerReducer,\r\n  memberAffiliation: memberAffiliationReducer,\r\n  memberHub: memberHubReducer,\r\n  memberHubCostSales: memberHubCostSalesReducer,\r\n  accDepartment: accDepartmentReducer,\r\n  accSubject: accSubjectReducer,\r\n  precision: precisionReducer,\r\n  client: clientReducer,\r\n  project: projectReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","export const SIGN_IN_USER = \"auth/sign_in_user\";\r\nexport const SIGN_OUT_USER = \"auth/sign_out_user\";\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport \"./app/layout/styles.css\";\r\nimport App from \"./app/layout/App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport { configureStore } from \"./app/store/configureStore\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nconst store = configureStore();\r\n\r\nconst render = () => {\r\n  ReactDOM.render(\r\n    <Provider store={store}>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n    </Provider>,\r\n    document.getElementById(\"root\")\r\n  );\r\n};\r\n\r\nif (module.hot) {\r\n  module.hot.accept(\"./app/layout/App\", function () {\r\n    setTimeout(render);\r\n  });\r\n}\r\n\r\nrender();\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import { applyMiddleware, createStore } from \"redux\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport thunk from \"redux-thunk\";\r\nimport { verifyAuth } from \"../../features/auth/authAction\";\r\nimport { latestPeriod } from \"../../features/period/periodReducer\";\r\nimport rootReducer from \"./rootReducer\";\r\n\r\nexport function configureStore() {\r\n  const store = createStore(\r\n    rootReducer,\r\n    composeWithDevTools(applyMiddleware(thunk))\r\n  );\r\n  store.dispatch(verifyAuth());\r\n  store.dispatch(latestPeriod());\r\n  return store;\r\n}\r\n","import firebase from \"../../app/config/firebase\";\r\nimport { SIGN_IN_USER, SIGN_OUT_USER } from \"./authConstants\";\r\nimport { APP_LOADED } from \"../../app/async/asyncReducer\";\r\n\r\nexport function signInUser(payload) {\r\n  return {\r\n    type: SIGN_IN_USER,\r\n    payload,\r\n  };\r\n}\r\n\r\nexport function signOutUser(payload) {\r\n  return {\r\n    type: SIGN_OUT_USER,\r\n    payload,\r\n  };\r\n}\r\n\r\nexport function verifyAuth() {\r\n  return function (dispatch) {\r\n    return firebase.auth().onAuthStateChanged((user) => {\r\n      if (user) {\r\n        dispatch(signInUser(user));\r\n      } else {\r\n        dispatch(signOutUser());\r\n      }\r\n      dispatch({ type: APP_LOADED });\r\n    });\r\n  };\r\n}\r\n"],"sourceRoot":""}